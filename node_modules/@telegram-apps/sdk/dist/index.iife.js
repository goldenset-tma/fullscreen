this.telegramApps=this.telegramApps||{};this.telegramApps.sdk=function(o){"use strict";function io(e){return{lang:(e==null?void 0:e.lang)??void 0,message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??void 0,abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??void 0}}function Hm(e){}function Fm(e){}function ml(e,t){var n;return(n=void 0)==null?void 0:n.get(t)}function hl(e){var t,n;const r=typeof e;return r==="string"?`"${e}"`:r==="number"||r==="bigint"||r==="boolean"?`${e}`:r==="object"||r==="function"?(e&&((n=(t=Object.getPrototypeOf(e))==null?void 0:t.constructor)==null?void 0:n.name))??"null":r}function ve(e,t,n,r,s){const i=s&&"input"in s?s.input:n.value,a=(s==null?void 0:s.expected)??e.expects??null,u=(s==null?void 0:s.received)??hl(i),c={kind:e.kind,type:e.type,input:i,expected:a,received:u,message:`Invalid ${t}: ${a?`Expected ${a} but r`:"R"}eceived ${u}`,requirement:e.requirement,path:s==null?void 0:s.path,issues:s==null?void 0:s.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},l=e.kind==="schema",p=(s==null?void 0:s.message)??e.message??ml(e.reference,c.lang)??(l?(c.lang,void 0):null)??r.message??(c.lang,void 0);p&&(c.message=typeof p=="function"?p(c):p),l&&(n.typed=!1),n.issues?n.issues.push(c):n.issues=[c]}function Z(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},io())}}}function _l(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}var bl=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function Dt(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function Qe(e,t){return!e["~run"]({value:t},{abortEarly:!0}).issues}function ao(){return{kind:"schema",type:"any",reference:ao,expects:"any",async:!1,get"~standard"(){return Z(this)},"~run"(e){return e.typed=!0,e}}}function Nt(e){return{kind:"schema",type:"boolean",reference:Nt,expects:"boolean",async:!1,message:e,get"~standard"(){return Z(this)},"~run"(t,n){return typeof t.value=="boolean"?t.typed=!0:ve(this,"type",t,n),t}}}function Vt(e){return{kind:"schema",type:"function",reference:Vt,expects:"Function",async:!1,message:e,get"~standard"(){return Z(this)},"~run"(t,n){return typeof t.value=="function"?t.typed=!0:ve(this,"type",t,n),t}}}function W(e,t){return{kind:"schema",type:"loose_object",reference:W,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return Z(this)},"~run"(n,r){var s;const i=n.value;if(i&&typeof i=="object"){n.typed=!0,n.value={};for(const a in this.entries){const u=this.entries[a];if(a in i||(u.type==="exact_optional"||u.type==="optional"||u.type==="nullish")&&u.default!==void 0){const c=a in i?i[a]:Dt(u),l=u["~run"]({value:c},r);if(l.issues){const p={type:"object",origin:"value",input:i,key:a,value:c};for(const d of l.issues)d.path?d.path.unshift(p):d.path=[p],(s=n.issues)==null||s.push(d);if(n.issues||(n.issues=l.issues),r.abortEarly){n.typed=!1;break}}l.typed||(n.typed=!1),n.value[a]=l.value}else if(u.type!=="exact_optional"&&u.type!=="optional"&&u.type!=="nullish"&&(ve(this,"key",n,r,{input:void 0,expected:`"${a}"`,path:[{type:"object",origin:"key",input:i,key:a,value:i[a]}]}),r.abortEarly))break}if(!n.issues||!r.abortEarly)for(const a in i)_l(i,a)&&!(a in this.entries)&&(n.value[a]=i[a])}else ve(this,"type",n,r);return n}}}function Be(e,t){return{kind:"schema",type:"nullish",reference:Be,expects:`(${e.expects} | null | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return Z(this)},"~run"(n,r){return(n.value===null||n.value===void 0)&&(this.default!==void 0&&(n.value=Dt(this,n,r)),n.value===null||n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function Lt(e){return{kind:"schema",type:"number",reference:Lt,expects:"number",async:!1,message:e,get"~standard"(){return Z(this)},"~run"(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:ve(this,"type",t,n),t}}}function Rt(e,t){return{kind:"schema",type:"optional",reference:Rt,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return Z(this)},"~run"(n,r){return n.value===void 0&&(this.default!==void 0&&(n.value=Dt(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function re(e){return{kind:"schema",type:"string",reference:re,expects:"string",async:!1,message:e,get"~standard"(){return Z(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:ve(this,"type",t,n),t}}}function uo(){return{kind:"schema",type:"unknown",reference:uo,expects:"unknown",async:!1,get"~standard"(){return Z(this)},"~run"(e){return e.typed=!0,e}}}function Ht(e,t,n){const r=e["~run"]({value:t},io(n));if(r.issues)throw new bl(r.issues);return r.value}function co(...e){return{...e[0],pipe:e,get"~standard"(){return Z(this)},"~run"(t,n){for(const r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}function lo(e){return Qe(W({TelegramWebviewProxy:W({postEvent:Vt()})}),e)}function po(){try{return window.self!==window.top}catch{return!0}}var yl=Object.defineProperty,gl=(e,t,n)=>t in e?yl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ft=(e,t,n)=>gl(e,typeof t!="symbol"?t+"":t,n);function vl(e){return t=>t instanceof e}function fo(e,t){t||(t=[]);class n extends Error{constructor(...s){const i=typeof t=="function"?t(...s):typeof t=="string"?[t]:t||[];super(...i),this.name=e}}return Object.defineProperty(n,"name",{value:e}),[n,vl(n)]}const[mo,wl]=fo("CancelledError","Promise was canceled"),[ho,El]=fo("TimeoutError",(e,t)=>[`Timeout reached: ${e}ms`,{cause:t}]),_o=Symbol("Resolved");function bo(e){return Array.isArray(e)&&e[0]===_o}function Sl(e){return[_o,e]}function yo(e,t){return e.reject=t.reject,e.abort=t.abort,e}let Je=class no extends Promise{constructor(t,n){let r,s;super((i,a)=>{let u,c;typeof t=="function"?(u=t,c=n):c=t;const l=[],p=f=>(...L)=>{const ne=f(...L);return l.forEach(to=>to()),ne},d=new AbortController,{signal:h}=d;s=f=>{!h.aborted&&d.abort(f)};const m=()=>h.reason,T=f=>{const L=()=>{f(m())};h.addEventListener("abort",L,!0);const ne=()=>{h.removeEventListener("abort",L,!0)};return l.push(ne),ne},Te=p(f=>{i(f),s(Sl(f))});r=p(f=>{a(f),s(f)}),c||(c={});const{abortSignal:B,rejectOnAbort:fe=!0}=c;if(B)if(B.aborted){const{reason:f}=B;if(fe)return r(f);s(f)}else{const f=()=>{s(B.reason)};B.addEventListener("abort",f),l.push(()=>{B.removeEventListener("abort",f)})}fe&&T(a);const{timeout:A}=c;if(A){const f=setTimeout(()=>{s(new ho(A))},A);l.push(()=>{clearTimeout(f)})}const C=()=>h.aborted,V=()=>bo(m()),F=()=>{const f=m();return bo(f)?f[1]:void 0};try{const f=u&&u(Te,r,{abortReason:m,abortSignal:h,isAborted:C,isResolved:V,onAborted:T,onResolved:L=>T(()=>{V()&&L(F())}),resolved:F,throwIfAborted(){if(C())throw m()}});f instanceof Promise&&f.catch(r)}catch(f){r(f)}}),Ft(this,"abort"),Ft(this,"reject"),this.abort=s,this.reject=r}static fn(t,n){return new no(async(r,s,i)=>{try{r(await t(i))}catch(a){s(a)}},n)}static resolve(t){return this.fn(()=>t)}static reject(t){return new no((n,r)=>{r(t)})}cancel(){this.abort(new mo)}catch(t){return this.then(void 0,t)}finally(t){return yo(super.finally(t),this)}then(t,n){return yo(super.then(t,n),this)}};function go(e,t){return e.resolve=t.resolve,e}let $l=class ro extends Je{constructor(t,n){let r,s;typeof t=="function"?(r=t,s=n):s=t;let i;super((a,u,c)=>{i=a,r&&r(a,u,c)},s),Ft(this,"resolve"),this.resolve=i}static fn(t,n){return new ro((r,s,i)=>{try{Promise.resolve(t(i)).then(r,s)}catch(a){s(a)}},n)}static resolve(t){return this.fn(()=>t)}static reject(t){return new ro((n,r)=>{r(t)})}catch(t){return this.then(void 0,t)}finally(t){return go(super.finally(t),this)}then(t,n){return go(super.then(t,n),this)}};function Al(e){return e.replace(/_[a-z]/g,t=>t[1].toUpperCase())}function Cl(e){return Object.entries(e).reduce((t,[n,r])=>(t[Al(n)]=r,t),{})}function Wt(e){const t=Cl(e);for(const n in t){const r=t[n];r&&typeof r=="object"&&!(r instanceof Date)&&(t[n]=Array.isArray(r)?r.map(Wt):Wt(r))}return t}function vo(e){return`tapps/${e}`}function wo(e,t){sessionStorage.setItem(vo(e),JSON.stringify(t))}function kl(e){const t=sessionStorage.getItem(vo(e));try{return t?JSON.parse(t):void 0}catch{}}function Ml(...e){const t=e.flat(1);return[t.push.bind(t),()=>{t.forEach(n=>{n()})}]}function Pl(e,t){t||(t={});const{textColor:n,bgColor:r,shouldLog:s}=t,i=s===void 0?!0:s,a=typeof i=="boolean"?()=>i:i;function u(c,l,...p){if(l||a()){const d="font-weight:bold;padding:0 5px;border-radius:5px";console[c](`%c${Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,timeZone:"UTC"}).format(new Date)}%c / %c${e}`,`${d};background-color: lightblue;color:black`,"",`${d};${n?`color:${n};`:""}${r?`background-color:${r}`:""}`,...p)}}return[u.bind(void 0,"log"),u.bind(void 0,"error")]}function Eo(e){return{lang:(e==null?void 0:e.lang)??void 0,message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??void 0,abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??void 0}}function Tl(e,t){var n;return(n=void 0)==null?void 0:n.get(t)}function Bl(e){var t,n;const r=typeof e;return r==="string"?`"${e}"`:r==="number"||r==="bigint"||r==="boolean"?`${e}`:r==="object"||r==="function"?(e&&((n=(t=Object.getPrototypeOf(e))==null?void 0:t.constructor)==null?void 0:n.name))??"null":r}function j(e,t,n,r,s){const i=s&&"input"in s?s.input:n.value,a=(s==null?void 0:s.expected)??e.expects??null,u=(s==null?void 0:s.received)??Bl(i),c={kind:e.kind,type:e.type,input:i,expected:a,received:u,message:`Invalid ${t}: ${a?`Expected ${a} but r`:"R"}eceived ${u}`,requirement:e.requirement,path:s==null?void 0:s.path,issues:s==null?void 0:s.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},l=e.kind==="schema",p=(s==null?void 0:s.message)??e.message??Tl(e.reference,c.lang)??(l?(c.lang,void 0):null)??r.message??(c.lang,void 0);p&&(c.message=typeof p=="function"?p(c):p),l&&(n.typed=!1),n.issues?n.issues.push(c):n.issues=[c]}function R(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},Eo())}}}function So(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}function Ol(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}var ql=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function $o(e,t){return{kind:"validation",type:"check",reference:$o,async:!1,expects:null,requirement:e,message:t,"~run"(n,r){return n.typed&&!this.requirement(n.value)&&j(this,"input",n,r),n}}}function Ao(e){return{kind:"validation",type:"integer",reference:Ao,async:!1,expects:null,requirement:Number.isInteger,message:e,"~run"(t,n){return t.typed&&!this.requirement(t.value)&&j(this,"integer",t,n),t}}}function oe(e){return{kind:"transformation",type:"transform",reference:oe,async:!1,operation:e,"~run"(t){return t.value=this.operation(t.value),t}}}function Co(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function Il(e,t){return!e["~run"]({value:t},{abortEarly:!0}).issues}function Oe(e){return{kind:"schema",type:"boolean",reference:Oe,expects:"boolean",async:!1,message:e,get"~standard"(){return R(this)},"~run"(t,n){return typeof t.value=="boolean"?t.typed=!0:j(this,"type",t,n),t}}}function ko(e){return{kind:"schema",type:"date",reference:ko,expects:"Date",async:!1,message:e,get"~standard"(){return R(this)},"~run"(t,n){return t.value instanceof Date?isNaN(t.value)?j(this,"type",t,n,{received:'"Invalid Date"'}):t.typed=!0:j(this,"type",t,n),t}}}function Mo(e,t){return{kind:"schema",type:"instance",reference:Mo,expects:e.name,async:!1,class:e,message:t,get"~standard"(){return R(this)},"~run"(n,r){return n.value instanceof this.class?n.typed=!0:j(this,"type",n,r),n}}}function Ut(e){return{kind:"schema",type:"lazy",reference:Ut,expects:"unknown",async:!1,getter:e,get"~standard"(){return R(this)},"~run"(t,n){return this.getter(t.value)["~run"](t,n)}}}function we(e,t){return{kind:"schema",type:"loose_object",reference:we,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return R(this)},"~run"(n,r){var s;const i=n.value;if(i&&typeof i=="object"){n.typed=!0,n.value={};for(const a in this.entries){const u=this.entries[a];if(a in i||(u.type==="exact_optional"||u.type==="optional"||u.type==="nullish")&&u.default!==void 0){const c=a in i?i[a]:Co(u),l=u["~run"]({value:c},r);if(l.issues){const p={type:"object",origin:"value",input:i,key:a,value:c};for(const d of l.issues)d.path?d.path.unshift(p):d.path=[p],(s=n.issues)==null||s.push(d);if(n.issues||(n.issues=l.issues),r.abortEarly){n.typed=!1;break}}l.typed||(n.typed=!1),n.value[a]=l.value}else if(u.type!=="exact_optional"&&u.type!=="optional"&&u.type!=="nullish"&&(j(this,"key",n,r,{input:void 0,expected:`"${a}"`,path:[{type:"object",origin:"key",input:i,key:a,value:i[a]}]}),r.abortEarly))break}if(!n.issues||!r.abortEarly)for(const a in i)So(i,a)&&!(a in this.entries)&&(n.value[a]=i[a])}else j(this,"type",n,r);return n}}}function Ke(e){return{kind:"schema",type:"number",reference:Ke,expects:"number",async:!1,message:e,get"~standard"(){return R(this)},"~run"(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:j(this,"type",t,n),t}}}function w(e,t){return{kind:"schema",type:"optional",reference:w,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return R(this)},"~run"(n,r){return n.value===void 0&&(this.default!==void 0&&(n.value=Co(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function Po(e,t,n){return{kind:"schema",type:"record",reference:Po,expects:"Object",async:!1,key:e,value:t,message:n,get"~standard"(){return R(this)},"~run"(r,s){var i,a;const u=r.value;if(u&&typeof u=="object"){r.typed=!0,r.value={};for(const c in u)if(So(u,c)){const l=u[c],p=this.key["~run"]({value:c},s);if(p.issues){const h={type:"object",origin:"key",input:u,key:c,value:l};for(const m of p.issues)m.path=[h],(i=r.issues)==null||i.push(m);if(r.issues||(r.issues=p.issues),s.abortEarly){r.typed=!1;break}}const d=this.value["~run"]({value:l},s);if(d.issues){const h={type:"object",origin:"value",input:u,key:c,value:l};for(const m of d.issues)m.path?m.path.unshift(h):m.path=[h],(a=r.issues)==null||a.push(m);if(r.issues||(r.issues=d.issues),s.abortEarly){r.typed=!1;break}}(!p.typed||!d.typed)&&(r.typed=!1),p.typed&&(r.value[p.value]=d.value)}}else j(this,"type",r,s);return r}}}function g(e){return{kind:"schema",type:"string",reference:g,expects:"string",async:!1,message:e,get"~standard"(){return R(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:j(this,"type",t,n),t}}}function To(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function zt(e,t){return{kind:"schema",type:"union",reference:zt,expects:Ol(e.map(n=>n.expects),"|"),async:!1,options:e,message:t,get"~standard"(){return R(this)},"~run"(n,r){let s,i,a;for(const u of this.options){const c=u["~run"]({value:n.value},r);if(c.typed)if(c.issues)i?i.push(c):i=[c];else{s=c;break}else a?a.push(c):a=[c]}if(s)return s;if(i){if(i.length===1)return i[0];j(this,"type",n,r,{issues:To(i)}),n.typed=!0}else{if((a==null?void 0:a.length)===1)return a[0];j(this,"type",n,r,{issues:To(a)})}return n}}}function Bo(){return{kind:"schema",type:"unknown",reference:Bo,expects:"unknown",async:!1,get"~standard"(){return R(this)},"~run"(e){return e.typed=!0,e}}}function Oo(e,t,n){const r=e["~run"]({value:t},Eo(n));if(r.issues)throw new ql(r.issues);return r.value}function se(...e){return{...e[0],pipe:e,get"~standard"(){return R(this)},"~run"(t,n){for(const r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}function jl(e){return e.replace(/_[a-z]/g,t=>t[1].toUpperCase())}function Dl(e){return Object.entries(e).reduce((t,[n,r])=>(t[jl(n)]=r,t),{})}function Gt(e){const t=Dl(e);for(const n in t){const r=t[n];r&&typeof r=="object"&&!(r instanceof Date)&&(t[n]=Array.isArray(r)?r.map(Gt):Gt(r))}return t}function Qt(e){return oe(t=>e?Gt(t):t)}function qo(e){return t=>se(e,Qt(t))}function Nl(e){return(t,n)=>Oo(se(e,Qt(n)),t)}function Jt(){return oe(JSON.parse)}function Kt(e){const t=qo(e);return n=>se(g(),Jt(),t(n))}function Vl(e){return oe(t=>{const n={};return new URLSearchParams(t).forEach((r,s)=>{const i=n[s];Array.isArray(i)?i.push(r):i===void 0?n[s]=r:n[s]=[i,r]}),Oo(e,n)})}function Io(e){return t=>se(zt([g(),Mo(URLSearchParams)]),Vl(e),Qt(t))}const jo=w(Ut(()=>Wl())),Ll=we({id:Ke(),photo_url:w(g()),type:g(),title:g(),username:w(g())}),Rl=we({added_to_attachment_menu:w(Oe()),allows_write_to_pm:w(Oe()),first_name:g(),id:Ke(),is_bot:w(Oe()),is_premium:w(Oe()),last_name:w(g()),language_code:w(g()),photo_url:w(g()),username:w(g())}),Hl=we({auth_date:se(g(),oe(e=>new Date(Number(e)*1e3)),ko()),can_send_after:w(se(g(),oe(Number),Ao())),chat:w(Ut(()=>Fl())),chat_type:w(g()),chat_instance:w(g()),hash:g(),query_id:w(g()),receiver:jo,start_param:w(g()),signature:g(),user:jo}),Fl=Kt(Ll),Wl=Kt(Rl),Ul=Io(Hl);function zl(e){return/^#[\da-f]{6}$/i.test(e)}const Do=qo(Po(g(),se(zt([g(),Ke()]),oe(e=>typeof e=="number"?`#${(e&16777215).toString(16).padStart(6,"0")}`:e),$o(zl)))),Yt=w(se(g(),oe(e=>e==="1"))),No=Kt(Do()),Gl=we({tgWebAppBotInline:Yt,tgWebAppData:w(Ul()),tgWebAppDefaultColors:w(No()),tgWebAppFullscreen:Yt,tgWebAppPlatform:g(),tgWebAppShowSettings:Yt,tgWebAppStartParam:w(g()),tgWebAppThemeParams:No(),tgWebAppVersion:g()}),Vo=Io(Gl),Ql=Nl(Vo()),Lo=we({eventType:g(),eventData:w(Bo())});function Ro(e,t){return t||(t=(n,r)=>JSON.stringify(r)),new URLSearchParams(Object.entries(e).reduce((n,[r,s])=>(Array.isArray(s)?n.push(...s.map(i=>[r,String(i)])):s!=null&&n.push([r,s instanceof Date?(s.getTime()/1e3|0).toString():typeof s=="string"||typeof s=="number"?String(s):typeof s=="boolean"?s?"1":"0":t(r,s)]),n),[])).toString()}function Jl(e){return Ro(e)}function Kl(e){return Ro(e,(t,n)=>t==="tgWebAppData"?Jl(n):JSON.stringify(n))}function Ho(e){try{return Il(Vo(),e)}catch{return!1}}function Yl(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(s){s(n)}),(r=e.get("*"))&&r.slice().map(function(s){s(t,n)})}}}function Zl(e,t){const n=Yl(),r=new Map,s=(i,a,u)=>{u||(u=!1);const c=r.get(i)||new Map;r.set(i,c);const l=c.get(a)||[];c.set(a,l);const p=l.findIndex(d=>d[1]===u);p>=0&&(n.off(i,l[p][0]),l.splice(p,1),!l.length&&c.delete(a),c.size||(r.delete(i),!r.size&&t()))};return[function(i,a,u){!r.size&&e();function c(){s(i,a,u)}function l(...h){u&&c(),i==="*"?a(h):a(...h)}n.on(i,l);const p=r.get(i)||new Map;r.set(i,p);const d=p.get(a)||[];return p.set(a,d),d.push([l,u||!1]),c},s,n.emit,function(){const i=n.all.size;n.all.clear(),r.clear(),i&&t()}]}function Zt(e,t){window.dispatchEvent(new MessageEvent("message",{data:JSON.stringify({eventType:e,eventData:t}),source:window.parent}))}let Ye=!1;const[Xt,Xl]=Pl("Bridge",{bgColor:"#9147ff",textColor:"white",shouldLog(){return Ye}}),Fo=e=>{Xt(!1,"Event received:",e)};function xl(e){e!==Ye&&(Ye=e,Ye?k("*",Fo):O("*",Fo))}const ep={clipboard_text_received:W({req_id:re(),data:Be(re())}),custom_method_invoked:W({req_id:re(),result:Rt(uo()),error:Rt(re())}),popup_closed:Be(W({button_id:Be(re(),()=>{})}),{}),viewport_changed:W({height:Lt(),width:Be(Lt(),()=>window.innerWidth),is_state_stable:Nt(),is_expanded:Nt()}),theme_changed:W({theme_params:Do()})};function Wo(e){if(e.source!==window.parent)return;let t;try{t=Ht(co(re(),Jt(),Lo),e.data)}catch{return}const{eventType:n,eventData:r}=t,s=ep[n];try{const i=s?Ht(s,r):r;tp(n,i)}catch(i){Xl(!0,[`An error occurred processing the "${n}" event from the Telegram application.`,"Please, file an issue here:","https://github.com/Telegram-Mini-Apps/telegram-apps/issues/new/choose"].join(`
`),t,i)}}const[k,O,tp,Wm]=Zl(()=>{const e=window,t={receiveEvent:Zt};e.TelegramGameProxy_receiveEvent=Zt,e.TelegramGameProxy=t,e.Telegram={WebView:t},window.addEventListener("message",Wo)},()=>{["TelegramGameProxy_receiveEvent","TelegramGameProxy","Telegram"].forEach(e=>{delete window[e]}),window.removeEventListener("message",Wo)});function np(e){return t=>t instanceof e}function Ee(e,t){t||(t=[]);class n extends Error{constructor(...s){const i=typeof t=="function"?t(...s):typeof t=="string"?[t]:t||[];super(...i),this.name=e}}return Object.defineProperty(n,"name",{value:e}),[n,np(n)]}const[Uo,rp]=Ee("MethodUnsupportedError",(e,t)=>[`Method "${e}" is unsupported in Mini Apps version ${t}`]),[zo,op]=Ee("MethodParameterUnsupportedError",(e,t,n)=>[`Parameter "${t}" of "${e}" method is unsupported in Mini Apps version ${n}`]),sp=["Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?","📖 Refer to docs for more information:","https://docs.telegram-mini-apps.com/packages/telegram-apps-bridge/environment"].join(`
`),[Go,ip]=Ee("LaunchParamsRetrieveError",sp),[Qo,ap]=Ee("InvalidLaunchParamsError",e=>[`Invalid value for launch params: ${e}`]),[Jo,up]=Ee("UnknownEnvError"),[Ko,cp]=Ee("InvokeCustomMethodError",e=>[`Server returned error: ${e}`]);function lp(e,t){t()}function pp(e,t){t||(t={});const n=t.equals||Object.is;let r=[],s=e;const i=l=>{if(!n(s,l)){const p=s;s=l,lp(c,()=>{[...r].forEach(([d,h])=>{d(l,p),h&&u(d,!0)})})}};function a(l){const p=typeof l!="object"?{once:l}:l;return{once:p.once||!1,signal:p.signal||!1}}const u=(l,p)=>{const d=a(p),h=r.findIndex(([m,T])=>m===l&&T.once===d.once&&T.signal===d.signal);h>=0&&r.splice(h,1)},c=Object.assign(function(){return dp(c),s},{destroy(){r=[]},set:i,reset(){i(e)},sub(l,p){return r.push([l,a(p)]),()=>u(l,p)},unsub:u,unsubAll(){r=r.filter(l=>l[1].signal)}});return c}const xt=[];function dp(e){xt.length&&xt[xt.length-1].add(e)}const Yo=pp("https://web.telegram.org");function en(e,t){Xt(!1,"Posting event:",t?{eventType:e,eventData:t}:{eventType:e});const n=window,r=JSON.stringify({eventType:e,eventData:t});if(po())return n.parent.postMessage(r,Yo());if(lo(n)){n.TelegramWebviewProxy.postEvent(e,JSON.stringify(t));return}if(Qe(W({external:W({notify:Vt()})}),n)){n.external.notify(r);return}throw new Jo}function tn(e,t,n){n||(n={});const{capture:r}=n,[s,i]=Ml();return new Je(a=>{(Array.isArray(t)?t:[t]).forEach(u=>{s(k(u,c=>{(!r||(Array.isArray(t)?r({event:u,payload:c}):r(c)))&&a(c)}))}),(n.postEvent||en)(e,n.params)},n).finally(i)}const Zo="launchParams";function Xo(e){return e.replace(/^[^?#]*[?#]/,"").replace(/[?#]/g,"&")}function nn(){for(const e of[()=>Xo(window.location.href),()=>{const t=performance.getEntriesByType("navigation")[0];return t&&Xo(t.name)},()=>kl(Zo)]){const t=e();if(t&&Ho(t))return wo(Zo,t),t}throw new Go}function Ze(e){const t=Ql(nn());return e?Wt(t):t}function rn(e,t){if(!e)try{return Ze(),!0}catch{return!1}return Je.fn(async n=>{if(lo(window))return!0;try{return await tn("web_app_request_theme","theme_changed",n),!0}catch{return!1}},t||{timeout:100})}function fp({launchParams:e,onEvent:t}={}){if(e){const s=typeof e=="string"||e instanceof URLSearchParams?e.toString():Kl({...e,tgWebAppData:void 0})+(e.tgWebAppData?`&tgWebAppData=${encodeURIComponent(e.tgWebAppData.toString())}`:"");if(!Ho(s))throw new Qo(s);wo("launchParams",s)}if(po()){const s=co(re(),Jt(),Lo),i=window.parent.postMessage.bind(window.parent);window.parent.postMessage=(...a)=>{const[u]=a,c=()=>{i(...a)};if(Qe(s,u)&&t){const l=Ht(s,u);t([l.eventType,l.eventData],c)}else c()};return}const n=window.TelegramWebviewProxy||{},{postEvent:r}=n;window.TelegramWebviewProxy={...n,postEvent(s,i){const a=()=>{r&&r(s,i)};t?t([s,i?JSON.parse(i):void 0],a):a()}},Xt(!1,"Environment was mocked by the mockTelegramEnv function")}function xo(){return new URLSearchParams(nn()).get("tgWebAppData")||void 0}function es(e){return({req_id:t})=>t===e}function ts(e){return e.split(".").map(Number)}function mp(e,t){const n=ts(e),r=ts(t),s=Math.max(n.length,r.length);for(let i=0;i<s;i+=1){const a=n[i]||0,u=r[i]||0;if(a!==u)return a>u?1:-1}return 0}function M(e,t){return mp(e,t)<=0}function ie(e,t,n){if(typeof n=="string"){if(e==="web_app_open_link"){if(t==="try_instant_view")return M("6.4",n);if(t==="try_browser")return M("7.6",n)}if(e==="web_app_set_header_color"&&t==="color")return M("6.9",n);if(e==="web_app_close"&&t==="return_back")return M("7.6",n);if(e==="web_app_setup_main_button"&&t==="has_shine_effect")return M("7.10",n)}switch(e){case"web_app_open_tg_link":case"web_app_open_invoice":case"web_app_setup_back_button":case"web_app_set_background_color":case"web_app_set_header_color":case"web_app_trigger_haptic_feedback":return M("6.1",t);case"web_app_open_popup":return M("6.2",t);case"web_app_close_scan_qr_popup":case"web_app_open_scan_qr_popup":case"web_app_read_text_from_clipboard":return M("6.4",t);case"web_app_switch_inline_query":return M("6.7",t);case"web_app_invoke_custom_method":case"web_app_request_write_access":case"web_app_request_phone":return M("6.9",t);case"web_app_setup_settings_button":return M("6.10",t);case"web_app_biometry_get_info":case"web_app_biometry_open_settings":case"web_app_biometry_request_access":case"web_app_biometry_request_auth":case"web_app_biometry_update_token":return M("7.2",t);case"web_app_setup_swipe_behavior":return M("7.7",t);case"web_app_share_to_story":return M("7.8",t);case"web_app_setup_secondary_button":case"web_app_set_bottom_bar_color":return M("7.10",t);case"web_app_request_safe_area":case"web_app_request_content_safe_area":case"web_app_request_fullscreen":case"web_app_exit_fullscreen":case"web_app_set_emoji_status":case"web_app_add_to_home_screen":case"web_app_check_home_screen":case"web_app_request_emoji_status_access":case"web_app_check_location":case"web_app_open_location_settings":case"web_app_request_file_download":case"web_app_request_location":case"web_app_send_prepared_message":case"web_app_start_accelerometer":case"web_app_start_device_orientation":case"web_app_start_gyroscope":case"web_app_stop_accelerometer":case"web_app_stop_device_orientation":case"web_app_stop_gyroscope":case"web_app_toggle_orientation_lock":return M("8.0",t);default:return["iframe_ready","iframe_will_reload","web_app_close","web_app_data_send","web_app_expand","web_app_open_link","web_app_ready","web_app_request_theme","web_app_request_viewport","web_app_setup_main_button","web_app_setup_closing_behavior"].includes(e)}}function ns(e,t){t||(t="strict");const n=typeof t=="function"?t:r=>{const{method:s,version:i}=r,a="param"in r?new zo(s,r.param,i):new Uo(s,i);if(t==="strict")throw a;return console.warn(a.message)};return(r,s)=>ie(r,e)?r==="web_app_set_header_color"&&Qe(W({color:ao()}),s)&&!ie(r,"color",e)?n({version:e,method:r,param:"color"}):en(r,s):n({version:e,method:r})}function hp(e,t,n,r){return tn("web_app_invoke_custom_method","custom_method_invoked",{...r||{},params:{method:e,params:t,req_id:n},capture:es(n)}).then(({result:s,error:i})=>{if(i)throw new Ko(i);return s})}function rs(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function _p(e){return e.replace(/_([a-z])/g,(t,n)=>`-${n.toLowerCase()}`)}function os(e){return`tapps/${e}`}function U(e,t){sessionStorage.setItem(os(e),JSON.stringify(t))}function z(e){const t=sessionStorage.getItem(os(e));try{return t?JSON.parse(t):void 0}catch{}}function on(...e){const t=e.flat(1);return[t.push.bind(t),()=>{t.forEach(n=>{n()})}]}function bp(e,t){t||(t={});const{textColor:n,bgColor:r,shouldLog:s}=t,i=s===void 0?!0:s,a=typeof i=="boolean"?()=>i:i;function u(c,l,...p){if(l||a()){const d="font-weight:bold;padding:0 5px;border-radius:5px";console[c](`%c${Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,timeZone:"UTC"}).format(new Date)}%c / %c${e}`,`${d};background-color: lightblue;color:black`,"",`${d};${n?`color:${n};`:""}${r?`background-color:${r}`:""}`,...p)}}return[u.bind(void 0,"log"),u.bind(void 0,"error")]}function yp(){return performance.getEntriesByType("navigation")[0]}function G(){const e=yp();return!!e&&e.type==="reload"}let Se;function gp(e,t){Se&&Se.set(e,t)||t()}function sn(e){if(Se)return e();Se=new Map;try{e()}finally{Se.forEach(t=>t()),Se=void 0}}function ss(e,t){t||(t={});const n=t.equals||Object.is;let r=[],s=e;const i=l=>{if(!n(s,l)){const p=s;s=l,gp(c,()=>{[...r].forEach(([d,h])=>{d(l,p),h&&u(d,!0)})})}};function a(l){const p=typeof l!="object"?{once:l}:l;return{once:p.once||!1,signal:p.signal||!1}}const u=(l,p)=>{const d=a(p),h=r.findIndex(([m,T])=>m===l&&T.once===d.once&&T.signal===d.signal);h>=0&&r.splice(h,1)},c=Object.assign(function(){return vp(c),s},{destroy(){r=[]},set:i,reset(){i(e)},sub(l,p){return r.push([l,a(p)]),()=>u(l,p)},unsub:u,unsubAll(){r=r.filter(l=>l[1].signal)}});return c}const qe=[];function vp(e){qe.length&&qe[qe.length-1].add(e)}function wp(e,t){let n=new Set,r;function s(){return r||(r=ss(a(),t))}function i(){s().set(a())}function a(){n.forEach(l=>{l.unsub(i,{signal:!0})});const u=new Set;let c;qe.push(u);try{c=e()}finally{qe.pop()}return u.forEach(l=>{l.sub(i,{signal:!0})}),n=u,c}return Object.assign(function(){return s()()},{destroy(){s().destroy()},sub(...u){return s().sub(...u)},unsub(...u){s().unsub(...u)},unsubAll(...u){s().unsubAll(...u)}})}function $e(e,t){return ss(e,t)}function b(e,t){return wp(e,t)}function y(e,t){const n=$e(e,t);return[n,b(n)]}let is=!1;const[an,Um]=bp("SDK",{bgColor:"forestgreen",textColor:"white",shouldLog(){return is}});function Ep(e){is=e,xl(e)}const un=$e(0),as=$e(en),[us,cn]=y({tgWebAppPlatform:"unknown",tgWebAppVersion:"0.0"}),ae=b(()=>cn().tgWebAppVersion);function cs(e){e||(e={});const{postEvent:t}=e,n=e.launchParams||Ze();us.set(n),as.set(typeof t=="function"?t:ns(n.tgWebAppVersion)),an(!1,"The package was configured. Launch params:",us())}function ln(){return un.set(un()+1),un().toString()}function me(e,t,n){return hp(e,t,ln(),{...n||{},postEvent:_})}const E=(e,t,n)=>(n||(n={}),n.postEvent||(n.postEvent=_),tn(e,t,n)),_=(e,t)=>as()(e,t);function Q(e){return b(()=>ie(e,ae()))}function Sp(e){return t=>t instanceof e}function X(e,t){t||(t=[]);class n extends Error{constructor(...s){const i=typeof t=="function"?t(...s):typeof t=="string"?[t]:t||[];super(...i),this.name=e}}return Object.defineProperty(n,"name",{value:e}),[n,Sp(n)]}function he(e){return[e]}const[Xe,$p]=X("CSSVarsBoundError","CSS variables are already bound"),[pn,Ap]=X("NotAvailableError",he),[Cp,kp]=X("InvalidEnvError",he),[Ae,Mp]=X("FunctionNotAvailableError",he),[J,Pp]=X("InvalidArgumentsError",(e,t)=>[e,{cause:t}]),[ls,Tp]=X("ConcurrentCallError",he),[ps,Bp]=X("SetEmojiStatusError",e=>[`Failed to set emoji status: ${e}`]),[dn,Op]=X("AccessDeniedError",he),[ds,qp]=X("FullscreenFailedError",he),[fs,Ip]=X("ShareMessageError",he);function fn(){return typeof window>"u"}function $(e,t,n){n||(n={});const{isSupported:r,isMounted:s,isMounting:i,component:a,supports:u}=n||{},c=`${a?`${a}.`:""}${e}()`,l=r?Array.isArray(r)||typeof r=="object"&&"any"in r?r:[r]:void 0;function p(A){if(u){const C=u[A];return ie(C[0],C[1],ae())}return!0}function d(){if(!l)return;function A(F){return typeof F=="function"?F():ie(F,ae())?void 0:`it is unsupported in Mini Apps version ${ae()}`}const C=Array.isArray(l)?l:l.any,V=C.map(A).filter(Boolean);return Array.isArray(l)?V[0]:V.length===C.length?V[V.length-1]:void 0}function h(...A){for(const C in u)if(u[C][2](...A)&&!p(C))return`option ${C} is not supported in Mini Apps version ${ae()}`}let m;if(u){m={};for(const A in u)m[A]=b(()=>p(A))}const T=b(()=>!d()),Te=b(()=>ae()!=="0.0"),B=b(()=>!s||s()),fe=b(()=>rn()&&!fn()&&Te()&&T()&&B());return Object.assign((...A)=>{const C=`Unable to call the ${c} ${a?"method":"function"}:`;if(fn()||!rn())throw new Ae(`${C} it can't be called outside Mini Apps`);if(!Te())throw new Ae(`${C} the SDK was not initialized. Use the SDK init() function`);const V=d();if(V)throw new Ae(`${C} ${V}`);const F=h(...A);if(F)throw new Ae(`${C} ${F}`);if(!B()){const f=i&&i()?"mounting. Wait for the mount completion":`unmounted. Use the ${a}.mount() method`;throw new Ae(`${C} the component is ${f}`)}return t(...A)},t,{isAvailable:fe,ifAvailable(...A){return fe()?[!0,t(...A)]:[!1]}},l?{isSupported:T}:{},m?{supports:m}:{})}function xe(e,t){return t||(t={}),(n,r,s,i)=>$(n,r,{...t,isSupported:s||t.isSupported,supports:i,component:e})}function ue(e,t,n){return xe(e,{isSupported:n,isMounted:t})}function D(e,t){return xe(e,{isSupported:t})}const et="web_app_setup_back_button",ms="back_button_pressed",tt="backButton",[hs,_s]=y(!1),[nt,bs]=y(!1),ys=Q(et),gs=ue(tt,nt,et),mn=D(tt,et),vs=gs("hide",()=>{hn(!1)}),ws=mn("mount",()=>{nt()||(hn(G()&&z(tt)||!1),nt.set(!0))});function hn(e){e!==hs()&&(_(et,{is_visible:e}),U(tt,e),hs.set(e))}const Es=mn("onClick",e=>k(ms,e)),Ss=mn("offClick",e=>{O(ms,e)}),$s=gs("show",()=>{hn(!0)});function As(){nt.set(!1)}const jp=Object.freeze(Object.defineProperty({__proto__:null,hide:vs,isMounted:bs,isSupported:ys,isVisible:_s,mount:ws,offClick:Ss,onClick:Es,show:$s,unmount:As},Symbol.toStringTag,{value:"Module"}));var Dp=Object.defineProperty,Np=(e,t,n)=>t in e?Dp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_n=(e,t,n)=>Np(e,typeof t!="symbol"?t+"":t,n);function Vp(e){return t=>t instanceof e}function Cs(e,t){t||(t=[]);class n extends Error{constructor(...s){const i=typeof t=="function"?t(...s):typeof t=="string"?[t]:t||[];super(...i),this.name=e}}return Object.defineProperty(n,"name",{value:e}),[n,Vp(n)]}const[Lp,Rp]=Cs("CancelledError","Promise was canceled"),[Hp,zm]=Cs("TimeoutError",(e,t)=>[`Timeout reached: ${e}ms`,{cause:t}]),ks=Symbol("Resolved");function Ms(e){return Array.isArray(e)&&e[0]===ks}function Fp(e){return[ks,e]}function Ps(e,t){return e.reject=t.reject,e.abort=t.abort,e}let P=class oo extends Promise{constructor(t,n){let r,s;super((i,a)=>{let u,c;typeof t=="function"?(u=t,c=n):c=t;const l=[],p=f=>(...L)=>{const ne=f(...L);return l.forEach(to=>to()),ne},d=new AbortController,{signal:h}=d;s=f=>{!h.aborted&&d.abort(f)};const m=()=>h.reason,T=f=>{const L=()=>{f(m())};h.addEventListener("abort",L,!0);const ne=()=>{h.removeEventListener("abort",L,!0)};return l.push(ne),ne},Te=p(f=>{i(f),s(Fp(f))});r=p(f=>{a(f),s(f)}),c||(c={});const{abortSignal:B,rejectOnAbort:fe=!0}=c;if(B)if(B.aborted){const{reason:f}=B;if(fe)return r(f);s(f)}else{const f=()=>{s(B.reason)};B.addEventListener("abort",f),l.push(()=>{B.removeEventListener("abort",f)})}fe&&T(a);const{timeout:A}=c;if(A){const f=setTimeout(()=>{s(new Hp(A))},A);l.push(()=>{clearTimeout(f)})}const C=()=>h.aborted,V=()=>Ms(m()),F=()=>{const f=m();return Ms(f)?f[1]:void 0};try{const f=u&&u(Te,r,{abortReason:m,abortSignal:h,isAborted:C,isResolved:V,onAborted:T,onResolved:L=>T(()=>{V()&&L(F())}),resolved:F,throwIfAborted(){if(C())throw m()}});f instanceof Promise&&f.catch(r)}catch(f){r(f)}}),_n(this,"abort"),_n(this,"reject"),this.abort=s,this.reject=r}static fn(t,n){return new oo(async(r,s,i)=>{try{r(await t(i))}catch(a){s(a)}},n)}static resolve(t){return this.fn(()=>t)}static reject(t){return new oo((n,r)=>{r(t)})}cancel(){this.abort(new Lp)}catch(t){return this.then(void 0,t)}finally(t){return Ps(super.finally(t),this)}then(t,n){return Ps(super.then(t,n),this)}};function Ts(e,t){return e.resolve=t.resolve,e}let Wp=class so extends P{constructor(t,n){let r,s;typeof t=="function"?(r=t,s=n):s=t;let i;super((a,u,c)=>{i=a,r&&r(a,u,c)},s),_n(this,"resolve"),this.resolve=i}static fn(t,n){return new so((r,s,i)=>{try{Promise.resolve(t(i)).then(r,s)}catch(a){s(a)}},n)}static resolve(t){return this.fn(()=>t)}static reject(t){return new so((n,r)=>{r(t)})}catch(t){return this.then(void 0,t)}finally(t){return Ts(super.finally(t),this)}then(t,n){return Ts(super.then(t,n),this)}};function I(e,t,n){n||(n={});const{promise:r,error:s}=n,[i,a]=r?[r,b(r)]:y(),[u,c]=s?[s,b(s)]:y();return[Object.assign((...l)=>{if(i()){const d=new ls(t);return u.set(d),P.reject(d)}sn(()=>{i.set(e(...l)),u.set(void 0)});let p;return i().catch(d=>{throw p=d,d}).finally(()=>{sn(()=>{i.set(void 0),u.set(p)})})},e),[i,a,b(()=>!!i())],[u,c]]}function Ie(e,t,n){const[r,...s]=I(t,`The ${e} component is already mounting`),[i,a]=y(!1);return[(...u)=>i()?P.resolve():r(...u).then(c=>{sn(()=>{i.set(!0),n(c)})}),...s,[i,a]]}const[bn,Bs]=y({available:!1,type:"",accessGranted:!1,accessRequested:!1,deviceId:"",tokenSaved:!1}),Os=b(()=>bn().available),qs="web_app_biometry_get_info",Is=$("requestBiometry",e=>E(qs,"biometry_info_received",e),{isSupported:qs});function yn(e){if(!Rp(e))throw e}function Ce(e){const t=e();t&&t.catch(yn).cancel()}const je="biometry",rt="web_app_biometry_request_auth",gn="biometry_info_received",js=e=>{ot(vn(e))};function Ds(){throw new pn("Biometry is not available")}function vn(e){let t=!1,n=!1,r="",s=!1,i="",a=!1;return e.available&&(t=!0,n=e.token_saved,r=e.device_id,s=e.access_requested,i=e.type,a=e.access_granted),{available:t,tokenSaved:n,deviceId:r,type:i,accessGranted:a,accessRequested:s}}const Ns=Q(rt),[Up,zp,Gp,Vs]=Ie(je,e=>{const t=G()&&z(je);return t?P.resolve(t):Is({abortSignal:e}).then(vn)},e=>{k(gn,js),ot(e)}),Ls=D(je,rt),wn=ue(je,Vs[0],rt),Rs=Ls("mount",Up),[,En,Hs]=zp,[,Fs]=Gp,[Qp,Ws]=Vs,[Jp,Kp,Yp]=I(e=>P.fn(async t=>{const n=bn();n.available||Ds();const r=await E(rt,"biometry_auth_requested",{...e,...t,params:{reason:((e||{}).reason||"").trim()}}),{token:s}=r;return typeof s=="string"&&ot({...n,token:s}),r},e),"Biometry authentication is already in progress"),Us=wn("authenticate",Jp),[,Sn,zs]=Kp,[,Gs]=Yp,Qs=Ls("openSettings",()=>{_("web_app_biometry_open_settings")}),[Zp,Xp,xp]=I(e=>P.fn(async t=>{const n=await E("web_app_biometry_request_access",gn,{...e,...t,params:{reason:(e||{}).reason||""}}).then(vn);return n.available||Ds(),ot(n),n.accessGranted},e),"Biometry access request is already in progress"),Js=wn("requestAccess",Zp),[,$n,Ks]=Xp,[,Ys]=xp;function ot(e){bn.set(e),U(je,e)}function Zs(){[Sn,$n,En].forEach(Ce),O(gn,js),Qp.set(!1)}const Xs=wn("updateToken",e=>(e||(e={}),E("web_app_biometry_update_token","biometry_token_updated",{...e,params:{token:e.token||"",reason:e.reason}}).then(t=>t.status))),ed=Object.freeze(Object.defineProperty({__proto__:null,authError:Gs,authPromise:Sn,authenticate:Us,isAuthenticating:zs,isAvailable:Os,isMounted:Ws,isMounting:Hs,isRequestingAccess:Ks,isSupported:Ns,mount:Rs,mountError:Fs,mountPromise:En,openSettings:Qs,requestAccess:Js,requestAccessError:Ys,requestAccessPromise:$n,state:Bs,unmount:Zs,updateToken:Xs},Symbol.toStringTag,{value:"Module"}));function st(e,t){return xe(e,{isMounted:t})}const ce=xe,it="closingBehavior",[xs,ei]=y(!1),[An,Cn]=y(!1),ti=st(it,Cn),td=ce(it),ni=ti("disableConfirmation",()=>{kn(!1)}),ri=ti("enableConfirmation",()=>{kn(!0)}),oi=td("mount",()=>{An()||(kn(G()&&z(it)||!1),An.set(!0))});function kn(e){e!==xs()&&(_("web_app_setup_closing_behavior",{need_confirmation:e}),U(it,e),xs.set(e))}function si(){An.set(!1)}const nd=Object.freeze(Object.defineProperty({__proto__:null,disableConfirmation:ni,enableConfirmation:ri,isConfirmationEnabled:ei,isMounted:Cn,mount:oi,unmount:si},Symbol.toStringTag,{value:"Module"}));var te;function ii(e){return{lang:(e==null?void 0:e.lang)??(te==null?void 0:te.lang),message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??(te==null?void 0:te.abortEarly),abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??(te==null?void 0:te.abortPipeEarly)}}var Mn;function rd(e){return Mn==null?void 0:Mn.get(e)}var Pn;function od(e){return Pn==null?void 0:Pn.get(e)}var Tn;function sd(e,t){var n;return(n=Tn==null?void 0:Tn.get(e))==null?void 0:n.get(t)}function id(e){var n,r;const t=typeof e;return t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t==="object"||t==="function"?(e&&((r=(n=Object.getPrototypeOf(e))==null?void 0:n.constructor)==null?void 0:r.name))??"null":t}function H(e,t,n,r,s){const i=s&&"input"in s?s.input:n.value,a=(s==null?void 0:s.expected)??e.expects??null,u=(s==null?void 0:s.received)??id(i),c={kind:e.kind,type:e.type,input:i,expected:a,received:u,message:`Invalid ${t}: ${a?`Expected ${a} but r`:"R"}eceived ${u}`,requirement:e.requirement,path:s==null?void 0:s.path,issues:s==null?void 0:s.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},l=e.kind==="schema",p=(s==null?void 0:s.message)??e.message??sd(e.reference,c.lang)??(l?od(c.lang):null)??r.message??rd(c.lang);p&&(c.message=typeof p=="function"?p(c):p),l&&(n.typed=!1),n.issues?n.issues.push(c):n.issues=[c]}function x(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},ii())}}}function ai(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}function ad(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}var Bn=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function ui(e){return{kind:"validation",type:"integer",reference:ui,async:!1,expects:null,requirement:Number.isInteger,message:e,"~run"(t,n){return t.typed&&!this.requirement(t.value)&&H(this,"integer",t,n),t}}}function On(e){return{kind:"transformation",type:"transform",reference:On,async:!1,operation:e,"~run"(t){return t.value=this.operation(t.value),t}}}function ci(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function li(e,t){return{kind:"schema",type:"array",reference:li,expects:"Array",async:!1,item:e,message:t,get"~standard"(){return x(this)},"~run"(n,r){var i;const s=n.value;if(Array.isArray(s)){n.typed=!0,n.value=[];for(let a=0;a<s.length;a++){const u=s[a],c=this.item["~run"]({value:u},r);if(c.issues){const l={type:"array",origin:"value",input:s,key:a,value:u};for(const p of c.issues)p.path?p.path.unshift(l):p.path=[l],(i=n.issues)==null||i.push(p);if(n.issues||(n.issues=c.issues),r.abortEarly){n.typed=!1;break}}c.typed||(n.typed=!1),n.value.push(c.value)}}else H(this,"type",n,r);return n}}}function qn(e){return{kind:"schema",type:"date",reference:qn,expects:"Date",async:!1,message:e,get"~standard"(){return x(this)},"~run"(t,n){return t.value instanceof Date?isNaN(t.value)?H(this,"type",t,n,{received:'"Invalid Date"'}):t.typed=!0:H(this,"type",t,n),t}}}function pi(e,t){return{kind:"schema",type:"instance",reference:pi,expects:e.name,async:!1,class:e,message:t,get"~standard"(){return x(this)},"~run"(n,r){return n.value instanceof this.class?n.typed=!0:H(this,"type",n,r),n}}}function In(e,t){return{kind:"schema",type:"loose_object",reference:In,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return x(this)},"~run"(n,r){var i;const s=n.value;if(s&&typeof s=="object"){n.typed=!0,n.value={};for(const a in this.entries){const u=this.entries[a];if(a in s||(u.type==="exact_optional"||u.type==="optional"||u.type==="nullish")&&u.default!==void 0){const c=a in s?s[a]:ci(u),l=u["~run"]({value:c},r);if(l.issues){const p={type:"object",origin:"value",input:s,key:a,value:c};for(const d of l.issues)d.path?d.path.unshift(p):d.path=[p],(i=n.issues)==null||i.push(d);if(n.issues||(n.issues=l.issues),r.abortEarly){n.typed=!1;break}}l.typed||(n.typed=!1),n.value[a]=l.value}else if(u.type!=="exact_optional"&&u.type!=="optional"&&u.type!=="nullish"&&(H(this,"key",n,r,{input:void 0,expected:`"${a}"`,path:[{type:"object",origin:"key",input:s,key:a,value:s[a]}]}),r.abortEarly))break}if(!n.issues||!r.abortEarly)for(const a in s)ai(s,a)&&!(a in this.entries)&&(n.value[a]=s[a])}else H(this,"type",n,r);return n}}}function jn(e){return{kind:"schema",type:"number",reference:jn,expects:"number",async:!1,message:e,get"~standard"(){return x(this)},"~run"(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:H(this,"type",t,n),t}}}function di(e,t){return{kind:"schema",type:"optional",reference:di,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return x(this)},"~run"(n,r){return n.value===void 0&&(this.default!==void 0&&(n.value=ci(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function fi(e,t,n){return{kind:"schema",type:"record",reference:fi,expects:"Object",async:!1,key:e,value:t,message:n,get"~standard"(){return x(this)},"~run"(r,s){var a,u;const i=r.value;if(i&&typeof i=="object"){r.typed=!0,r.value={};for(const c in i)if(ai(i,c)){const l=i[c],p=this.key["~run"]({value:c},s);if(p.issues){const h={type:"object",origin:"key",input:i,key:c,value:l};for(const m of p.issues)m.path=[h],(a=r.issues)==null||a.push(m);if(r.issues||(r.issues=p.issues),s.abortEarly){r.typed=!1;break}}const d=this.value["~run"]({value:l},s);if(d.issues){const h={type:"object",origin:"value",input:i,key:c,value:l};for(const m of d.issues)m.path?m.path.unshift(h):m.path=[h],(u=r.issues)==null||u.push(m);if(r.issues||(r.issues=d.issues),s.abortEarly){r.typed=!1;break}}(!p.typed||!d.typed)&&(r.typed=!1),p.typed&&(r.value[p.value]=d.value)}}else H(this,"type",r,s);return r}}}function K(e){return{kind:"schema",type:"string",reference:K,expects:"string",async:!1,message:e,get"~standard"(){return x(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:H(this,"type",t,n),t}}}function mi(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function hi(e,t){return{kind:"schema",type:"union",reference:hi,expects:ad(e.map(n=>n.expects),"|"),async:!1,options:e,message:t,get"~standard"(){return x(this)},"~run"(n,r){let s,i,a;for(const u of this.options){const c=u["~run"]({value:n.value},r);if(c.typed)if(c.issues)i?i.push(c):i=[c];else{s=c;break}else a?a.push(c):a=[c]}if(s)return s;if(i){if(i.length===1)return i[0];H(this,"type",n,r,{issues:mi(i)}),n.typed=!0}else{if((a==null?void 0:a.length)===1)return a[0];H(this,"type",n,r,{issues:mi(a)})}return n}}}function at(e,t,n){const r=e["~run"]({value:t},ii(n));if(r.issues)throw new Bn(r.issues);return r.value}function ut(...e){return{...e[0],pipe:e,get"~standard"(){return x(this)},"~run"(t,n){for(const r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}const _i="web_app_invoke_custom_method",De=D("cloudStorage",_i),bi=Q(_i),Dn=De("deleteItem",(e,t)=>{const n=Array.isArray(e)?e:[e];return n.length?me("deleteStorageValues",{keys:n},t).then():P.resolve()});function ud(e,t){const n=Array.isArray(e)?e:[e];return n.length?me("getStorageValues",{keys:n},t).then(r=>{const s={...n.reduce((i,a)=>(i[a]="",i),{}),...at(fi(K(),K()),r)};return typeof e=="string"?s[e]:s}):P.resolve(Array.isArray(e)?{}:"")}const yi=De("getItem",ud),Nn=De("getKeys",e=>me("getStorageKeys",{},e).then(t=>at(li(K()),t))),gi=De("setItem",(e,t,n)=>me("saveStorageValue",{key:e,value:t},n).then()),cd=De("clear",e=>Nn(e).then(Dn)),ld=Object.freeze(Object.defineProperty({__proto__:null,clear:cd,deleteItem:Dn,getItem:yi,getKeys:Nn,isSupported:bi,setItem:gi},Symbol.toStringTag,{value:"Module"})),Ne="web_app_trigger_haptic_feedback",Vn=D("hapticFeedback",Ne),vi=Q(Ne),wi=Vn("impactOccurred",e=>{_(Ne,{type:"impact",impact_style:e})}),Ei=Vn("notificationOccurred",e=>{_(Ne,{type:"notification",notification_type:e})}),Si=Vn("selectionChanged",()=>{_(Ne,{type:"selection_change"})}),pd=Object.freeze(Object.defineProperty({__proto__:null,impactOccurred:wi,isSupported:vi,notificationOccurred:Ei,selectionChanged:Si},Symbol.toStringTag,{value:"Module"})),[$i,Ai]=y(void 0);function ee(e){return b(()=>{const t=$i();return t?t[e]:void 0})}const Ln=ee("auth_date"),Rn=ee("can_send_after"),Ci=b(()=>{const e=Ln(),t=Rn();return t&&e?new Date(e.getTime()+t*1e3):void 0}),ki=ee("chat"),Mi=ee("chat_type"),Pi=ee("chat_instance"),Ti=ee("hash"),Bi=ee("query_id"),[dd,Oi]=y(),qi=ee("receiver");function Ii(){const e=Ze();$i.set(e.tgWebAppData),dd.set(xo())}const ji=ee("start_param"),Di=ee("user"),fd=Object.freeze(Object.defineProperty({__proto__:null,authDate:Ln,canSendAfter:Rn,canSendAfterDate:Ci,chat:ki,chatInstance:Pi,chatType:Mi,hash:Ti,queryId:Bi,raw:Oi,receiver:qi,restore:Ii,startParam:ji,state:Ai,user:Di},Symbol.toStringTag,{value:"Module"})),Hn="web_app_open_invoice",md=D("invoice",Hn),Ni=Q(Hn);function hd(e,t,n){let r;if(t==="url"){const{hostname:s,pathname:i}=new URL(e,window.location.href);if(s!=="t.me")throw new J(`Link has unexpected hostname: ${s}`);const a=i.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/);if(!a)throw new J('Expected to receive a link with a pathname in format "/invoice/{slug}" or "/${slug}"');[,,r]=a}else r=e,n=t;return E(Hn,"invoice_closed",{...n,params:{slug:r},capture:s=>r===s.slug}).then(s=>s.status)}const[_d,bd,yd]=I(hd,"Invoice is already opened"),Vi=md("open",_d),[,Li,Ri]=bd,[,Hi]=yd,gd=Object.freeze(Object.defineProperty({__proto__:null,isOpened:Ri,isSupported:Ni,open:Vi,openError:Hi,openPromise:Li},Symbol.toStringTag,{value:"Module"})),Ve="locationManager",Fn="web_app_check_location",Fi="web_app_open_location_settings",ct=$e({available:!1,accessGranted:!1,accessRequested:!1});function Wn(e){return b(()=>ct()[e])}const Wi=Q(Fn),Ui=Wn("available"),zi=Wn("accessGranted"),Gi=Wn("accessRequested");function vd(e){let t=!1,n,r;return e.available&&(t=!0,n=e.access_requested,r=e.access_granted),{available:t,accessGranted:r||!1,accessRequested:n||!1}}const[wd,Ed,Sd,Qi]=Ie(Ve,e=>{const t=G()&&z(Ve);return t?P.resolve(t):E("web_app_check_location","location_checked",e).then(vd)},e=>{ct.set(e),U(Ve,e)}),Ji=D(Ve,Fn),$d=ue(Ve,Qi[0],Fn),Ki=Ji("mount",wd),[,Yi,Zi]=Ed,[,Xi]=Sd,[Ad,xi]=Qi,[Cd,kd,Md]=I(e=>E("web_app_request_location","location_requested",e).then(t=>{if(!t.available)throw ct.set({...ct(),available:!1}),new pn("Location data tracking is not available");const{available:n,...r}=t;return r}),"Location request is currently in progress"),ea=$d("requestLocation",Cd),[,Un,ta]=kd,[,na]=Md,ra=Ji("openSettings",()=>{_(Fi)},Fi);function oa(){Ce(Un),Ad.set(!1)}const Pd=Object.freeze(Object.defineProperty({__proto__:null,isAccessGranted:zi,isAccessRequested:Gi,isAvailable:Ui,isMounted:xi,isMounting:Zi,isRequestingLocation:ta,isSupported:Wi,mount:Ki,mountError:Xi,mountPromise:Yi,openSettings:ra,requestLocation:ea,requestLocationError:na,requestLocationPromise:Un,unmount:oa},Symbol.toStringTag,{value:"Module"}));function zn(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=r)}return t}function sa(e){return{lang:(e==null?void 0:e.lang)??void 0,message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??void 0,abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??void 0}}function Gm(e){}function Qm(e){}function Td(e,t){var n;return(n=void 0)==null?void 0:n.get(t)}function Bd(e){var t,n;const r=typeof e;return r==="string"?`"${e}"`:r==="number"||r==="bigint"||r==="boolean"?`${e}`:r==="object"||r==="function"?(e&&((n=(t=Object.getPrototypeOf(e))==null?void 0:t.constructor)==null?void 0:n.name))??"null":r}function N(e,t,n,r,s){const i=s&&"input"in s?s.input:n.value,a=(s==null?void 0:s.expected)??e.expects??null,u=(s==null?void 0:s.received)??Bd(i),c={kind:e.kind,type:e.type,input:i,expected:a,received:u,message:`Invalid ${t}: ${a?`Expected ${a} but r`:"R"}eceived ${u}`,requirement:e.requirement,path:s==null?void 0:s.path,issues:s==null?void 0:s.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},l=e.kind==="schema",p=(s==null?void 0:s.message)??e.message??Td(e.reference,c.lang)??(l?(c.lang,void 0):null)??r.message??(c.lang,void 0);p&&(c.message=typeof p=="function"?p(c):p),l&&(n.typed=!1),n.issues?n.issues.push(c):n.issues=[c]}function Y(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},sa())}}}function ia(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}function Od(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}var qd=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function aa(e,t){return{kind:"validation",type:"check",reference:aa,async:!1,expects:null,requirement:e,message:t,"~run"(n,r){return n.typed&&!this.requirement(n.value)&&N(this,"input",n,r),n}}}function ua(e){return{kind:"validation",type:"integer",reference:ua,async:!1,expects:null,requirement:Number.isInteger,message:e,"~run"(t,n){return t.typed&&!this.requirement(t.value)&&N(this,"integer",t,n),t}}}function le(e){return{kind:"transformation",type:"transform",reference:le,async:!1,operation:e,"~run"(t){return t.value=this.operation(t.value),t}}}function ca(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function Le(e){return{kind:"schema",type:"boolean",reference:Le,expects:"boolean",async:!1,message:e,get"~standard"(){return Y(this)},"~run"(t,n){return typeof t.value=="boolean"?t.typed=!0:N(this,"type",t,n),t}}}function la(e){return{kind:"schema",type:"date",reference:la,expects:"Date",async:!1,message:e,get"~standard"(){return Y(this)},"~run"(t,n){return t.value instanceof Date?isNaN(t.value)?N(this,"type",t,n,{received:'"Invalid Date"'}):t.typed=!0:N(this,"type",t,n),t}}}function pa(e,t){return{kind:"schema",type:"instance",reference:pa,expects:e.name,async:!1,class:e,message:t,get"~standard"(){return Y(this)},"~run"(n,r){return n.value instanceof this.class?n.typed=!0:N(this,"type",n,r),n}}}function Gn(e){return{kind:"schema",type:"lazy",reference:Gn,expects:"unknown",async:!1,getter:e,get"~standard"(){return Y(this)},"~run"(t,n){return this.getter(t.value)["~run"](t,n)}}}function Re(e,t){return{kind:"schema",type:"loose_object",reference:Re,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return Y(this)},"~run"(n,r){var s;const i=n.value;if(i&&typeof i=="object"){n.typed=!0,n.value={};for(const a in this.entries){const u=this.entries[a];if(a in i||(u.type==="exact_optional"||u.type==="optional"||u.type==="nullish")&&u.default!==void 0){const c=a in i?i[a]:ca(u),l=u["~run"]({value:c},r);if(l.issues){const p={type:"object",origin:"value",input:i,key:a,value:c};for(const d of l.issues)d.path?d.path.unshift(p):d.path=[p],(s=n.issues)==null||s.push(d);if(n.issues||(n.issues=l.issues),r.abortEarly){n.typed=!1;break}}l.typed||(n.typed=!1),n.value[a]=l.value}else if(u.type!=="exact_optional"&&u.type!=="optional"&&u.type!=="nullish"&&(N(this,"key",n,r,{input:void 0,expected:`"${a}"`,path:[{type:"object",origin:"key",input:i,key:a,value:i[a]}]}),r.abortEarly))break}if(!n.issues||!r.abortEarly)for(const a in i)ia(i,a)&&!(a in this.entries)&&(n.value[a]=i[a])}else N(this,"type",n,r);return n}}}function lt(e){return{kind:"schema",type:"number",reference:lt,expects:"number",async:!1,message:e,get"~standard"(){return Y(this)},"~run"(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:N(this,"type",t,n),t}}}function S(e,t){return{kind:"schema",type:"optional",reference:S,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return Y(this)},"~run"(n,r){return n.value===void 0&&(this.default!==void 0&&(n.value=ca(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function da(e,t,n){return{kind:"schema",type:"record",reference:da,expects:"Object",async:!1,key:e,value:t,message:n,get"~standard"(){return Y(this)},"~run"(r,s){var i,a;const u=r.value;if(u&&typeof u=="object"){r.typed=!0,r.value={};for(const c in u)if(ia(u,c)){const l=u[c],p=this.key["~run"]({value:c},s);if(p.issues){const h={type:"object",origin:"key",input:u,key:c,value:l};for(const m of p.issues)m.path=[h],(i=r.issues)==null||i.push(m);if(r.issues||(r.issues=p.issues),s.abortEarly){r.typed=!1;break}}const d=this.value["~run"]({value:l},s);if(d.issues){const h={type:"object",origin:"value",input:u,key:c,value:l};for(const m of d.issues)m.path?m.path.unshift(h):m.path=[h],(a=r.issues)==null||a.push(m);if(r.issues||(r.issues=d.issues),s.abortEarly){r.typed=!1;break}}(!p.typed||!d.typed)&&(r.typed=!1),p.typed&&(r.value[p.value]=d.value)}}else N(this,"type",r,s);return r}}}function v(e){return{kind:"schema",type:"string",reference:v,expects:"string",async:!1,message:e,get"~standard"(){return Y(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:N(this,"type",t,n),t}}}function fa(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function Qn(e,t){return{kind:"schema",type:"union",reference:Qn,expects:Od(e.map(n=>n.expects),"|"),async:!1,options:e,message:t,get"~standard"(){return Y(this)},"~run"(n,r){let s,i,a;for(const u of this.options){const c=u["~run"]({value:n.value},r);if(c.typed)if(c.issues)i?i.push(c):i=[c];else{s=c;break}else a?a.push(c):a=[c]}if(s)return s;if(i){if(i.length===1)return i[0];N(this,"type",n,r,{issues:fa(i)}),n.typed=!0}else{if((a==null?void 0:a.length)===1)return a[0];N(this,"type",n,r,{issues:fa(a)})}return n}}}function ma(e,t,n){const r=e["~run"]({value:t},sa(n));if(r.issues)throw new qd(r.issues);return r.value}function pe(...e){return{...e[0],pipe:e,get"~standard"(){return Y(this)},"~run"(t,n){for(const r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}function Id(e){return e.replace(/_[a-z]/g,t=>t[1].toUpperCase())}function jd(e){return Object.entries(e).reduce((t,[n,r])=>(t[Id(n)]=r,t),{})}function Jn(e){const t=jd(e);for(const n in t){const r=t[n];r&&typeof r=="object"&&!(r instanceof Date)&&(t[n]=Array.isArray(r)?r.map(Jn):Jn(r))}return t}function Kn(e){return le(t=>e?Jn(t):t)}function ha(e){return t=>pe(e,Kn(t))}function _a(e){return(t,n)=>ma(pe(e,Kn(n)),t)}function ba(){return le(JSON.parse)}function Yn(e){const t=ha(e);return n=>pe(v(),ba(),t(n))}function Zn(e){return le(t=>{const n={};return new URLSearchParams(t).forEach((r,s)=>{const i=n[s];Array.isArray(i)?i.push(r):i===void 0?n[s]=r:n[s]=[i,r]}),ma(e,n)})}function ya(e){return t=>pe(Qn([v(),pa(URLSearchParams)]),Zn(e),Kn(t))}const ga=S(Gn(()=>Rd())),Dd=Re({id:lt(),photo_url:S(v()),type:v(),title:v(),username:S(v())}),Nd=Re({added_to_attachment_menu:S(Le()),allows_write_to_pm:S(Le()),first_name:v(),id:lt(),is_bot:S(Le()),is_premium:S(Le()),last_name:S(v()),language_code:S(v()),photo_url:S(v()),username:S(v())}),Vd=Re({auth_date:pe(v(),le(e=>new Date(Number(e)*1e3)),la()),can_send_after:S(pe(v(),le(Number),ua())),chat:S(Gn(()=>Ld())),chat_type:S(v()),chat_instance:S(v()),hash:v(),query_id:S(v()),receiver:ga,start_param:S(v()),signature:v(),user:ga}),Ld=Yn(Dd),Rd=Yn(Nd),va=ya(Vd);function _e(e){return/^#[\da-f]{6}$/i.test(e)}function wa(e){return/^#[\da-f]{3}$/i.test(e)}function Ea(e){const t=e.replace(/\s/g,"").toLowerCase();if(_e(t))return t;if(wa(t)){let r="#";for(let s=0;s<3;s+=1)r+=t[1+s].repeat(2);return r}const n=t.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/)||t.match(/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),\d{1,3}\)$/);if(!n)throw new Error(`Value "${e}" does not satisfy any of known RGB formats.`);return n.slice(1).reduce((r,s)=>r+parseInt(s,10).toString(16).padStart(2,"0"),"#")}const Hd=ha(da(v(),pe(Qn([v(),lt()]),le(e=>typeof e=="number"?`#${(e&16777215).toString(16).padStart(6,"0")}`:e),aa(_e)))),Xn=S(pe(v(),le(e=>e==="1"))),Sa=Yn(Hd()),Fd=Re({tgWebAppBotInline:Xn,tgWebAppData:S(va()),tgWebAppDefaultColors:S(Sa()),tgWebAppFullscreen:Xn,tgWebAppPlatform:v(),tgWebAppShowSettings:Xn,tgWebAppStartParam:S(v()),tgWebAppThemeParams:Sa(),tgWebAppVersion:v()}),Wd=ya(Fd),Ud=_a(va()),zd=_a(Wd());function xn(e,t){return t||(t=(n,r)=>JSON.stringify(r)),new URLSearchParams(Object.entries(e).reduce((n,[r,s])=>(Array.isArray(s)?n.push(...s.map(i=>[r,String(i)])):s!=null&&n.push([r,s instanceof Date?(s.getTime()/1e3|0).toString():typeof s=="string"||typeof s=="number"?String(s):typeof s=="boolean"?s?"1":"0":t(r,s)]),n),[])).toString()}function $a(e){return xn(e)}function Gd(e){return xn(e,(t,n)=>t==="tgWebAppData"?$a(n):JSON.stringify(n))}function er(e){const t=Ea(e);return Math.sqrt([.299,.587,.114].reduce((n,r,s)=>{const i=parseInt(t.slice(1+s*2,1+(s+1)*2),16);return n+i*i*r},0))<120}const[tr,Aa]=y(!1),[ke,Ca]=y({});function q(e){return b(()=>ke()[e])}const ka=q("accent_text_color"),He=q("bg_color"),pt=q("button_color"),nr=q("button_text_color"),rr=q("bottom_bar_bg_color"),Ma=q("destructive_text_color"),Pa=q("header_bg_color"),Ta=q("hint_color"),Ba=b(()=>{const e=He();return!e||er(e)}),Oa=q("link_color"),Fe=q("secondary_bg_color"),qa=q("section_bg_color"),Ia=q("section_header_text_color"),ja=q("section_separator_color"),Da=q("subtitle_text_color"),Na=q("text_color");function be(e){return b(()=>dt()[e])}const We=$e({hasShineEffect:!1,isEnabled:!0,isLoaderVisible:!1,isVisible:!1,text:"Continue"}),dt=b(()=>{const e=We();return{...e,backgroundColor:e.backgroundColor||pt()||"#2481cc",textColor:e.textColor||nr()||"#ffffff"}}),[or,sr]=y(!1),Va=be("backgroundColor"),La=be("hasShineEffect"),Ra=be("isEnabled"),Ha=be("isLoaderVisible"),Fa=be("isVisible"),Wa=be("text"),Ua=be("textColor"),Qd="web_app_setup_main_button",za="main_button_pressed",ft="mainButton",ir=ce(ft),Jd=st(ft,sr),Ga=ir("mount",()=>{if(!or()){const e=G()&&z(ft);e&&We.set(e),or.set(!0)}}),Qa=ir("onClick",e=>k(za,e)),Ja=ir("offClick",e=>{O(za,e)}),Ka=Jd("setParams",e=>{We.set({...We(),...zn(e)}),U(ft,We());const t=dt();t.text&&_(Qd,{color:t.backgroundColor,has_shine_effect:t.hasShineEffect,is_active:t.isEnabled,is_progress_visible:t.isLoaderVisible,is_visible:t.isVisible,text:t.text,text_color:t.textColor})});function Ya(){or.set(!1)}const Kd=Object.freeze(Object.defineProperty({__proto__:null,backgroundColor:Va,hasShineEffect:La,isEnabled:Ra,isLoaderVisible:Ha,isMounted:sr,isVisible:Fa,mount:Ga,offClick:Ja,onClick:Qa,setParams:Ka,state:dt,text:Wa,textColor:Ua,unmount:Ya},Symbol.toStringTag,{value:"Module"}));function ar(e,t){document.documentElement.style.setProperty(e,t)}function ur(e){document.documentElement.style.removeProperty(e)}const Ue="themeParams",Za="theme_changed",Yd=ce(Ue),Xa=({theme_params:e})=>{ke.set(e),U(Ue,e)},[Zd,Xd,xd,xa]=Ie(Ue,e=>{const t=G()&&z(Ue);return t?P.resolve(t):E("web_app_request_theme","theme_changed",e).then(n=>n.theme_params)},e=>{k(Za,Xa),ke.set(e)}),eu=st(Ue,xa[0])("bindCssVars",e=>{if(tr())throw new Xe;e||(e=r=>`--tg-theme-${_p(r)}`);function t(r){Object.entries(ke()).forEach(([s,i])=>{i&&r(s,i)})}function n(){t((r,s)=>{ar(e(r),s)})}return n(),ke.sub(n),tr.set(!0),()=>{t(ur),ke.unsub(n),tr.set(!1)}}),cr=Yd("mount",Zd),[,lr,tu]=Xd,[,nu]=xd,[ef,ru]=xa;function ou(){Ce(lr),O(Za,Xa),ef.set(!1)}function su(e){return b(()=>{const t=e();return _e(t)?t:t==="bg_color"?He():Fe()})}const[mt,iu]=y("bg_color"),ht=su(mt),[_t,au]=y("bottom_bar_bg_color"),bt=b(()=>{const e=_t();return _e(e)?e:e==="bottom_bar_bg_color"?rr()||Fe():e==="secondary_bg_color"?Fe():He()}),[yt,uu]=y("bg_color"),pr=su(yt),[dr,cu]=y(!1),lu=b(()=>{const e=ht();return e?er(e):!1}),[fr,pu]=y(!0),mr=b(()=>({backgroundColor:mt(),bottomBarColor:_t(),headerColor:yt(),isActive:fr()})),hr="web_app_set_background_color",_r="web_app_set_bottom_bar_color",gt="web_app_set_header_color",du="visibility_changed",Me="miniApp",br={any:[hr,_r,gt]},fu=b(()=>br.any.some(e=>ie(e,ae()))),mu=e=>{fr.set(e.is_visible),wt()},[tf,nf,rf,hu]=Ie(Me,e=>cr(e).then(()=>G()&&z(Me)||void 0),e=>{gr.ifAvailable(e?e.backgroundColor:"bg_color"),vr.ifAvailable(e?e.bottomBarColor:"bottom_bar_bg_color"),wr.ifAvailable(e?e.headerColor:"bg_color"),fr.set(e?e.isActive:!0),k(du,mu)}),_u=ce(Me),of=D(Me,br),vt=ue(Me,hu[0],br),bu=vt("bindCssVars",e=>{if(dr())throw new Xe;const[t,n]=on();function r(s,i){function a(){ar(s,i()||null)}a(),t(i.sub(a),ur.bind(null,s))}return e||(e=s=>`--tg-${rs(s)}`),r(e("bgColor"),ht),r(e("bottomBarColor"),bt),r(e("headerColor"),pr),t(()=>{dr.set(!1)}),dr.set(!0),n}),yu=_u("close",e=>{_("web_app_close",{return_back:e})}),gu=of("mount",tf),[,yr,vu]=nf,[,wu]=rf,[sf,Eu]=hu,Su=_u("ready",()=>{_("web_app_ready")});function wt(){U(Me,mr())}const gr=vt("setBackgroundColor",e=>{e!==mt()&&(_(hr,{color:e}),mt.set(e),wt())},hr),vr=vt("setBottomBarColor",e=>{e!==_t()&&(_(_r,{color:e}),_t.set(e),wt())},_r),wr=vt("setHeaderColor",e=>{e!==yt()&&(_(gt,_e(e)?{color:e}:{color_key:e}),yt.set(e),wt())},gt,{rgb:[gt,"color",_e]});function $u(){Ce(yr),O(du,mu),sf.set(!1)}const af=Object.freeze(Object.defineProperty({__proto__:null,backgroundColor:iu,backgroundColorRGB:ht,bindCssVars:bu,bottomBarColor:au,bottomBarColorRGB:bt,close:yu,headerColor:uu,headerColorRGB:pr,isActive:pu,isCssVarsBound:cu,isDark:lu,isMounted:Eu,isMounting:vu,isSupported:fu,mount:gu,mountError:wu,mountPromise:yr,ready:Su,setBackgroundColor:gr,setBottomBarColor:vr,setHeaderColor:wr,state:mr,unmount:$u},Symbol.toStringTag,{value:"Module"}));function uf(e){const t=e.message.trim(),n=(e.title||"").trim(),r=e.buttons||[];if(n.length>64)throw new J(`Invalid title: ${n}`);if(!t||t.length>256)throw new J(`Invalid message: ${t}`);if(r.length>3)throw new J(`Invalid buttons count: ${r.length}`);return{title:n,message:t,buttons:r.length?r.map((s,i)=>{const a=s.id||"";if(a.length>64)throw new J(`Button with index ${i} has invalid id: ${a}`);if(!s.type||s.type==="default"||s.type==="destructive"){const u=s.text.trim();if(!u||u.length>64)throw new J(`Button with index ${i} has invalid text: ${u}`);return{type:s.type,text:u,id:a}}return{type:s.type,id:a}}):[{type:"close",id:""}]}}const Er="web_app_open_popup",Au=D("popup",Er),Cu=Q(Er),[ku,Sr,Mu]=I(e=>E(Er,"popup_closed",{...e,params:uf(e)}).then(({button_id:t})=>t===void 0?null:t),"A popup is already opened"),Pu=Au("open",ku),Tu=Sr[1],Bu=Sr[2],Ou=Mu[1],qu=Au("show",ku),[,Iu,ju]=Sr,[,Du]=Mu,cf=Object.freeze(Object.defineProperty({__proto__:null,isOpened:Bu,isShown:ju,isSupported:Cu,open:Pu,openError:Ou,openPromise:Tu,show:qu,showError:Du,showPromise:Iu},Symbol.toStringTag,{value:"Module"})),Nu="web_app_close_scan_qr_popup",$r="web_app_open_scan_qr_popup",lf="scan_qr_popup_closed",pf="qr_text_received",Vu=D("qrScanner",$r),Lu=Vu("close",()=>{_(Nu),Ce(Ar)}),Ru=Q($r);function df(e){e||(e={});const{onCaptured:t,text:n,capture:r}=e,[,s]=on(k(lf,()=>{i.resolve()}),k(pf,a=>{t?t(a.data):(!r||r(a.data))&&(i.resolve(a.data),_(Nu))})),i=new Wp(e);return(e.postEvent||_)($r,{text:n}),P.resolve(i).catch(yn).finally(s)}const[ff,mf,hf]=I(df,"The QR Scanner is already opened"),Hu=Vu("open",ff),[,Ar,Fu]=mf,[,Wu]=hf,_f=Object.freeze(Object.defineProperty({__proto__:null,close:Lu,isOpened:Fu,isSupported:Ru,open:Hu,openError:Wu,openPromise:Ar},Symbol.toStringTag,{value:"Module"}));function de(e){return b(()=>Et()[e])}const ze=$e({hasShineEffect:!1,isEnabled:!0,isLoaderVisible:!1,isVisible:!1,position:"left",text:"Cancel"}),Et=b(()=>{const e=ze();return{...e,backgroundColor:e.backgroundColor||bt()||"#000000",textColor:e.textColor||pt()||"#2481cc"}}),[Cr,kr]=y(!1),Uu=de("backgroundColor"),zu=de("hasShineEffect"),Gu=de("isEnabled"),Qu=de("isLoaderVisible"),Ju=de("isVisible"),Ku=de("position"),Yu=de("text"),Zu=de("textColor"),St="web_app_setup_secondary_button",Xu="secondary_button_pressed",$t="secondaryButton",Mr=D($t,St),bf=ue($t,kr,St),xu=Q(St),ec=Mr("mount",()=>{if(!Cr()){const e=G()&&z($t);e&&ze.set(e),Cr.set(!0)}}),tc=Mr("onClick",e=>k(Xu,e)),nc=Mr("offClick",e=>{O(Xu,e)}),rc=bf("setParams",e=>{ze.set({...ze(),...zn(e)}),U($t,ze());const t=Et();t.text&&_(St,{color:t.backgroundColor,has_shine_effect:t.hasShineEffect,is_active:t.isEnabled,is_progress_visible:t.isLoaderVisible,is_visible:t.isVisible,position:t.position,text:t.text,text_color:t.textColor})});function oc(){Cr.set(!1)}const yf=Object.freeze(Object.defineProperty({__proto__:null,backgroundColor:Uu,hasShineEffect:zu,isEnabled:Gu,isLoaderVisible:Qu,isMounted:kr,isSupported:xu,isVisible:Ju,mount:ec,offClick:nc,onClick:tc,position:Ku,setParams:rc,state:Et,text:Yu,textColor:Zu,unmount:oc},Symbol.toStringTag,{value:"Module"})),At="web_app_setup_settings_button",sc="settings_button_pressed",Ct="settingsButton",[ic,ac]=y(!1),[kt,uc]=y(!1),cc=Q(At),Pr=D(Ct,At),lc=ue(Ct,kt,At),pc=lc("hide",()=>{Tr(!1)}),dc=Pr("mount",()=>{kt()||(Tr(G()&&z(Ct)||!1),kt.set(!0))});function Tr(e){e!==ic()&&(_(At,{is_visible:e}),U(Ct,e),ic.set(e))}const fc=Pr("onClick",e=>k(sc,e)),mc=Pr("offClick",e=>{O(sc,e)}),hc=lc("show",()=>{Tr(!0)});function _c(){kt.set(!1)}const gf=Object.freeze(Object.defineProperty({__proto__:null,hide:pc,isMounted:uc,isSupported:cc,isVisible:ac,mount:dc,offClick:mc,onClick:fc,show:hc,unmount:_c},Symbol.toStringTag,{value:"Module"})),Mt="web_app_setup_swipe_behavior",Pt="swipeBehavior",[Ge,bc]=y(!1),yc=Q(Mt),[Br,gc]=y(!0),vf=D(Pt,Mt),vc=ue(Pt,Ge,Mt),wc=vc("disableVertical",()=>{Or(!1)}),Ec=vc("enableVertical",()=>{Or(!0)}),Sc=vf("mount",()=>{Ge()||(Or(G()&&z(Pt)||!1,!0),Ge.set(!0))});function Or(e,t){(e!==Br()||t)&&(_(Mt,{allow_vertical_swipe:e}),U(Pt,e),Br.set(e))}function $c(){Ge.set(!1)}const wf=Object.freeze(Object.defineProperty({__proto__:null,_isMounted:Ge,_isVerticalEnabled:Br,disableVertical:wc,enableVertical:Ec,isMounted:bc,isSupported:yc,isVerticalEnabled:gc,mount:Sc,unmount:$c},Symbol.toStringTag,{value:"Module"})),Ef=Object.freeze(Object.defineProperty({__proto__:null,accentTextColor:ka,backgroundColor:He,bindCssVars:eu,bottomBarBgColor:rr,buttonColor:pt,buttonTextColor:nr,destructiveTextColor:Ma,headerBackgroundColor:Pa,hintColor:Ta,isCssVarsBound:Aa,isDark:Ba,isMounted:ru,isMounting:tu,linkColor:Oa,mount:cr,mountError:nu,mountPromise:lr,secondaryBackgroundColor:Fe,sectionBackgroundColor:qa,sectionHeaderTextColor:Ia,sectionSeparatorColor:ja,state:Ca,subtitleTextColor:Da,textColor:Na,unmount:ou},Symbol.toStringTag,{value:"Module"})),ye="viewport",qr="fullscreen_changed",Ir="safe_area_changed",jr="content_safe_area_changed",Dr="viewport_changed",Ac=ce(ye),Cc={left:0,top:0,bottom:0,right:0};function Nr(e){return Math.max(e,0)}const[Vr,Lr]=y({contentSafeAreaInsets:Cc,height:0,isExpanded:!1,isFullscreen:!1,safeAreaInsets:Cc,stableHeight:0,width:0});function ge(e){return b(()=>Lr()[e])}const Tt=ge("height"),Bt=ge("stableHeight"),Rr=ge("width"),kc=ge("isExpanded"),Mc=b(()=>Tt()===Bt());function Pe(e){const{height:t,stableHeight:n,width:r}=e;Vr.set({...Vr(),...zn({...e,height:t?Nr(t):void 0,width:r?Nr(r):void 0,stableHeight:n?Nr(n):void 0})}),U(ye,Vr())}function Sf(){return z(ye)}function Ot(e){return b(()=>qt()[e])}const qt=ge("contentSafeAreaInsets"),Hr=Ot("bottom"),Fr=Ot("left"),Wr=Ot("right"),Ur=Ot("top");function It(e){return b(()=>jt()[e])}const jt=ge("safeAreaInsets"),zr=It("bottom"),Gr=It("left"),Qr=It("right"),Jr=It("top"),Pc="web_app_request_safe_area",Tc=D(ye,Pc),Kr=Tc("requestContentSafeAreaInsets",e=>E("web_app_request_content_safe_area",jr,e));function Bc(e){return E("web_app_request_viewport",Dr,e)}const Yr=Tc("requestSafeAreaInsets",e=>E(Pc,Ir,e)),Oc=e=>{const{height:t}=e;Pe({isExpanded:e.is_expanded,height:t,width:e.width,stableHeight:e.is_state_stable?t:void 0})},qc=e=>{Pe({isFullscreen:e.is_fullscreen})},Ic=e=>{Pe({safeAreaInsets:e})},jc=e=>{Pe({contentSafeAreaInsets:e})},[$f,Af,Cf,kf]=Ie(ye,e=>{const t=G()&&Sf();return t?P.resolve(t):P.fn(async n=>{const r=await P.all([Yr.isAvailable()?Yr(n):jt(),Kr.isAvailable()?Kr(n):qt()]),s=cn(),i={contentSafeAreaInsets:r[1],isFullscreen:!!s.tgWebAppFullscreen,safeAreaInsets:r[0]};if(["macos","tdesktop","unigram","webk","weba","web"].includes(s.tgWebAppPlatform)){const a=window;return{...i,height:a.innerHeight,isExpanded:!0,stableHeight:a.innerHeight,width:a.innerWidth}}return Bc(n).then(a=>({...i,height:a.height,isExpanded:a.is_expanded,stableHeight:a.is_state_stable?a.height:0,width:a.width}))},e)},e=>{k(Dr,Oc),k(qr,qc),k(Ir,Ic),k(jr,jc),Pe(e)}),Dc=Ac("mount",$f),[,Zr,Nc]=Af,[,Vc]=Cf,[Xr,Lc]=kf;function Rc(){Ce(Zr),O(Dr,Oc),O(qr,qc),O(Ir,Ic),O(jr,jc),Xr.set(!1)}const Mf=st(ye,Xr),[xr,Hc]=y(!1),Fc=Mf("bindCssVars",e=>{if(xr())throw new Xe;e||(e=n=>`--tg-viewport-${rs(n)}`);const t=[["height",Tt],["stableHeight",Bt],["width",Rr],["safeAreaInsetTop",Jr],["safeAreaInsetBottom",zr],["safeAreaInsetLeft",Gr],["safeAreaInsetRight",Qr],["contentSafeAreaInsetTop",Ur],["contentSafeAreaInsetBottom",Hr],["contentSafeAreaInsetLeft",Fr],["contentSafeAreaInsetRight",Wr]].reduce((n,[r,s])=>{const i=e(r);if(i){const a=()=>{ar(i,`${s()}px`)};n.push([a,s.sub(a),i])}return n},[]);return t.forEach(n=>{n[0]()}),xr.set(!0),()=>{t.forEach(n=>{n[1](),ur(n[2])}),xr.set(!1)}}),Wc=Ac("expand",()=>{_("web_app_expand")}),Uc="web_app_request_fullscreen",Pf=ue(ye,Xr,Uc),eo=ge("isFullscreen"),[Tf,zc]=y(),[Bf,Gc]=y();function Qc(e,t){return Pf(e,I(n=>E(t?Uc:"web_app_exit_fullscreen",[qr,"fullscreen_failed"],n).then(r=>{if("error"in r&&r.error!=="ALREADY_FULLSCREEN")throw new ds(r.error);const s="is_fullscreen"in r?r.is_fullscreen:!0;s!==eo()&&Pe({isFullscreen:s})}),"Fullscreen mode change is already being requested",{promise:Tf,error:Bf})[0])}const Jc=Qc("requestFullscreen",!0),Kc=Qc("exitFullscreen"),Of=Object.freeze(Object.defineProperty({__proto__:null,bindCssVars:Fc,changeFullscreenError:Gc,changeFullscreenPromise:zc,contentSafeAreaInsetBottom:Hr,contentSafeAreaInsetLeft:Fr,contentSafeAreaInsetRight:Wr,contentSafeAreaInsetTop:Ur,contentSafeAreaInsets:qt,exitFullscreen:Kc,expand:Wc,height:Tt,isCssVarsBound:Hc,isExpanded:kc,isFullscreen:eo,isMounted:Lc,isMounting:Nc,isStable:Mc,mount:Dc,mountError:Vc,mountPromise:Zr,requestFullscreen:Jc,safeAreaInsetBottom:zr,safeAreaInsetLeft:Gr,safeAreaInsetRight:Qr,safeAreaInsetTop:Jr,safeAreaInsets:jt,stableHeight:Bt,state:Lr,unmount:Rc,width:Rr},Symbol.toStringTag,{value:"Module"})),Yc="web_app_request_emoji_status_access",[qf,If,jf]=I(e=>E(Yc,"emoji_status_access_requested",e).then(t=>t.status),"Emoji status access request is already in progress"),Df=$("requestEmojiStatusAccess",qf,{isSupported:Yc}),[,Nf,Vf]=If,[,Lf]=jf,Zc="web_app_set_emoji_status",[Rf,Hf,Ff]=I((e,t)=>E(Zc,["emoji_status_set","emoji_status_failed"],{params:{custom_emoji_id:e,duration:(t||{}).duration},...t}).then(n=>{if(n&&"error"in n)throw new ps(n.error)}),"Emoji status set request is currently in progress"),Wf=$("setEmojiStatus",Rf,{isSupported:Zc}),[,Uf,zf]=Hf,[,Gf]=Ff,Qf={isSupported:"web_app_add_to_home_screen"},Xc="home_screen_failed",Jf=$("onAddToHomeScreenFailed",(e,t)=>k(Xc,e,t),{isSupported:"web_app_add_to_home_screen"}),Kf=$("offAddToHomeScreenFailed",e=>{O(Xc,e)},Qf),xc={isSupported:"web_app_add_to_home_screen"},el="home_screen_added",Yf=$("onAddedToHomeScreen",(e,t)=>k(el,e,t),xc),Zf=$("offAddedToHomeScreen",e=>{O(el,e)},xc),tl="web_app_add_to_home_screen",Xf=$("addToHomeScreen",()=>{_(tl)},{isSupported:tl}),nl="web_app_check_home_screen",[xf,em,tm]=I(e=>E(nl,"home_screen_checked",e).then(t=>t.status||"unknown"),"Check home screen status request is currently in progress"),nm=$("checkHomeScreenStatus",xf,{isSupported:nl}),[,rm,om]=em,[,sm]=tm,im=ce()("openLink",(e,t)=>{if(typeof e=="string")try{e=new URL(e)}catch(n){throw new J(`"${e.toString()}" is invalid URL`,n)}t||(t={}),_("web_app_open_link",{url:e.toString(),try_browser:t.tryBrowser,try_instant_view:t.tryInstantView})}),rl="web_app_open_tg_link",ol=ce()("openTelegramLink",e=>{const t=e.toString();if(!t.match(/^https:\/\/t.me\/.+/))throw new J(`"${t}" is invalid URL`);if(!ie(rl,ae())){window.location.href=t;return}e=new URL(e),_(rl,{path_full:e.pathname+e.search})}),am=ce()("shareURL",(e,t)=>{ol("https://t.me/share/url?"+new URLSearchParams({url:e,text:t||""}).toString().replace(/\+/g,"%20"))});function um(e,t){return new P({abortSignal:t,timeout:e}).catch(()=>{})}const sl="web_app_request_phone",[cm,lm,pm]=I(e=>E(sl,"phone_requested",e).then(t=>t.status),"Phone access request is currently in progress"),il=$("requestPhoneAccess",cm,{isSupported:sl}),[,dm,fm]=lm,[,mm]=pm;async function al(e){const t=await me("getRequestedContact",{},{...e,timeout:(e||{}).timeout||5e3});return at(ut(hi([K(),pi(URLSearchParams)]),Zn(In({contact:ut(K(),ba(),In({user_id:jn(),phone_number:K(),first_name:K(),last_name:di(K())})),auth_date:ut(K(),On(n=>new Date(Number(n)*1e3)),qn()),hash:K()}))),t)}const[hm,_m,bm]=I(e=>new P(async(t,n,r)=>{try{return t(await al(r))}catch(a){if(a instanceof Bn)throw a}if(await il(r)!=="sent")throw new dn("User denied access");let i=50;for(;!r.isAborted();){try{return t(await al(r))}catch(a){if(a instanceof Bn)throw a}await um(i),i+=50}},e),"Contact is already being requested"),ym=$("requestContact",hm,{isSupported:"web_app_request_phone"}),[,gm,vm]=_m,[,wm]=bm,ul="web_app_request_write_access",[Em,Sm,$m]=I(e=>E(ul,"write_access_requested",e).then(t=>t.status),"Write access request is currently in progress"),Am=$("requestWriteAccess",Em,{isSupported:ul}),[,Cm,km]=Sm,[,Mm]=$m;function Pm(e){const t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy")}finally{document.body.removeChild(t)}}async function Tm(e){try{const{clipboard:t}=navigator;if(t)return await t.writeText(e)}catch{}Pm(e)}const cl="web_app_request_file_download",Bm=$("downloadFile",(e,t,n)=>E(cl,"file_download_requested",{...n,params:{url:e,file_name:t}}).then(r=>{if(r.status!=="downloading")throw new dn("User denied the action")}),{isSupported:cl}),Om=$("getCurrentTime",e=>me("getCurrentTime",{},e).then(t=>at(ut(jn(),ui(),On(n=>new Date(n*1e3)),qn()),t)),{isSupported:"web_app_invoke_custom_method"}),ll="web_app_read_text_from_clipboard",qm=$("readTextFromClipboard",e=>{const t=ln();return E(ll,"clipboard_text_received",{...e,params:{req_id:t},capture:es(t)}).then(({data:n=null})=>n)},{isSupported:ll}),pl="web_app_data_send",Im=$("sendData",e=>{const{size:t}=new Blob([e]);if(!t||t>4096)throw new J(t?"Maximum size of data to send is 4096 bytes":"Attempted to send empty data");_(pl,{data:e})},{isSupported:pl}),dl="web_app_send_prepared_message",jm=$("shareMessage",(e,t)=>E(dl,["prepared_message_failed","prepared_message_sent"],{...t,params:{id:e}}).then(n=>{if(n&&"error"in n)throw new fs(n.error)}),{isSupported:dl}),fl="web_app_share_to_story",Dm=$("shareStory",(e,t)=>{t||(t={}),_(fl,{text:t.text,media_url:e,widget_link:t.widgetLink})},{isSupported:fl}),Nm="web_app_switch_inline_query",Vm=$("switchInlineQuery",(e,t)=>{_(Nm,{query:e,chat_types:t||[]})},{isSupported(){return cn().tgWebAppBotInline?void 0:"The application must be launched in the inline mode"}});function Lm(e){try{return[!0,e()]}catch(t){return[!1,t]}}function Rm(e){cs(e);const[t,n]=on(k("reload_iframe",()=>{an(!1,"Received a request to reload the page"),_("iframe_will_reload"),window.location.reload()})),{acceptCustomStyles:r=!0}=e||{};if(r){const s=document.createElement("style");s.id="telegram-custom-styles",document.head.appendChild(s),t(k("set_custom_style",i=>{s.innerHTML=i}),()=>{document.head.removeChild(s)})}return _("iframe_ready",{reload_supported:!0}),an(!1,"The package was initialized"),n}return o.AbortablePromise=Je,o.AccessDeniedError=dn,o.CSSVarsBoundError=Xe,o.CancelledError=mo,o.ConcurrentCallError=ls,o.FullscreenFailedError=ds,o.FunctionUnavailableError=Ae,o.InvalidArgumentsError=J,o.InvalidEnvError=Cp,o.InvalidLaunchParamsError=Qo,o.InvokeCustomMethodError=Ko,o.LaunchParamsRetrieveError=Go,o.ManualPromise=$l,o.MethodParameterUnsupportedError=zo,o.MethodUnsupportedError=Uo,o.NotAvailableError=pn,o.SetEmojiStatusError=ps,o.ShareMessageError=fs,o.TimeoutError=ho,o.UnknownEnvError=Jo,o.addToHomeScreen=Xf,o.authenticateBiometry=Us,o.backButton=jp,o.bindMiniAppCssVars=bu,o.bindThemeParamsCssVars=eu,o.bindViewportCssVars=Fc,o.biometry=ed,o.biometryAuthError=Gs,o.biometryAuthPromise=Sn,o.biometryMountError=Fs,o.biometryState=Bs,o.changeFullscreenError=Gc,o.changeFullscreenPromise=zc,o.checkHomeScreenStatus=nm,o.checkHomeScreenStatusError=sm,o.checkHomeScreenStatusPromise=rm,o.closeMiniApp=yu,o.closeQrScanner=Lu,o.closingBehavior=nd,o.cloudStorage=ld,o.configure=cs,o.copyTextToClipboard=Tm,o.createPostEvent=ns,o.createRequestId=ln,o.deleteCloudStorageItem=Dn,o.disableClosingConfirmation=ni,o.disableVerticalSwipes=wc,o.downloadFile=Bm,o.emitEvent=Zt,o.enableClosingConfirmation=ri,o.enableVerticalSwipes=Ec,o.exitFullscreen=Kc,o.expandViewport=Wc,o.getCloudStorageItem=yi,o.getCloudStorageKeys=Nn,o.getCurrentTime=Om,o.hapticFeedback=pd,o.hapticFeedbackImpactOccurred=wi,o.hapticFeedbackNotificationOccurred=Ei,o.hapticFeedbackSelectionChanged=Si,o.hideBackButton=vs,o.hideSettingsButton=pc,o.ignoreCanceled=yn,o.init=Rm,o.initData=fd,o.initDataAuthDate=Ln,o.initDataCanSendAfter=Rn,o.initDataCanSendAfterDate=Ci,o.initDataChat=ki,o.initDataChatInstance=Pi,o.initDataChatType=Mi,o.initDataHash=Ti,o.initDataQueryId=Bi,o.initDataRaw=Oi,o.initDataReceiver=qi,o.initDataStartParam=ji,o.initDataState=Ai,o.initDataUser=Di,o.invoice=gd,o.invokeCustomMethod=me,o.isAccessDeniedError=Op,o.isAuthenticatingBiometry=zs,o.isBackButtonMounted=bs,o.isBackButtonSupported=ys,o.isBackButtonVisible=_s,o.isBiometryAvailable=Os,o.isBiometryMounted=Ws,o.isBiometryMounting=Hs,o.isBiometrySupported=Ns,o.isCSSVarsBoundError=$p,o.isCancelledError=wl,o.isCheckingHomeScreenStatus=om,o.isClosingBehaviorMounted=Cn,o.isClosingConfirmationEnabled=ei,o.isCloudStorageSupported=bi,o.isColorDark=er,o.isConcurrentCallError=Tp,o.isFullscreen=eo,o.isFullscreenFailedError=qp,o.isFunctionNotAvailableError=Mp,o.isHapticFeedbackSupported=vi,o.isInvalidArguments=Pp,o.isInvalidEnvError=kp,o.isInvalidLaunchParamsError=ap,o.isInvoiceOpened=Ri,o.isInvoiceSupported=Ni,o.isInvokeCustomMethodError=cp,o.isLaunchParamsRetrieveError=ip,o.isLocationManagerAccessGranted=zi,o.isLocationManagerAccessRequested=Gi,o.isLocationManagerAvailable=Ui,o.isLocationManagerMounted=xi,o.isLocationManagerMounting=Zi,o.isLocationManagerSupported=Wi,o.isMainButtonEnabled=Ra,o.isMainButtonLoaderVisible=Ha,o.isMainButtonMounted=sr,o.isMainButtonVisible=Fa,o.isMethodMethodParameterUnsupportedError=op,o.isMethodUnsupportedError=rp,o.isMiniAppActive=pu,o.isMiniAppCssVarsBound=cu,o.isMiniAppDark=lu,o.isMiniAppMounted=Eu,o.isMiniAppMounting=vu,o.isMiniAppSupported=fu,o.isNotAvailableError=Ap,o.isPopupOpened=Bu,o.isPopupShown=ju,o.isPopupSupported=Cu,o.isQrScannerOpened=Fu,o.isQrScannerSupported=Ru,o.isRGB=_e,o.isRGBShort=wa,o.isRequestingBiometryAccess=Ks,o.isRequestingContact=vm,o.isRequestingEmojiStatusAccess=Vf,o.isRequestingLocation=ta,o.isRequestingPhoneAccess=fm,o.isRequestingWriteAccess=km,o.isSSR=fn,o.isSecondaryButtonEnabled=Gu,o.isSecondaryButtonLoaderVisible=Qu,o.isSecondaryButtonMounted=kr,o.isSecondaryButtonSupported=xu,o.isSecondaryButtonVisible=Ju,o.isSetEmojiStatusError=Bp,o.isSettingEmojiStatus=zf,o.isSettingsButtonMounted=uc,o.isSettingsButtonSupported=cc,o.isSettingsButtonVisible=ac,o.isShareMessageError=Ip,o.isSwipeBehaviorMounted=bc,o.isSwipeBehaviorSupported=yc,o.isTMA=rn,o.isThemeParamsCssVarsBound=Aa,o.isThemeParamsDark=Ba,o.isThemeParamsMounted=ru,o.isThemeParamsMounting=tu,o.isTimeoutError=El,o.isUnknownEnvError=up,o.isVerticalSwipesEnabled=gc,o.isViewportCssVarsBound=Hc,o.isViewportExpanded=kc,o.isViewportMounted=Lc,o.isViewportMounting=Nc,o.isViewportStable=Mc,o.locationManager=Pd,o.locationManagerMountError=Xi,o.locationManagerMountPromise=Yi,o.mainButton=Kd,o.mainButtonBackgroundColor=Va,o.mainButtonHasShineEffect=La,o.mainButtonState=dt,o.mainButtonText=Wa,o.mainButtonTextColor=Ua,o.miniApp=af,o.miniAppBackgroundColor=iu,o.miniAppBackgroundColorRGB=ht,o.miniAppBottomBarColor=au,o.miniAppBottomBarColorRGB=bt,o.miniAppHeaderColor=uu,o.miniAppHeaderColorRGB=pr,o.miniAppMountError=wu,o.miniAppMountPromise=yr,o.miniAppReady=Su,o.miniAppState=mr,o.mockTelegramEnv=fp,o.mountBackButton=ws,o.mountBiometry=Rs,o.mountBiometryPromise=En,o.mountClosingBehavior=oi,o.mountLocationManager=Ki,o.mountMainButton=Ga,o.mountMiniApp=gu,o.mountSecondaryButton=ec,o.mountSettingsButton=dc,o.mountSwipeBehavior=Sc,o.mountThemeParams=cr,o.mountViewport=Dc,o.off=O,o.offAddToHomeScreenFailed=Kf,o.offAddedToHomeScreen=Zf,o.offBackButtonClick=Ss,o.offMainButtonClick=Ja,o.offSecondaryButtonClick=nc,o.offSettingsButtonClick=mc,o.on=k,o.onAddToHomeScreenFailed=Jf,o.onAddedToHomeScreen=Yf,o.onBackButtonClick=Es,o.onMainButtonClick=Qa,o.onSecondaryButtonClick=tc,o.onSettingsButtonClick=fc,o.openBiometrySettings=Qs,o.openInvoice=Vi,o.openInvoiceError=Hi,o.openInvoicePromise=Li,o.openLink=im,o.openLocationManagerSettings=ra,o.openPopup=Pu,o.openPopupError=Ou,o.openPopupPromise=Tu,o.openQrScanner=Hu,o.openQrScannerError=Wu,o.openQrScannerPromise=Ar,o.openTelegramLink=ol,o.parseInitDataQuery=Ud,o.parseLaunchParamsQuery=zd,o.popup=cf,o.postEvent=_,o.qrScanner=_f,o.readTextFromClipboard=qm,o.request=E,o.requestBiometry=Is,o.requestBiometryAccess=Js,o.requestBiometryAccessError=Ys,o.requestBiometryAccessPromise=$n,o.requestContact=ym,o.requestContactError=wm,o.requestContactPromise=gm,o.requestContentSafeAreaInsets=Kr,o.requestEmojiStatusAccess=Df,o.requestEmojiStatusAccessError=Lf,o.requestEmojiStatusAccessPromise=Nf,o.requestFullscreen=Jc,o.requestLocation=ea,o.requestLocationError=na,o.requestLocationPromise=Un,o.requestPhoneAccess=il,o.requestPhoneAccessError=mm,o.requestPhoneAccessPromise=dm,o.requestSafeAreaInsets=Yr,o.requestViewport=Bc,o.requestWriteAccess=Am,o.requestWriteAccessError=Mm,o.requestWriteAccessPromise=Cm,o.restoreInitData=Ii,o.retrieveLaunchParams=Ze,o.retrieveRawInitData=xo,o.retrieveRawLaunchParams=nn,o.safeCall=Lm,o.secondaryButton=yf,o.secondaryButtonBackgroundColor=Uu,o.secondaryButtonHasShineEffect=zu,o.secondaryButtonPosition=Ku,o.secondaryButtonState=Et,o.secondaryButtonText=Yu,o.secondaryButtonTextColor=Zu,o.sendData=Im,o.serializeInitDataQuery=$a,o.serializeLaunchParamsQuery=Gd,o.serializeToQuery=xn,o.setCloudStorageItem=gi,o.setDebug=Ep,o.setEmojiStatus=Wf,o.setEmojiStatusError=Gf,o.setEmojiStatusPromise=Uf,o.setMainButtonParams=Ka,o.setMiniAppBackgroundColor=gr,o.setMiniAppBottomBarColor=vr,o.setMiniAppHeaderColor=wr,o.setSecondaryButtonParams=rc,o.settingsButton=gf,o.shareMessage=jm,o.shareStory=Dm,o.shareURL=am,o.showBackButton=$s,o.showPopup=qu,o.showPopupError=Du,o.showPopupPromise=Iu,o.showSettingsButton=hc,o.supports=ie,o.swipeBehavior=wf,o.switchInlineQuery=Vm,o.targetOrigin=Yo,o.themeParams=Ef,o.themeParamsAccentTextColor=ka,o.themeParamsBackgroundColor=He,o.themeParamsBottomBarBgColor=rr,o.themeParamsButtonColor=pt,o.themeParamsButtonTextColor=nr,o.themeParamsDestructiveTextColor=Ma,o.themeParamsHeaderBackgroundColor=Pa,o.themeParamsHintColor=Ta,o.themeParamsLinkColor=Oa,o.themeParamsMountError=nu,o.themeParamsMountPromise=lr,o.themeParamsSecondaryBackgroundColor=Fe,o.themeParamsSectionBackgroundColor=qa,o.themeParamsSectionHeaderTextColor=Ia,o.themeParamsSectionSeparatorColor=ja,o.themeParamsState=Ca,o.themeParamsSubtitleTextColor=Da,o.themeParamsTextColor=Na,o.toRGB=Ea,o.transformQueryUsing=Zn,o.unmountBackButton=As,o.unmountBiometry=Zs,o.unmountClosingBehavior=si,o.unmountLocationManager=oa,o.unmountMainButton=Ya,o.unmountMiniApp=$u,o.unmountSecondaryButton=oc,o.unmountSettingsButton=_c,o.unmountSwipeBehavior=$c,o.unmountThemeParams=ou,o.unmountViewport=Rc,o.updateBiometryToken=Xs,o.viewport=Of,o.viewportContentSafeAreaInsetBottom=Hr,o.viewportContentSafeAreaInsetLeft=Fr,o.viewportContentSafeAreaInsetRight=Wr,o.viewportContentSafeAreaInsetTop=Ur,o.viewportContentSafeAreaInsets=qt,o.viewportHeight=Tt,o.viewportMountError=Vc,o.viewportMountPromise=Zr,o.viewportSafeAreaInsetBottom=zr,o.viewportSafeAreaInsetLeft=Gr,o.viewportSafeAreaInsetRight=Qr,o.viewportSafeAreaInsetTop=Jr,o.viewportSafeAreaInsets=jt,o.viewportStableHeight=Bt,o.viewportState=Lr,o.viewportWidth=Rr,o.wrapSafe=$,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),o}({});
//# sourceMappingURL=index.iife.js.map
