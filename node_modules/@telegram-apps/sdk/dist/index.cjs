"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});function Vo(e){return{lang:(e==null?void 0:e.lang)??void 0,message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??void 0,abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??void 0}}function fl(e,t){var n;return(n=void 0)==null?void 0:n.get(t)}function ml(e){var t,n;const r=typeof e;return r==="string"?`"${e}"`:r==="number"||r==="bigint"||r==="boolean"?`${e}`:r==="object"||r==="function"?(e&&((n=(t=Object.getPrototypeOf(e))==null?void 0:t.constructor)==null?void 0:n.name))??"null":r}function Se(e,t,n,r,o){const s=o&&"input"in o?o.input:n.value,i=(o==null?void 0:o.expected)??e.expects??null,a=(o==null?void 0:o.received)??ml(s),u={kind:e.kind,type:e.type,input:s,expected:i,received:a,message:`Invalid ${t}: ${i?`Expected ${i} but r`:"R"}eceived ${a}`,requirement:e.requirement,path:o==null?void 0:o.path,issues:o==null?void 0:o.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},c=e.kind==="schema",l=(o==null?void 0:o.message)??e.message??fl(e.reference,u.lang)??(c?(u.lang,void 0):null)??r.message??(u.lang,void 0);l&&(u.message=typeof l=="function"?l(u):l),c&&(n.typed=!1),n.issues?n.issues.push(u):n.issues=[u]}function K(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},Vo())}}}function hl(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}var _l=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function Sn(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function tt(e,t){return!e["~run"]({value:t},{abortEarly:!0}).issues}function Lo(){return{kind:"schema",type:"any",reference:Lo,expects:"any",async:!1,get"~standard"(){return K(this)},"~run"(e){return e.typed=!0,e}}}function Qt(e){return{kind:"schema",type:"boolean",reference:Qt,expects:"boolean",async:!1,message:e,get"~standard"(){return K(this)},"~run"(t,n){return typeof t.value=="boolean"?t.typed=!0:Se(this,"type",t,n),t}}}function $n(e){return{kind:"schema",type:"function",reference:$n,expects:"Function",async:!1,message:e,get"~standard"(){return K(this)},"~run"(t,n){return typeof t.value=="function"?t.typed=!0:Se(this,"type",t,n),t}}}function F(e,t){return{kind:"schema",type:"loose_object",reference:F,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return K(this)},"~run"(n,r){var o;const s=n.value;if(s&&typeof s=="object"){n.typed=!0,n.value={};for(const i in this.entries){const a=this.entries[i];if(i in s||(a.type==="exact_optional"||a.type==="optional"||a.type==="nullish")&&a.default!==void 0){const u=i in s?s[i]:Sn(a),c=a["~run"]({value:u},r);if(c.issues){const l={type:"object",origin:"value",input:s,key:i,value:u};for(const p of c.issues)p.path?p.path.unshift(l):p.path=[l],(o=n.issues)==null||o.push(p);if(n.issues||(n.issues=c.issues),r.abortEarly){n.typed=!1;break}}c.typed||(n.typed=!1),n.value[i]=c.value}else if(a.type!=="exact_optional"&&a.type!=="optional"&&a.type!=="nullish"&&(Se(this,"key",n,r,{input:void 0,expected:`"${i}"`,path:[{type:"object",origin:"key",input:s,key:i,value:s[i]}]}),r.abortEarly))break}if(!n.issues||!r.abortEarly)for(const i in s)hl(s,i)&&!(i in this.entries)&&(n.value[i]=s[i])}else Se(this,"type",n,r);return n}}}function Te(e,t){return{kind:"schema",type:"nullish",reference:Te,expects:`(${e.expects} | null | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return K(this)},"~run"(n,r){return(n.value===null||n.value===void 0)&&(this.default!==void 0&&(n.value=Sn(this,n,r)),n.value===null||n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function Jt(e){return{kind:"schema",type:"number",reference:Jt,expects:"number",async:!1,message:e,get"~standard"(){return K(this)},"~run"(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:Se(this,"type",t,n),t}}}function Kt(e,t){return{kind:"schema",type:"optional",reference:Kt,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return K(this)},"~run"(n,r){return n.value===void 0&&(this.default!==void 0&&(n.value=Sn(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function re(e){return{kind:"schema",type:"string",reference:re,expects:"string",async:!1,message:e,get"~standard"(){return K(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:Se(this,"type",t,n),t}}}function Ro(){return{kind:"schema",type:"unknown",reference:Ro,expects:"unknown",async:!1,get"~standard"(){return K(this)},"~run"(e){return e.typed=!0,e}}}function Yt(e,t,n){const r=e["~run"]({value:t},Vo(n));if(r.issues)throw new _l(r.issues);return r.value}function Ho(...e){return{...e[0],pipe:e,get"~standard"(){return K(this)},"~run"(t,n){for(const r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}function Fo(e){return tt(F({TelegramWebviewProxy:F({postEvent:$n()})}),e)}function Wo(){try{return window.self!==window.top}catch{return!0}}var bl=Object.defineProperty,yl=(e,t,n)=>t in e?bl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zt=(e,t,n)=>yl(e,typeof t!="symbol"?t+"":t,n);function gl(e){return t=>t instanceof e}function Uo(e,t){t||(t=[]);class n extends Error{constructor(...o){const s=typeof t=="function"?t(...o):typeof t=="string"?[t]:t||[];super(...s),this.name=e}}return Object.defineProperty(n,"name",{value:e}),[n,gl(n)]}const[zo,vl]=Uo("CancelledError","Promise was canceled"),[Go,El]=Uo("TimeoutError",(e,t)=>[`Timeout reached: ${e}ms`,{cause:t}]),Qo=Symbol("Resolved");function so(e){return Array.isArray(e)&&e[0]===Qo}function wl(e){return[Qo,e]}function io(e,t){return e.reject=t.reject,e.abort=t.abort,e}let nt=class Xt extends Promise{constructor(t,n){let r,o;super((s,i)=>{let a,u;typeof t=="function"?(a=t,u=n):u=t;const c=[],l=d=>(...I)=>{const ee=d(...I);return c.forEach(It=>It()),ee},p=new AbortController,{signal:m}=p;o=d=>{!m.aborted&&p.abort(d)};const f=()=>m.reason,k=d=>{const I=()=>{d(f())};m.addEventListener("abort",I,!0);const ee=()=>{m.removeEventListener("abort",I,!0)};return c.push(ee),ee},ge=l(d=>{s(d),o(wl(d))});r=l(d=>{i(d),o(d)}),u||(u={});const{abortSignal:M,rejectOnAbort:ne=!0}=u;if(M)if(M.aborted){const{reason:d}=M;if(ne)return r(d);o(d)}else{const d=()=>{o(M.reason)};M.addEventListener("abort",d),c.push(()=>{M.removeEventListener("abort",d)})}ne&&k(i);const{timeout:S}=u;if(S){const d=setTimeout(()=>{o(new Go(S))},S);c.push(()=>{clearTimeout(d)})}const $=()=>m.aborted,q=()=>so(f()),V=()=>{const d=f();return so(d)?d[1]:void 0};try{const d=a&&a(ge,r,{abortReason:f,abortSignal:m,isAborted:$,isResolved:q,onAborted:k,onResolved:I=>k(()=>{q()&&I(V())}),resolved:V,throwIfAborted(){if($())throw f()}});d instanceof Promise&&d.catch(r)}catch(d){r(d)}}),Zt(this,"abort"),Zt(this,"reject"),this.abort=o,this.reject=r}static fn(t,n){return new Xt(async(r,o,s)=>{try{r(await t(s))}catch(i){o(i)}},n)}static resolve(t){return this.fn(()=>t)}static reject(t){return new Xt((n,r)=>{r(t)})}cancel(){this.abort(new zo)}catch(t){return this.then(void 0,t)}finally(t){return io(super.finally(t),this)}then(t,n){return io(super.then(t,n),this)}};function ao(e,t){return e.resolve=t.resolve,e}let Sl=class en extends nt{constructor(t,n){let r,o;typeof t=="function"?(r=t,o=n):o=t;let s;super((i,a,u)=>{s=i,r&&r(i,a,u)},o),Zt(this,"resolve"),this.resolve=s}static fn(t,n){return new en((r,o,s)=>{try{Promise.resolve(t(s)).then(r,o)}catch(i){o(i)}},n)}static resolve(t){return this.fn(()=>t)}static reject(t){return new en((n,r)=>{r(t)})}catch(t){return this.then(void 0,t)}finally(t){return ao(super.finally(t),this)}then(t,n){return ao(super.then(t,n),this)}};function $l(e){return e.replace(/_[a-z]/g,t=>t[1].toUpperCase())}function Cl(e){return Object.entries(e).reduce((t,[n,r])=>(t[$l(n)]=r,t),{})}function tn(e){const t=Cl(e);for(const n in t){const r=t[n];r&&typeof r=="object"&&!(r instanceof Date)&&(t[n]=Array.isArray(r)?r.map(tn):tn(r))}return t}function Jo(e){return`tapps/${e}`}function Ko(e,t){sessionStorage.setItem(Jo(e),JSON.stringify(t))}function Al(e){const t=sessionStorage.getItem(Jo(e));try{return t?JSON.parse(t):void 0}catch{}}function kl(...e){const t=e.flat(1);return[t.push.bind(t),()=>{t.forEach(n=>{n()})}]}function Ml(e,t){t||(t={});const{textColor:n,bgColor:r,shouldLog:o}=t,s=o===void 0?!0:o,i=typeof s=="boolean"?()=>s:s;function a(u,c,...l){if(c||i()){const p="font-weight:bold;padding:0 5px;border-radius:5px";console[u](`%c${Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,timeZone:"UTC"}).format(new Date)}%c / %c${e}`,`${p};background-color: lightblue;color:black`,"",`${p};${n?`color:${n};`:""}${r?`background-color:${r}`:""}`,...l)}}return[a.bind(void 0,"log"),a.bind(void 0,"error")]}function Yo(e){return{lang:(e==null?void 0:e.lang)??void 0,message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??void 0,abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??void 0}}function Pl(e,t){var n;return(n=void 0)==null?void 0:n.get(t)}function Tl(e){var t,n;const r=typeof e;return r==="string"?`"${e}"`:r==="number"||r==="bigint"||r==="boolean"?`${e}`:r==="object"||r==="function"?(e&&((n=(t=Object.getPrototypeOf(e))==null?void 0:t.constructor)==null?void 0:n.name))??"null":r}function j(e,t,n,r,o){const s=o&&"input"in o?o.input:n.value,i=(o==null?void 0:o.expected)??e.expects??null,a=(o==null?void 0:o.received)??Tl(s),u={kind:e.kind,type:e.type,input:s,expected:i,received:a,message:`Invalid ${t}: ${i?`Expected ${i} but r`:"R"}eceived ${a}`,requirement:e.requirement,path:o==null?void 0:o.path,issues:o==null?void 0:o.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},c=e.kind==="schema",l=(o==null?void 0:o.message)??e.message??Pl(e.reference,u.lang)??(c?(u.lang,void 0):null)??r.message??(u.lang,void 0);l&&(u.message=typeof l=="function"?l(u):l),c&&(n.typed=!1),n.issues?n.issues.push(u):n.issues=[u]}function R(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},Yo())}}}function Zo(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}function xl(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}var Bl=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function Xo(e,t){return{kind:"validation",type:"check",reference:Xo,async:!1,expects:null,requirement:e,message:t,"~run"(n,r){return n.typed&&!this.requirement(n.value)&&j(this,"input",n,r),n}}}function es(e){return{kind:"validation",type:"integer",reference:es,async:!1,expects:null,requirement:Number.isInteger,message:e,"~run"(t,n){return t.typed&&!this.requirement(t.value)&&j(this,"integer",t,n),t}}}function se(e){return{kind:"transformation",type:"transform",reference:se,async:!1,operation:e,"~run"(t){return t.value=this.operation(t.value),t}}}function ts(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function Ol(e,t){return!e["~run"]({value:t},{abortEarly:!0}).issues}function xe(e){return{kind:"schema",type:"boolean",reference:xe,expects:"boolean",async:!1,message:e,get"~standard"(){return R(this)},"~run"(t,n){return typeof t.value=="boolean"?t.typed=!0:j(this,"type",t,n),t}}}function ns(e){return{kind:"schema",type:"date",reference:ns,expects:"Date",async:!1,message:e,get"~standard"(){return R(this)},"~run"(t,n){return t.value instanceof Date?isNaN(t.value)?j(this,"type",t,n,{received:'"Invalid Date"'}):t.typed=!0:j(this,"type",t,n),t}}}function rs(e,t){return{kind:"schema",type:"instance",reference:rs,expects:e.name,async:!1,class:e,message:t,get"~standard"(){return R(this)},"~run"(n,r){return n.value instanceof this.class?n.typed=!0:j(this,"type",n,r),n}}}function Cn(e){return{kind:"schema",type:"lazy",reference:Cn,expects:"unknown",async:!1,getter:e,get"~standard"(){return R(this)},"~run"(t,n){return this.getter(t.value)["~run"](t,n)}}}function Ce(e,t){return{kind:"schema",type:"loose_object",reference:Ce,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return R(this)},"~run"(n,r){var o;const s=n.value;if(s&&typeof s=="object"){n.typed=!0,n.value={};for(const i in this.entries){const a=this.entries[i];if(i in s||(a.type==="exact_optional"||a.type==="optional"||a.type==="nullish")&&a.default!==void 0){const u=i in s?s[i]:ts(a),c=a["~run"]({value:u},r);if(c.issues){const l={type:"object",origin:"value",input:s,key:i,value:u};for(const p of c.issues)p.path?p.path.unshift(l):p.path=[l],(o=n.issues)==null||o.push(p);if(n.issues||(n.issues=c.issues),r.abortEarly){n.typed=!1;break}}c.typed||(n.typed=!1),n.value[i]=c.value}else if(a.type!=="exact_optional"&&a.type!=="optional"&&a.type!=="nullish"&&(j(this,"key",n,r,{input:void 0,expected:`"${i}"`,path:[{type:"object",origin:"key",input:s,key:i,value:s[i]}]}),r.abortEarly))break}if(!n.issues||!r.abortEarly)for(const i in s)Zo(s,i)&&!(i in this.entries)&&(n.value[i]=s[i])}else j(this,"type",n,r);return n}}}function rt(e){return{kind:"schema",type:"number",reference:rt,expects:"number",async:!1,message:e,get"~standard"(){return R(this)},"~run"(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:j(this,"type",t,n),t}}}function v(e,t){return{kind:"schema",type:"optional",reference:v,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return R(this)},"~run"(n,r){return n.value===void 0&&(this.default!==void 0&&(n.value=ts(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function os(e,t,n){return{kind:"schema",type:"record",reference:os,expects:"Object",async:!1,key:e,value:t,message:n,get"~standard"(){return R(this)},"~run"(r,o){var s,i;const a=r.value;if(a&&typeof a=="object"){r.typed=!0,r.value={};for(const u in a)if(Zo(a,u)){const c=a[u],l=this.key["~run"]({value:u},o);if(l.issues){const m={type:"object",origin:"key",input:a,key:u,value:c};for(const f of l.issues)f.path=[m],(s=r.issues)==null||s.push(f);if(r.issues||(r.issues=l.issues),o.abortEarly){r.typed=!1;break}}const p=this.value["~run"]({value:c},o);if(p.issues){const m={type:"object",origin:"value",input:a,key:u,value:c};for(const f of p.issues)f.path?f.path.unshift(m):f.path=[m],(i=r.issues)==null||i.push(f);if(r.issues||(r.issues=p.issues),o.abortEarly){r.typed=!1;break}}(!l.typed||!p.typed)&&(r.typed=!1),l.typed&&(r.value[l.value]=p.value)}}else j(this,"type",r,o);return r}}}function y(e){return{kind:"schema",type:"string",reference:y,expects:"string",async:!1,message:e,get"~standard"(){return R(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:j(this,"type",t,n),t}}}function uo(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function An(e,t){return{kind:"schema",type:"union",reference:An,expects:xl(e.map(n=>n.expects),"|"),async:!1,options:e,message:t,get"~standard"(){return R(this)},"~run"(n,r){let o,s,i;for(const a of this.options){const u=a["~run"]({value:n.value},r);if(u.typed)if(u.issues)s?s.push(u):s=[u];else{o=u;break}else i?i.push(u):i=[u]}if(o)return o;if(s){if(s.length===1)return s[0];j(this,"type",n,r,{issues:uo(s)}),n.typed=!0}else{if((i==null?void 0:i.length)===1)return i[0];j(this,"type",n,r,{issues:uo(i)})}return n}}}function ss(){return{kind:"schema",type:"unknown",reference:ss,expects:"unknown",async:!1,get"~standard"(){return R(this)},"~run"(e){return e.typed=!0,e}}}function is(e,t,n){const r=e["~run"]({value:t},Yo(n));if(r.issues)throw new Bl(r.issues);return r.value}function ie(...e){return{...e[0],pipe:e,get"~standard"(){return R(this)},"~run"(t,n){for(const r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}function ql(e){return e.replace(/_[a-z]/g,t=>t[1].toUpperCase())}function Il(e){return Object.entries(e).reduce((t,[n,r])=>(t[ql(n)]=r,t),{})}function nn(e){const t=Il(e);for(const n in t){const r=t[n];r&&typeof r=="object"&&!(r instanceof Date)&&(t[n]=Array.isArray(r)?r.map(nn):nn(r))}return t}function kn(e){return se(t=>e?nn(t):t)}function as(e){return t=>ie(e,kn(t))}function jl(e){return(t,n)=>is(ie(e,kn(n)),t)}function Mn(){return se(JSON.parse)}function Pn(e){const t=as(e);return n=>ie(y(),Mn(),t(n))}function Dl(e){return se(t=>{const n={};return new URLSearchParams(t).forEach((r,o)=>{const s=n[o];Array.isArray(s)?s.push(r):s===void 0?n[o]=r:n[o]=[s,r]}),is(e,n)})}function us(e){return t=>ie(An([y(),rs(URLSearchParams)]),Dl(e),kn(t))}const co=v(Cn(()=>Hl())),Nl=Ce({id:rt(),photo_url:v(y()),type:y(),title:y(),username:v(y())}),Vl=Ce({added_to_attachment_menu:v(xe()),allows_write_to_pm:v(xe()),first_name:y(),id:rt(),is_bot:v(xe()),is_premium:v(xe()),last_name:v(y()),language_code:v(y()),photo_url:v(y()),username:v(y())}),Ll=Ce({auth_date:ie(y(),se(e=>new Date(Number(e)*1e3)),ns()),can_send_after:v(ie(y(),se(Number),es())),chat:v(Cn(()=>Rl())),chat_type:v(y()),chat_instance:v(y()),hash:y(),query_id:v(y()),receiver:co,start_param:v(y()),signature:y(),user:co}),Rl=Pn(Nl),Hl=Pn(Vl),Fl=us(Ll);function Wl(e){return/^#[\da-f]{6}$/i.test(e)}const cs=as(os(y(),ie(An([y(),rt()]),se(e=>typeof e=="number"?`#${(e&16777215).toString(16).padStart(6,"0")}`:e),Xo(Wl)))),jt=v(ie(y(),se(e=>e==="1"))),lo=Pn(cs()),Ul=Ce({tgWebAppBotInline:jt,tgWebAppData:v(Fl()),tgWebAppDefaultColors:v(lo()),tgWebAppFullscreen:jt,tgWebAppPlatform:y(),tgWebAppShowSettings:jt,tgWebAppStartParam:v(y()),tgWebAppThemeParams:lo(),tgWebAppVersion:y()}),ls=us(Ul),zl=jl(ls()),ps=Ce({eventType:y(),eventData:v(ss())});function ds(e,t){return t||(t=(n,r)=>JSON.stringify(r)),new URLSearchParams(Object.entries(e).reduce((n,[r,o])=>(Array.isArray(o)?n.push(...o.map(s=>[r,String(s)])):o!=null&&n.push([r,o instanceof Date?(o.getTime()/1e3|0).toString():typeof o=="string"||typeof o=="number"?String(o):typeof o=="boolean"?o?"1":"0":t(r,o)]),n),[])).toString()}function Gl(e){return ds(e)}function Ql(e){return ds(e,(t,n)=>t==="tgWebAppData"?Gl(n):JSON.stringify(n))}function fs(e){try{return Ol(ls(),e)}catch{return!1}}function Jl(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(o){o(n)}),(r=e.get("*"))&&r.slice().map(function(o){o(t,n)})}}}function Kl(e,t){const n=Jl(),r=new Map,o=(s,i,a)=>{a||(a=!1);const u=r.get(s)||new Map;r.set(s,u);const c=u.get(i)||[];u.set(i,c);const l=c.findIndex(p=>p[1]===a);l>=0&&(n.off(s,c[l][0]),c.splice(l,1),!c.length&&u.delete(i),u.size||(r.delete(s),!r.size&&t()))};return[function(s,i,a){!r.size&&e();function u(){o(s,i,a)}function c(...m){a&&u(),s==="*"?i(m):i(...m)}n.on(s,c);const l=r.get(s)||new Map;r.set(s,l);const p=l.get(i)||[];return l.set(i,p),p.push([c,a||!1]),u},o,n.emit,function(){const s=n.all.size;n.all.clear(),r.clear(),s&&t()}]}function rn(e,t){window.dispatchEvent(new MessageEvent("message",{data:JSON.stringify({eventType:e,eventData:t}),source:window.parent}))}let ze=!1;const[Tn,Yl]=Ml("Bridge",{bgColor:"#9147ff",textColor:"white",shouldLog(){return ze}}),po=e=>{Tn(!1,"Event received:",e)};function Zl(e){e!==ze&&(ze=e,ze?A("*",po):x("*",po))}const Xl={clipboard_text_received:F({req_id:re(),data:Te(re())}),custom_method_invoked:F({req_id:re(),result:Kt(Ro()),error:Kt(re())}),popup_closed:Te(F({button_id:Te(re(),()=>{})}),{}),viewport_changed:F({height:Jt(),width:Te(Jt(),()=>window.innerWidth),is_state_stable:Qt(),is_expanded:Qt()}),theme_changed:F({theme_params:cs()})};function fo(e){if(e.source!==window.parent)return;let t;try{t=Yt(Ho(re(),Mn(),ps),e.data)}catch{return}const{eventType:n,eventData:r}=t,o=Xl[n];try{const s=o?Yt(o,r):r;ep(n,s)}catch(s){Yl(!0,[`An error occurred processing the "${n}" event from the Telegram application.`,"Please, file an issue here:","https://github.com/Telegram-Mini-Apps/telegram-apps/issues/new/choose"].join(`
`),t,s)}}const[A,x,ep,Wm]=Kl(()=>{const e=window,t={receiveEvent:rn};e.TelegramGameProxy_receiveEvent=rn,e.TelegramGameProxy=t,e.Telegram={WebView:t},window.addEventListener("message",fo)},()=>{["TelegramGameProxy_receiveEvent","TelegramGameProxy","Telegram"].forEach(e=>{delete window[e]}),window.removeEventListener("message",fo)});function tp(e){return t=>t instanceof e}function Ae(e,t){t||(t=[]);class n extends Error{constructor(...o){const s=typeof t=="function"?t(...o):typeof t=="string"?[t]:t||[];super(...s),this.name=e}}return Object.defineProperty(n,"name",{value:e}),[n,tp(n)]}const[ms,np]=Ae("MethodUnsupportedError",(e,t)=>[`Method "${e}" is unsupported in Mini Apps version ${t}`]),[hs,rp]=Ae("MethodParameterUnsupportedError",(e,t,n)=>[`Parameter "${t}" of "${e}" method is unsupported in Mini Apps version ${n}`]),op=["Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?","ðŸ“– Refer to docs for more information:","https://docs.telegram-mini-apps.com/packages/telegram-apps-bridge/environment"].join(`
`),[_s,sp]=Ae("LaunchParamsRetrieveError",op),[bs,ip]=Ae("InvalidLaunchParamsError",e=>[`Invalid value for launch params: ${e}`]),[ys,ap]=Ae("UnknownEnvError"),[gs,up]=Ae("InvokeCustomMethodError",e=>[`Server returned error: ${e}`]);function cp(e,t){t()}function lp(e,t){t||(t={});const n=t.equals||Object.is;let r=[],o=e;const s=c=>{if(!n(o,c)){const l=o;o=c,cp(u,()=>{[...r].forEach(([p,m])=>{p(c,l),m&&a(p,!0)})})}};function i(c){const l=typeof c!="object"?{once:c}:c;return{once:l.once||!1,signal:l.signal||!1}}const a=(c,l)=>{const p=i(l),m=r.findIndex(([f,k])=>f===c&&k.once===p.once&&k.signal===p.signal);m>=0&&r.splice(m,1)},u=Object.assign(function(){return pp(u),o},{destroy(){r=[]},set:s,reset(){s(e)},sub(c,l){return r.push([c,i(l)]),()=>a(c,l)},unsub:a,unsubAll(){r=r.filter(c=>c[1].signal)}});return u}const Dt=[];function pp(e){Dt.length&&Dt[Dt.length-1].add(e)}const vs=lp("https://web.telegram.org");function xn(e,t){Tn(!1,"Posting event:",t?{eventType:e,eventData:t}:{eventType:e});const n=window,r=JSON.stringify({eventType:e,eventData:t});if(Wo())return n.parent.postMessage(r,vs());if(Fo(n)){n.TelegramWebviewProxy.postEvent(e,JSON.stringify(t));return}if(tt(F({external:F({notify:$n()})}),n)){n.external.notify(r);return}throw new ys}function Bn(e,t,n){n||(n={});const{capture:r}=n,[o,s]=kl();return new nt(i=>{(Array.isArray(t)?t:[t]).forEach(a=>{o(A(a,u=>{(!r||(Array.isArray(t)?r({event:a,payload:u}):r(u)))&&i(u)}))}),(n.postEvent||xn)(e,n.params)},n).finally(s)}const mo="launchParams";function ho(e){return e.replace(/^[^?#]*[?#]/,"").replace(/[?#]/g,"&")}function On(){for(const e of[()=>ho(window.location.href),()=>{const t=performance.getEntriesByType("navigation")[0];return t&&ho(t.name)},()=>Al(mo)]){const t=e();if(t&&fs(t))return Ko(mo,t),t}throw new _s}function ot(e){const t=zl(On());return e?tn(t):t}function on(e,t){if(!e)try{return ot(),!0}catch{return!1}return nt.fn(async n=>{if(Fo(window))return!0;try{return await Bn("web_app_request_theme","theme_changed",n),!0}catch{return!1}},t||{timeout:100})}function dp({launchParams:e,onEvent:t}={}){if(e){const o=typeof e=="string"||e instanceof URLSearchParams?e.toString():Ql({...e,tgWebAppData:void 0})+(e.tgWebAppData?`&tgWebAppData=${encodeURIComponent(e.tgWebAppData.toString())}`:"");if(!fs(o))throw new bs(o);Ko("launchParams",o)}if(Wo()){const o=Ho(re(),Mn(),ps),s=window.parent.postMessage.bind(window.parent);window.parent.postMessage=(...i)=>{const[a]=i,u=()=>{s(...i)};if(tt(o,a)&&t){const c=Yt(o,a);t([c.eventType,c.eventData],u)}else u()};return}const n=window.TelegramWebviewProxy||{},{postEvent:r}=n;window.TelegramWebviewProxy={...n,postEvent(o,s){const i=()=>{r&&r(o,s)};t?t([o,s?JSON.parse(s):void 0],i):i()}},Tn(!1,"Environment was mocked by the mockTelegramEnv function")}function Es(){return new URLSearchParams(On()).get("tgWebAppData")||void 0}function ws(e){return({req_id:t})=>t===e}function _o(e){return e.split(".").map(Number)}function fp(e,t){const n=_o(e),r=_o(t),o=Math.max(n.length,r.length);for(let s=0;s<o;s+=1){const i=n[s]||0,a=r[s]||0;if(i!==a)return i>a?1:-1}return 0}function P(e,t){return fp(e,t)<=0}function ae(e,t,n){if(typeof n=="string"){if(e==="web_app_open_link"){if(t==="try_instant_view")return P("6.4",n);if(t==="try_browser")return P("7.6",n)}if(e==="web_app_set_header_color"&&t==="color")return P("6.9",n);if(e==="web_app_close"&&t==="return_back")return P("7.6",n);if(e==="web_app_setup_main_button"&&t==="has_shine_effect")return P("7.10",n)}switch(e){case"web_app_open_tg_link":case"web_app_open_invoice":case"web_app_setup_back_button":case"web_app_set_background_color":case"web_app_set_header_color":case"web_app_trigger_haptic_feedback":return P("6.1",t);case"web_app_open_popup":return P("6.2",t);case"web_app_close_scan_qr_popup":case"web_app_open_scan_qr_popup":case"web_app_read_text_from_clipboard":return P("6.4",t);case"web_app_switch_inline_query":return P("6.7",t);case"web_app_invoke_custom_method":case"web_app_request_write_access":case"web_app_request_phone":return P("6.9",t);case"web_app_setup_settings_button":return P("6.10",t);case"web_app_biometry_get_info":case"web_app_biometry_open_settings":case"web_app_biometry_request_access":case"web_app_biometry_request_auth":case"web_app_biometry_update_token":return P("7.2",t);case"web_app_setup_swipe_behavior":return P("7.7",t);case"web_app_share_to_story":return P("7.8",t);case"web_app_setup_secondary_button":case"web_app_set_bottom_bar_color":return P("7.10",t);case"web_app_request_safe_area":case"web_app_request_content_safe_area":case"web_app_request_fullscreen":case"web_app_exit_fullscreen":case"web_app_set_emoji_status":case"web_app_add_to_home_screen":case"web_app_check_home_screen":case"web_app_request_emoji_status_access":case"web_app_check_location":case"web_app_open_location_settings":case"web_app_request_file_download":case"web_app_request_location":case"web_app_send_prepared_message":case"web_app_start_accelerometer":case"web_app_start_device_orientation":case"web_app_start_gyroscope":case"web_app_stop_accelerometer":case"web_app_stop_device_orientation":case"web_app_stop_gyroscope":case"web_app_toggle_orientation_lock":return P("8.0",t);default:return["iframe_ready","iframe_will_reload","web_app_close","web_app_data_send","web_app_expand","web_app_open_link","web_app_ready","web_app_request_theme","web_app_request_viewport","web_app_setup_main_button","web_app_setup_closing_behavior"].includes(e)}}function Ss(e,t){t||(t="strict");const n=typeof t=="function"?t:r=>{const{method:o,version:s}=r,i="param"in r?new hs(o,r.param,s):new ms(o,s);if(t==="strict")throw i;return console.warn(i.message)};return(r,o)=>ae(r,e)?r==="web_app_set_header_color"&&tt(F({color:Lo()}),o)&&!ae(r,"color",e)?n({version:e,method:r,param:"color"}):xn(r,o):n({version:e,method:r})}function mp(e,t,n,r){return Bn("web_app_invoke_custom_method","custom_method_invoked",{...r||{},params:{method:e,params:t,req_id:n},capture:ws(n)}).then(({result:o,error:s})=>{if(s)throw new gs(s);return o})}function $s(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function hp(e){return e.replace(/_([a-z])/g,(t,n)=>`-${n.toLowerCase()}`)}function Cs(e){return`tapps/${e}`}function U(e,t){sessionStorage.setItem(Cs(e),JSON.stringify(t))}function z(e){const t=sessionStorage.getItem(Cs(e));try{return t?JSON.parse(t):void 0}catch{}}function qn(...e){const t=e.flat(1);return[t.push.bind(t),()=>{t.forEach(n=>{n()})}]}function _p(e,t){t||(t={});const{textColor:n,bgColor:r,shouldLog:o}=t,s=o===void 0?!0:o,i=typeof s=="boolean"?()=>s:s;function a(u,c,...l){if(c||i()){const p="font-weight:bold;padding:0 5px;border-radius:5px";console[u](`%c${Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,timeZone:"UTC"}).format(new Date)}%c / %c${e}`,`${p};background-color: lightblue;color:black`,"",`${p};${n?`color:${n};`:""}${r?`background-color:${r}`:""}`,...l)}}return[a.bind(void 0,"log"),a.bind(void 0,"error")]}function bp(){return performance.getEntriesByType("navigation")[0]}function G(){const e=bp();return!!e&&e.type==="reload"}let Ee;function yp(e,t){Ee&&Ee.set(e,t)||t()}function sn(e){if(Ee)return e();Ee=new Map;try{e()}finally{Ee.forEach(t=>t()),Ee=void 0}}function As(e,t){t||(t={});const n=t.equals||Object.is;let r=[],o=e;const s=c=>{if(!n(o,c)){const l=o;o=c,yp(u,()=>{[...r].forEach(([p,m])=>{p(c,l),m&&a(p,!0)})})}};function i(c){const l=typeof c!="object"?{once:c}:c;return{once:l.once||!1,signal:l.signal||!1}}const a=(c,l)=>{const p=i(l),m=r.findIndex(([f,k])=>f===c&&k.once===p.once&&k.signal===p.signal);m>=0&&r.splice(m,1)},u=Object.assign(function(){return gp(u),o},{destroy(){r=[]},set:s,reset(){s(e)},sub(c,l){return r.push([c,i(l)]),()=>a(c,l)},unsub:a,unsubAll(){r=r.filter(c=>c[1].signal)}});return u}const Oe=[];function gp(e){Oe.length&&Oe[Oe.length-1].add(e)}function vp(e,t){let n=new Set,r;function o(){return r||(r=As(i(),t))}function s(){o().set(i())}function i(){n.forEach(c=>{c.unsub(s,{signal:!0})});const a=new Set;let u;Oe.push(a);try{u=e()}finally{Oe.pop()}return a.forEach(c=>{c.sub(s,{signal:!0})}),n=a,u}return Object.assign(function(){return o()()},{destroy(){o().destroy()},sub(...a){return o().sub(...a)},unsub(...a){o().unsub(...a)},unsubAll(...a){o().unsubAll(...a)}})}function ke(e,t){return As(e,t)}function _(e,t){return vp(e,t)}function b(e,t){const n=ke(e,t);return[n,_(n)]}let ks=!1;const[an,Um]=_p("SDK",{bgColor:"forestgreen",textColor:"white",shouldLog(){return ks}});function Ep(e){ks=e,Zl(e)}const Nt=ke(0),Ms=ke(xn),[bo,In]=b({tgWebAppPlatform:"unknown",tgWebAppVersion:"0.0"}),oe=_(()=>In().tgWebAppVersion);function Ps(e){e||(e={});const{postEvent:t}=e,n=e.launchParams||ot();bo.set(n),Ms.set(typeof t=="function"?t:Ss(n.tgWebAppVersion)),an(!1,"The package was configured. Launch params:",bo())}function jn(){return Nt.set(Nt()+1),Nt().toString()}function me(e,t,n){return mp(e,t,jn(),{...n||{},postEvent:h})}const w=(e,t,n)=>(n||(n={}),n.postEvent||(n.postEvent=h),Bn(e,t,n)),h=(e,t)=>Ms()(e,t);function Q(e){return _(()=>ae(e,oe()))}function wp(e){return t=>t instanceof e}function Y(e,t){t||(t=[]);class n extends Error{constructor(...o){const s=typeof t=="function"?t(...o):typeof t=="string"?[t]:t||[];super(...s),this.name=e}}return Object.defineProperty(n,"name",{value:e}),[n,wp(n)]}function he(e){return[e]}const[st,Sp]=Y("CSSVarsBoundError","CSS variables are already bound"),[Dn,$p]=Y("NotAvailableError",he),[Cp,Ap]=Y("InvalidEnvError",he),[ve,kp]=Y("FunctionNotAvailableError",he),[W,Mp]=Y("InvalidArgumentsError",(e,t)=>[e,{cause:t}]),[Ts,Pp]=Y("ConcurrentCallError",he),[xs,Tp]=Y("SetEmojiStatusError",e=>[`Failed to set emoji status: ${e}`]),[Nn,xp]=Y("AccessDeniedError",he),[Bs,Bp]=Y("FullscreenFailedError",he),[Os,Op]=Y("ShareMessageError",he);function un(){return typeof window>"u"}function C(e,t,n){n||(n={});const{isSupported:r,isMounted:o,isMounting:s,component:i,supports:a}=n||{},u=`${i?`${i}.`:""}${e}()`,c=r?Array.isArray(r)||typeof r=="object"&&"any"in r?r:[r]:void 0;function l(S){if(a){const $=a[S];return ae($[0],$[1],oe())}return!0}function p(){if(!c)return;function S(V){return typeof V=="function"?V():ae(V,oe())?void 0:`it is unsupported in Mini Apps version ${oe()}`}const $=Array.isArray(c)?c:c.any,q=$.map(S).filter(Boolean);return Array.isArray(c)?q[0]:q.length===$.length?q[q.length-1]:void 0}function m(...S){for(const $ in a)if(a[$][2](...S)&&!l($))return`option ${$} is not supported in Mini Apps version ${oe()}`}let f;if(a){f={};for(const S in a)f[S]=_(()=>l(S))}const k=_(()=>!p()),ge=_(()=>oe()!=="0.0"),M=_(()=>!o||o()),ne=_(()=>on()&&!un()&&ge()&&k()&&M());return Object.assign((...S)=>{const $=`Unable to call the ${u} ${i?"method":"function"}:`;if(un()||!on())throw new ve(`${$} it can't be called outside Mini Apps`);if(!ge())throw new ve(`${$} the SDK was not initialized. Use the SDK init() function`);const q=p();if(q)throw new ve(`${$} ${q}`);const V=m(...S);if(V)throw new ve(`${$} ${V}`);if(!M()){const d=s&&s()?"mounting. Wait for the mount completion":`unmounted. Use the ${i}.mount() method`;throw new ve(`${$} the component is ${d}`)}return t(...S)},t,{isAvailable:ne,ifAvailable(...S){return ne()?[!0,t(...S)]:[!1]}},c?{isSupported:k}:{},f?{supports:f}:{})}function it(e,t){return t||(t={}),(n,r,o,s)=>C(n,r,{...t,isSupported:o||t.isSupported,supports:s,component:e})}function le(e,t,n){return it(e,{isSupported:n,isMounted:t})}function N(e,t){return it(e,{isSupported:t})}const at="web_app_setup_back_button",qs="back_button_pressed",ut="backButton",[yo,Is]=b(!1),[Je,js]=b(!1),Ds=Q(at),Ns=le(ut,Je,at),Vn=N(ut,at),Vs=Ns("hide",()=>{Ln(!1)}),Ls=Vn("mount",()=>{Je()||(Ln(G()&&z(ut)||!1),Je.set(!0))});function Ln(e){e!==yo()&&(h(at,{is_visible:e}),U(ut,e),yo.set(e))}const Rs=Vn("onClick",e=>A(qs,e)),Hs=Vn("offClick",e=>{x(qs,e)}),Fs=Ns("show",()=>{Ln(!0)});function Ws(){Je.set(!1)}const qp=Object.freeze(Object.defineProperty({__proto__:null,hide:Vs,isMounted:js,isSupported:Ds,isVisible:Is,mount:Ls,offClick:Hs,onClick:Rs,show:Fs,unmount:Ws},Symbol.toStringTag,{value:"Module"}));var Ip=Object.defineProperty,jp=(e,t,n)=>t in e?Ip(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cn=(e,t,n)=>jp(e,typeof t!="symbol"?t+"":t,n);function Dp(e){return t=>t instanceof e}function Us(e,t){t||(t=[]);class n extends Error{constructor(...o){const s=typeof t=="function"?t(...o):typeof t=="string"?[t]:t||[];super(...s),this.name=e}}return Object.defineProperty(n,"name",{value:e}),[n,Dp(n)]}const[Np,Vp]=Us("CancelledError","Promise was canceled"),[Lp,zm]=Us("TimeoutError",(e,t)=>[`Timeout reached: ${e}ms`,{cause:t}]),zs=Symbol("Resolved");function go(e){return Array.isArray(e)&&e[0]===zs}function Rp(e){return[zs,e]}function vo(e,t){return e.reject=t.reject,e.abort=t.abort,e}let T=class ln extends Promise{constructor(t,n){let r,o;super((s,i)=>{let a,u;typeof t=="function"?(a=t,u=n):u=t;const c=[],l=d=>(...I)=>{const ee=d(...I);return c.forEach(It=>It()),ee},p=new AbortController,{signal:m}=p;o=d=>{!m.aborted&&p.abort(d)};const f=()=>m.reason,k=d=>{const I=()=>{d(f())};m.addEventListener("abort",I,!0);const ee=()=>{m.removeEventListener("abort",I,!0)};return c.push(ee),ee},ge=l(d=>{s(d),o(Rp(d))});r=l(d=>{i(d),o(d)}),u||(u={});const{abortSignal:M,rejectOnAbort:ne=!0}=u;if(M)if(M.aborted){const{reason:d}=M;if(ne)return r(d);o(d)}else{const d=()=>{o(M.reason)};M.addEventListener("abort",d),c.push(()=>{M.removeEventListener("abort",d)})}ne&&k(i);const{timeout:S}=u;if(S){const d=setTimeout(()=>{o(new Lp(S))},S);c.push(()=>{clearTimeout(d)})}const $=()=>m.aborted,q=()=>go(f()),V=()=>{const d=f();return go(d)?d[1]:void 0};try{const d=a&&a(ge,r,{abortReason:f,abortSignal:m,isAborted:$,isResolved:q,onAborted:k,onResolved:I=>k(()=>{q()&&I(V())}),resolved:V,throwIfAborted(){if($())throw f()}});d instanceof Promise&&d.catch(r)}catch(d){r(d)}}),cn(this,"abort"),cn(this,"reject"),this.abort=o,this.reject=r}static fn(t,n){return new ln(async(r,o,s)=>{try{r(await t(s))}catch(i){o(i)}},n)}static resolve(t){return this.fn(()=>t)}static reject(t){return new ln((n,r)=>{r(t)})}cancel(){this.abort(new Np)}catch(t){return this.then(void 0,t)}finally(t){return vo(super.finally(t),this)}then(t,n){return vo(super.then(t,n),this)}};function Eo(e,t){return e.resolve=t.resolve,e}let Hp=class pn extends T{constructor(t,n){let r,o;typeof t=="function"?(r=t,o=n):o=t;let s;super((i,a,u)=>{s=i,r&&r(i,a,u)},o),cn(this,"resolve"),this.resolve=s}static fn(t,n){return new pn((r,o,s)=>{try{Promise.resolve(t(s)).then(r,o)}catch(i){o(i)}},n)}static resolve(t){return this.fn(()=>t)}static reject(t){return new pn((n,r)=>{r(t)})}catch(t){return this.then(void 0,t)}finally(t){return Eo(super.finally(t),this)}then(t,n){return Eo(super.then(t,n),this)}};function O(e,t,n){n||(n={});const{promise:r,error:o}=n,[s,i]=r?[r,_(r)]:b(),[a,u]=o?[o,_(o)]:b();return[Object.assign((...c)=>{if(s()){const p=new Ts(t);return a.set(p),T.reject(p)}sn(()=>{s.set(e(...c)),a.set(void 0)});let l;return s().catch(p=>{throw l=p,p}).finally(()=>{sn(()=>{s.set(void 0),a.set(l)})})},e),[s,i,_(()=>!!s())],[a,u]]}function Re(e,t,n){const[r,...o]=O(t,`The ${e} component is already mounting`),[s,i]=b(!1);return[(...a)=>s()?T.resolve():r(...a).then(u=>{sn(()=>{s.set(!0),n(u)})}),...o,[s,i]]}const[Rn,Gs]=b({available:!1,type:"",accessGranted:!1,accessRequested:!1,deviceId:"",tokenSaved:!1}),Qs=_(()=>Rn().available),wo="web_app_biometry_get_info",Js=C("requestBiometry",e=>w(wo,"biometry_info_received",e),{isSupported:wo});function Hn(e){if(!Vp(e))throw e}function Me(e){const t=e();t&&t.catch(Hn).cancel()}const De="biometry",ct="web_app_biometry_request_auth",Fn="biometry_info_received",Ks=e=>{lt(Wn(e))};function Ys(){throw new Dn("Biometry is not available")}function Wn(e){let t=!1,n=!1,r="",o=!1,s="",i=!1;return e.available&&(t=!0,n=e.token_saved,r=e.device_id,o=e.access_requested,s=e.type,i=e.access_granted),{available:t,tokenSaved:n,deviceId:r,type:s,accessGranted:i,accessRequested:o}}const Zs=Q(ct),[Fp,Wp,Up,Xs]=Re(De,e=>{const t=G()&&z(De);return t?T.resolve(t):Js({abortSignal:e}).then(Wn)},e=>{A(Fn,Ks),lt(e)}),ei=N(De,ct),Un=le(De,Xs[0],ct),ti=ei("mount",Fp),[,zn,ni]=Wp,[,ri]=Up,[zp,oi]=Xs,[Gp,Qp,Jp]=O(e=>T.fn(async t=>{const n=Rn();n.available||Ys();const r=await w(ct,"biometry_auth_requested",{...e,...t,params:{reason:((e||{}).reason||"").trim()}}),{token:o}=r;return typeof o=="string"&&lt({...n,token:o}),r},e),"Biometry authentication is already in progress"),si=Un("authenticate",Gp),[,Gn,ii]=Qp,[,ai]=Jp,ui=ei("openSettings",()=>{h("web_app_biometry_open_settings")}),[Kp,Yp,Zp]=O(e=>T.fn(async t=>{const n=await w("web_app_biometry_request_access",Fn,{...e,...t,params:{reason:(e||{}).reason||""}}).then(Wn);return n.available||Ys(),lt(n),n.accessGranted},e),"Biometry access request is already in progress"),ci=Un("requestAccess",Kp),[,Qn,li]=Yp,[,pi]=Zp;function lt(e){Rn.set(e),U(De,e)}function di(){[Gn,Qn,zn].forEach(Me),x(Fn,Ks),zp.set(!1)}const fi=Un("updateToken",e=>(e||(e={}),w("web_app_biometry_update_token","biometry_token_updated",{...e,params:{token:e.token||"",reason:e.reason}}).then(t=>t.status))),Xp=Object.freeze(Object.defineProperty({__proto__:null,authError:ai,authPromise:Gn,authenticate:si,isAuthenticating:ii,isAvailable:Qs,isMounted:oi,isMounting:ni,isRequestingAccess:li,isSupported:Zs,mount:ti,mountError:ri,mountPromise:zn,openSettings:ui,requestAccess:ci,requestAccessError:pi,requestAccessPromise:Qn,state:Gs,unmount:di,updateToken:fi},Symbol.toStringTag,{value:"Module"}));function pt(e,t){return it(e,{isMounted:t})}const pe=it,dt="closingBehavior",[So,mi]=b(!1),[dn,Jn]=b(!1),hi=pt(dt,Jn),ed=pe(dt),_i=hi("disableConfirmation",()=>{Kn(!1)}),bi=hi("enableConfirmation",()=>{Kn(!0)}),yi=ed("mount",()=>{dn()||(Kn(G()&&z(dt)||!1),dn.set(!0))});function Kn(e){e!==So()&&(h("web_app_setup_closing_behavior",{need_confirmation:e}),U(dt,e),So.set(e))}function gi(){dn.set(!1)}const td=Object.freeze(Object.defineProperty({__proto__:null,disableConfirmation:_i,enableConfirmation:bi,isConfirmationEnabled:mi,isMounted:Jn,mount:yi,unmount:gi},Symbol.toStringTag,{value:"Module"}));var te;function vi(e){return{lang:(e==null?void 0:e.lang)??(te==null?void 0:te.lang),message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??(te==null?void 0:te.abortEarly),abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??(te==null?void 0:te.abortPipeEarly)}}var Vt;function nd(e){return Vt==null?void 0:Vt.get(e)}var Lt;function rd(e){return Lt==null?void 0:Lt.get(e)}var Rt;function od(e,t){var n;return(n=Rt==null?void 0:Rt.get(e))==null?void 0:n.get(t)}function sd(e){var n,r;const t=typeof e;return t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t==="object"||t==="function"?(e&&((r=(n=Object.getPrototypeOf(e))==null?void 0:n.constructor)==null?void 0:r.name))??"null":t}function L(e,t,n,r,o){const s=o&&"input"in o?o.input:n.value,i=(o==null?void 0:o.expected)??e.expects??null,a=(o==null?void 0:o.received)??sd(s),u={kind:e.kind,type:e.type,input:s,expected:i,received:a,message:`Invalid ${t}: ${i?`Expected ${i} but r`:"R"}eceived ${a}`,requirement:e.requirement,path:o==null?void 0:o.path,issues:o==null?void 0:o.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},c=e.kind==="schema",l=(o==null?void 0:o.message)??e.message??od(e.reference,u.lang)??(c?rd(u.lang):null)??r.message??nd(u.lang);l&&(u.message=typeof l=="function"?l(u):l),c&&(n.typed=!1),n.issues?n.issues.push(u):n.issues=[u]}function Z(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},vi())}}}function Ei(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}function id(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}var fn=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function wi(e){return{kind:"validation",type:"integer",reference:wi,async:!1,expects:null,requirement:Number.isInteger,message:e,"~run"(t,n){return t.typed&&!this.requirement(t.value)&&L(this,"integer",t,n),t}}}function Yn(e){return{kind:"transformation",type:"transform",reference:Yn,async:!1,operation:e,"~run"(t){return t.value=this.operation(t.value),t}}}function Si(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function $i(e,t){return{kind:"schema",type:"array",reference:$i,expects:"Array",async:!1,item:e,message:t,get"~standard"(){return Z(this)},"~run"(n,r){var s;const o=n.value;if(Array.isArray(o)){n.typed=!0,n.value=[];for(let i=0;i<o.length;i++){const a=o[i],u=this.item["~run"]({value:a},r);if(u.issues){const c={type:"array",origin:"value",input:o,key:i,value:a};for(const l of u.issues)l.path?l.path.unshift(c):l.path=[c],(s=n.issues)==null||s.push(l);if(n.issues||(n.issues=u.issues),r.abortEarly){n.typed=!1;break}}u.typed||(n.typed=!1),n.value.push(u.value)}}else L(this,"type",n,r);return n}}}function Zn(e){return{kind:"schema",type:"date",reference:Zn,expects:"Date",async:!1,message:e,get"~standard"(){return Z(this)},"~run"(t,n){return t.value instanceof Date?isNaN(t.value)?L(this,"type",t,n,{received:'"Invalid Date"'}):t.typed=!0:L(this,"type",t,n),t}}}function Ci(e,t){return{kind:"schema",type:"instance",reference:Ci,expects:e.name,async:!1,class:e,message:t,get"~standard"(){return Z(this)},"~run"(n,r){return n.value instanceof this.class?n.typed=!0:L(this,"type",n,r),n}}}function mn(e,t){return{kind:"schema",type:"loose_object",reference:mn,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return Z(this)},"~run"(n,r){var s;const o=n.value;if(o&&typeof o=="object"){n.typed=!0,n.value={};for(const i in this.entries){const a=this.entries[i];if(i in o||(a.type==="exact_optional"||a.type==="optional"||a.type==="nullish")&&a.default!==void 0){const u=i in o?o[i]:Si(a),c=a["~run"]({value:u},r);if(c.issues){const l={type:"object",origin:"value",input:o,key:i,value:u};for(const p of c.issues)p.path?p.path.unshift(l):p.path=[l],(s=n.issues)==null||s.push(p);if(n.issues||(n.issues=c.issues),r.abortEarly){n.typed=!1;break}}c.typed||(n.typed=!1),n.value[i]=c.value}else if(a.type!=="exact_optional"&&a.type!=="optional"&&a.type!=="nullish"&&(L(this,"key",n,r,{input:void 0,expected:`"${i}"`,path:[{type:"object",origin:"key",input:o,key:i,value:o[i]}]}),r.abortEarly))break}if(!n.issues||!r.abortEarly)for(const i in o)Ei(o,i)&&!(i in this.entries)&&(n.value[i]=o[i])}else L(this,"type",n,r);return n}}}function Xn(e){return{kind:"schema",type:"number",reference:Xn,expects:"number",async:!1,message:e,get"~standard"(){return Z(this)},"~run"(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:L(this,"type",t,n),t}}}function Ai(e,t){return{kind:"schema",type:"optional",reference:Ai,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return Z(this)},"~run"(n,r){return n.value===void 0&&(this.default!==void 0&&(n.value=Si(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function ki(e,t,n){return{kind:"schema",type:"record",reference:ki,expects:"Object",async:!1,key:e,value:t,message:n,get"~standard"(){return Z(this)},"~run"(r,o){var i,a;const s=r.value;if(s&&typeof s=="object"){r.typed=!0,r.value={};for(const u in s)if(Ei(s,u)){const c=s[u],l=this.key["~run"]({value:u},o);if(l.issues){const m={type:"object",origin:"key",input:s,key:u,value:c};for(const f of l.issues)f.path=[m],(i=r.issues)==null||i.push(f);if(r.issues||(r.issues=l.issues),o.abortEarly){r.typed=!1;break}}const p=this.value["~run"]({value:c},o);if(p.issues){const m={type:"object",origin:"value",input:s,key:u,value:c};for(const f of p.issues)f.path?f.path.unshift(m):f.path=[m],(a=r.issues)==null||a.push(f);if(r.issues||(r.issues=p.issues),o.abortEarly){r.typed=!1;break}}(!l.typed||!p.typed)&&(r.typed=!1),l.typed&&(r.value[l.value]=p.value)}}else L(this,"type",r,o);return r}}}function H(e){return{kind:"schema",type:"string",reference:H,expects:"string",async:!1,message:e,get"~standard"(){return Z(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:L(this,"type",t,n),t}}}function $o(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function Mi(e,t){return{kind:"schema",type:"union",reference:Mi,expects:id(e.map(n=>n.expects),"|"),async:!1,options:e,message:t,get"~standard"(){return Z(this)},"~run"(n,r){let o,s,i;for(const a of this.options){const u=a["~run"]({value:n.value},r);if(u.typed)if(u.issues)s?s.push(u):s=[u];else{o=u;break}else i?i.push(u):i=[u]}if(o)return o;if(s){if(s.length===1)return s[0];L(this,"type",n,r,{issues:$o(s)}),n.typed=!0}else{if((i==null?void 0:i.length)===1)return i[0];L(this,"type",n,r,{issues:$o(i)})}return n}}}function ft(e,t,n){const r=e["~run"]({value:t},vi(n));if(r.issues)throw new fn(r.issues);return r.value}function Ge(...e){return{...e[0],pipe:e,get"~standard"(){return Z(this)},"~run"(t,n){for(const r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}const Pi="web_app_invoke_custom_method",He=N("cloudStorage",Pi),Ti=Q(Pi),er=He("deleteItem",(e,t)=>{const n=Array.isArray(e)?e:[e];return n.length?me("deleteStorageValues",{keys:n},t).then():T.resolve()});function ad(e,t){const n=Array.isArray(e)?e:[e];return n.length?me("getStorageValues",{keys:n},t).then(r=>{const o={...n.reduce((s,i)=>(s[i]="",s),{}),...ft(ki(H(),H()),r)};return typeof e=="string"?o[e]:o}):T.resolve(Array.isArray(e)?{}:"")}const xi=He("getItem",ad),tr=He("getKeys",e=>me("getStorageKeys",{},e).then(t=>ft($i(H()),t))),Bi=He("setItem",(e,t,n)=>me("saveStorageValue",{key:e,value:t},n).then()),ud=He("clear",e=>tr(e).then(er)),cd=Object.freeze(Object.defineProperty({__proto__:null,clear:ud,deleteItem:er,getItem:xi,getKeys:tr,isSupported:Ti,setItem:Bi},Symbol.toStringTag,{value:"Module"})),Fe="web_app_trigger_haptic_feedback",nr=N("hapticFeedback",Fe),Oi=Q(Fe),qi=nr("impactOccurred",e=>{h(Fe,{type:"impact",impact_style:e})}),Ii=nr("notificationOccurred",e=>{h(Fe,{type:"notification",notification_type:e})}),ji=nr("selectionChanged",()=>{h(Fe,{type:"selection_change"})}),ld=Object.freeze(Object.defineProperty({__proto__:null,impactOccurred:qi,isSupported:Oi,notificationOccurred:Ii,selectionChanged:ji},Symbol.toStringTag,{value:"Module"})),[Di,Ni]=b(void 0);function X(e){return _(()=>{const t=Di();return t?t[e]:void 0})}const rr=X("auth_date"),or=X("can_send_after"),Vi=_(()=>{const e=rr(),t=or();return t&&e?new Date(e.getTime()+t*1e3):void 0}),Li=X("chat"),Ri=X("chat_type"),Hi=X("chat_instance"),Fi=X("hash"),Wi=X("query_id"),[pd,Ui]=b(),zi=X("receiver");function Gi(){const e=ot();Di.set(e.tgWebAppData),pd.set(Es())}const Qi=X("start_param"),Ji=X("user"),dd=Object.freeze(Object.defineProperty({__proto__:null,authDate:rr,canSendAfter:or,canSendAfterDate:Vi,chat:Li,chatInstance:Hi,chatType:Ri,hash:Fi,queryId:Wi,raw:Ui,receiver:zi,restore:Gi,startParam:Qi,state:Ni,user:Ji},Symbol.toStringTag,{value:"Module"})),sr="web_app_open_invoice",fd=N("invoice",sr),Ki=Q(sr);function md(e,t,n){let r;if(t==="url"){const{hostname:o,pathname:s}=new URL(e,window.location.href);if(o!=="t.me")throw new W(`Link has unexpected hostname: ${o}`);const i=s.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/);if(!i)throw new W('Expected to receive a link with a pathname in format "/invoice/{slug}" or "/${slug}"');[,,r]=i}else r=e,n=t;return w(sr,"invoice_closed",{...n,params:{slug:r},capture:o=>r===o.slug}).then(o=>o.status)}const[hd,_d,bd]=O(md,"Invoice is already opened"),Yi=fd("open",hd),[,Zi,Xi]=_d,[,ea]=bd,yd=Object.freeze(Object.defineProperty({__proto__:null,isOpened:Xi,isSupported:Ki,open:Yi,openError:ea,openPromise:Zi},Symbol.toStringTag,{value:"Module"})),qe="locationManager",ir="web_app_check_location",Co="web_app_open_location_settings",Ke=ke({available:!1,accessGranted:!1,accessRequested:!1});function ar(e){return _(()=>Ke()[e])}const ta=Q(ir),na=ar("available"),ra=ar("accessGranted"),oa=ar("accessRequested");function gd(e){let t=!1,n,r;return e.available&&(t=!0,n=e.access_requested,r=e.access_granted),{available:t,accessGranted:r||!1,accessRequested:n||!1}}const[vd,Ed,wd,sa]=Re(qe,e=>{const t=G()&&z(qe);return t?T.resolve(t):w("web_app_check_location","location_checked",e).then(gd)},e=>{Ke.set(e),U(qe,e)}),ia=N(qe,ir),Sd=le(qe,sa[0],ir),aa=ia("mount",vd),[,ua,ca]=Ed,[,la]=wd,[$d,pa]=sa,[Cd,Ad,kd]=O(e=>w("web_app_request_location","location_requested",e).then(t=>{if(!t.available)throw Ke.set({...Ke(),available:!1}),new Dn("Location data tracking is not available");const{available:n,...r}=t;return r}),"Location request is currently in progress"),da=Sd("requestLocation",Cd),[,ur,fa]=Ad,[,ma]=kd,ha=ia("openSettings",()=>{h(Co)},Co);function _a(){Me(ur),$d.set(!1)}const Md=Object.freeze(Object.defineProperty({__proto__:null,isAccessGranted:ra,isAccessRequested:oa,isAvailable:na,isMounted:pa,isMounting:ca,isRequestingLocation:fa,isSupported:ta,mount:aa,mountError:la,mountPromise:ua,openSettings:ha,requestLocation:da,requestLocationError:ma,requestLocationPromise:ur,unmount:_a},Symbol.toStringTag,{value:"Module"}));function cr(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=r)}return t}function ba(e){return{lang:(e==null?void 0:e.lang)??void 0,message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??void 0,abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??void 0}}function Pd(e,t){var n;return(n=void 0)==null?void 0:n.get(t)}function Td(e){var t,n;const r=typeof e;return r==="string"?`"${e}"`:r==="number"||r==="bigint"||r==="boolean"?`${e}`:r==="object"||r==="function"?(e&&((n=(t=Object.getPrototypeOf(e))==null?void 0:t.constructor)==null?void 0:n.name))??"null":r}function D(e,t,n,r,o){const s=o&&"input"in o?o.input:n.value,i=(o==null?void 0:o.expected)??e.expects??null,a=(o==null?void 0:o.received)??Td(s),u={kind:e.kind,type:e.type,input:s,expected:i,received:a,message:`Invalid ${t}: ${i?`Expected ${i} but r`:"R"}eceived ${a}`,requirement:e.requirement,path:o==null?void 0:o.path,issues:o==null?void 0:o.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},c=e.kind==="schema",l=(o==null?void 0:o.message)??e.message??Pd(e.reference,u.lang)??(c?(u.lang,void 0):null)??r.message??(u.lang,void 0);l&&(u.message=typeof l=="function"?l(u):l),c&&(n.typed=!1),n.issues?n.issues.push(u):n.issues=[u]}function J(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},ba())}}}function ya(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}function xd(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}var Bd=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function ga(e,t){return{kind:"validation",type:"check",reference:ga,async:!1,expects:null,requirement:e,message:t,"~run"(n,r){return n.typed&&!this.requirement(n.value)&&D(this,"input",n,r),n}}}function va(e){return{kind:"validation",type:"integer",reference:va,async:!1,expects:null,requirement:Number.isInteger,message:e,"~run"(t,n){return t.typed&&!this.requirement(t.value)&&D(this,"integer",t,n),t}}}function ue(e){return{kind:"transformation",type:"transform",reference:ue,async:!1,operation:e,"~run"(t){return t.value=this.operation(t.value),t}}}function Ea(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function Be(e){return{kind:"schema",type:"boolean",reference:Be,expects:"boolean",async:!1,message:e,get"~standard"(){return J(this)},"~run"(t,n){return typeof t.value=="boolean"?t.typed=!0:D(this,"type",t,n),t}}}function wa(e){return{kind:"schema",type:"date",reference:wa,expects:"Date",async:!1,message:e,get"~standard"(){return J(this)},"~run"(t,n){return t.value instanceof Date?isNaN(t.value)?D(this,"type",t,n,{received:'"Invalid Date"'}):t.typed=!0:D(this,"type",t,n),t}}}function Sa(e,t){return{kind:"schema",type:"instance",reference:Sa,expects:e.name,async:!1,class:e,message:t,get"~standard"(){return J(this)},"~run"(n,r){return n.value instanceof this.class?n.typed=!0:D(this,"type",n,r),n}}}function lr(e){return{kind:"schema",type:"lazy",reference:lr,expects:"unknown",async:!1,getter:e,get"~standard"(){return J(this)},"~run"(t,n){return this.getter(t.value)["~run"](t,n)}}}function We(e,t){return{kind:"schema",type:"loose_object",reference:We,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return J(this)},"~run"(n,r){var o;const s=n.value;if(s&&typeof s=="object"){n.typed=!0,n.value={};for(const i in this.entries){const a=this.entries[i];if(i in s||(a.type==="exact_optional"||a.type==="optional"||a.type==="nullish")&&a.default!==void 0){const u=i in s?s[i]:Ea(a),c=a["~run"]({value:u},r);if(c.issues){const l={type:"object",origin:"value",input:s,key:i,value:u};for(const p of c.issues)p.path?p.path.unshift(l):p.path=[l],(o=n.issues)==null||o.push(p);if(n.issues||(n.issues=c.issues),r.abortEarly){n.typed=!1;break}}c.typed||(n.typed=!1),n.value[i]=c.value}else if(a.type!=="exact_optional"&&a.type!=="optional"&&a.type!=="nullish"&&(D(this,"key",n,r,{input:void 0,expected:`"${i}"`,path:[{type:"object",origin:"key",input:s,key:i,value:s[i]}]}),r.abortEarly))break}if(!n.issues||!r.abortEarly)for(const i in s)ya(s,i)&&!(i in this.entries)&&(n.value[i]=s[i])}else D(this,"type",n,r);return n}}}function mt(e){return{kind:"schema",type:"number",reference:mt,expects:"number",async:!1,message:e,get"~standard"(){return J(this)},"~run"(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:D(this,"type",t,n),t}}}function E(e,t){return{kind:"schema",type:"optional",reference:E,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return J(this)},"~run"(n,r){return n.value===void 0&&(this.default!==void 0&&(n.value=Ea(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function $a(e,t,n){return{kind:"schema",type:"record",reference:$a,expects:"Object",async:!1,key:e,value:t,message:n,get"~standard"(){return J(this)},"~run"(r,o){var s,i;const a=r.value;if(a&&typeof a=="object"){r.typed=!0,r.value={};for(const u in a)if(ya(a,u)){const c=a[u],l=this.key["~run"]({value:u},o);if(l.issues){const m={type:"object",origin:"key",input:a,key:u,value:c};for(const f of l.issues)f.path=[m],(s=r.issues)==null||s.push(f);if(r.issues||(r.issues=l.issues),o.abortEarly){r.typed=!1;break}}const p=this.value["~run"]({value:c},o);if(p.issues){const m={type:"object",origin:"value",input:a,key:u,value:c};for(const f of p.issues)f.path?f.path.unshift(m):f.path=[m],(i=r.issues)==null||i.push(f);if(r.issues||(r.issues=p.issues),o.abortEarly){r.typed=!1;break}}(!l.typed||!p.typed)&&(r.typed=!1),l.typed&&(r.value[l.value]=p.value)}}else D(this,"type",r,o);return r}}}function g(e){return{kind:"schema",type:"string",reference:g,expects:"string",async:!1,message:e,get"~standard"(){return J(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:D(this,"type",t,n),t}}}function Ao(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function pr(e,t){return{kind:"schema",type:"union",reference:pr,expects:xd(e.map(n=>n.expects),"|"),async:!1,options:e,message:t,get"~standard"(){return J(this)},"~run"(n,r){let o,s,i;for(const a of this.options){const u=a["~run"]({value:n.value},r);if(u.typed)if(u.issues)s?s.push(u):s=[u];else{o=u;break}else i?i.push(u):i=[u]}if(o)return o;if(s){if(s.length===1)return s[0];D(this,"type",n,r,{issues:Ao(s)}),n.typed=!0}else{if((i==null?void 0:i.length)===1)return i[0];D(this,"type",n,r,{issues:Ao(i)})}return n}}}function Ca(e,t,n){const r=e["~run"]({value:t},ba(n));if(r.issues)throw new Bd(r.issues);return r.value}function ce(...e){return{...e[0],pipe:e,get"~standard"(){return J(this)},"~run"(t,n){for(const r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}function Od(e){return e.replace(/_[a-z]/g,t=>t[1].toUpperCase())}function qd(e){return Object.entries(e).reduce((t,[n,r])=>(t[Od(n)]=r,t),{})}function hn(e){const t=qd(e);for(const n in t){const r=t[n];r&&typeof r=="object"&&!(r instanceof Date)&&(t[n]=Array.isArray(r)?r.map(hn):hn(r))}return t}function dr(e){return ue(t=>e?hn(t):t)}function Aa(e){return t=>ce(e,dr(t))}function ka(e){return(t,n)=>Ca(ce(e,dr(n)),t)}function Ma(){return ue(JSON.parse)}function fr(e){const t=Aa(e);return n=>ce(g(),Ma(),t(n))}function mr(e){return ue(t=>{const n={};return new URLSearchParams(t).forEach((r,o)=>{const s=n[o];Array.isArray(s)?s.push(r):s===void 0?n[o]=r:n[o]=[s,r]}),Ca(e,n)})}function Pa(e){return t=>ce(pr([g(),Sa(URLSearchParams)]),mr(e),dr(t))}const ko=E(lr(()=>Vd())),Id=We({id:mt(),photo_url:E(g()),type:g(),title:g(),username:E(g())}),jd=We({added_to_attachment_menu:E(Be()),allows_write_to_pm:E(Be()),first_name:g(),id:mt(),is_bot:E(Be()),is_premium:E(Be()),last_name:E(g()),language_code:E(g()),photo_url:E(g()),username:E(g())}),Dd=We({auth_date:ce(g(),ue(e=>new Date(Number(e)*1e3)),wa()),can_send_after:E(ce(g(),ue(Number),va())),chat:E(lr(()=>Nd())),chat_type:E(g()),chat_instance:E(g()),hash:g(),query_id:E(g()),receiver:ko,start_param:E(g()),signature:g(),user:ko}),Nd=fr(Id),Vd=fr(jd),Ta=Pa(Dd);function fe(e){return/^#[\da-f]{6}$/i.test(e)}function xa(e){return/^#[\da-f]{3}$/i.test(e)}function Ba(e){const t=e.replace(/\s/g,"").toLowerCase();if(fe(t))return t;if(xa(t)){let r="#";for(let o=0;o<3;o+=1)r+=t[1+o].repeat(2);return r}const n=t.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/)||t.match(/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),\d{1,3}\)$/);if(!n)throw new Error(`Value "${e}" does not satisfy any of known RGB formats.`);return n.slice(1).reduce((r,o)=>r+parseInt(o,10).toString(16).padStart(2,"0"),"#")}const Ld=Aa($a(g(),ce(pr([g(),mt()]),ue(e=>typeof e=="number"?`#${(e&16777215).toString(16).padStart(6,"0")}`:e),ga(fe)))),Ht=E(ce(g(),ue(e=>e==="1"))),Mo=fr(Ld()),Rd=We({tgWebAppBotInline:Ht,tgWebAppData:E(Ta()),tgWebAppDefaultColors:E(Mo()),tgWebAppFullscreen:Ht,tgWebAppPlatform:g(),tgWebAppShowSettings:Ht,tgWebAppStartParam:E(g()),tgWebAppThemeParams:Mo(),tgWebAppVersion:g()}),Hd=Pa(Rd),Fd=ka(Ta()),Wd=ka(Hd());function hr(e,t){return t||(t=(n,r)=>JSON.stringify(r)),new URLSearchParams(Object.entries(e).reduce((n,[r,o])=>(Array.isArray(o)?n.push(...o.map(s=>[r,String(s)])):o!=null&&n.push([r,o instanceof Date?(o.getTime()/1e3|0).toString():typeof o=="string"||typeof o=="number"?String(o):typeof o=="boolean"?o?"1":"0":t(r,o)]),n),[])).toString()}function Oa(e){return hr(e)}function Ud(e){return hr(e,(t,n)=>t==="tgWebAppData"?Oa(n):JSON.stringify(n))}function _r(e){const t=Ba(e);return Math.sqrt([.299,.587,.114].reduce((n,r,o)=>{const s=parseInt(t.slice(1+o*2,1+(o+1)*2),16);return n+s*s*r},0))<120}const[Ft,qa]=b(!1),[we,Ia]=b({});function B(e){return _(()=>we()[e])}const ja=B("accent_text_color"),Ue=B("bg_color"),ht=B("button_color"),br=B("button_text_color"),yr=B("bottom_bar_bg_color"),Da=B("destructive_text_color"),Na=B("header_bg_color"),Va=B("hint_color"),La=_(()=>{const e=Ue();return!e||_r(e)}),Ra=B("link_color"),Ne=B("secondary_bg_color"),Ha=B("section_bg_color"),Fa=B("section_header_text_color"),Wa=B("section_separator_color"),Ua=B("subtitle_text_color"),za=B("text_color");function _e(e){return _(()=>_t()[e])}const Ie=ke({hasShineEffect:!1,isEnabled:!0,isLoaderVisible:!1,isVisible:!1,text:"Continue"}),_t=_(()=>{const e=Ie();return{...e,backgroundColor:e.backgroundColor||ht()||"#2481cc",textColor:e.textColor||br()||"#ffffff"}}),[_n,gr]=b(!1),Ga=_e("backgroundColor"),Qa=_e("hasShineEffect"),Ja=_e("isEnabled"),Ka=_e("isLoaderVisible"),Ya=_e("isVisible"),Za=_e("text"),Xa=_e("textColor"),zd="web_app_setup_main_button",eu="main_button_pressed",bt="mainButton",vr=pe(bt),Gd=pt(bt,gr),tu=vr("mount",()=>{if(!_n()){const e=G()&&z(bt);e&&Ie.set(e),_n.set(!0)}}),nu=vr("onClick",e=>A(eu,e)),ru=vr("offClick",e=>{x(eu,e)}),ou=Gd("setParams",e=>{Ie.set({...Ie(),...cr(e)}),U(bt,Ie());const t=_t();t.text&&h(zd,{color:t.backgroundColor,has_shine_effect:t.hasShineEffect,is_active:t.isEnabled,is_progress_visible:t.isLoaderVisible,is_visible:t.isVisible,text:t.text,text_color:t.textColor})});function su(){_n.set(!1)}const Qd=Object.freeze(Object.defineProperty({__proto__:null,backgroundColor:Ga,hasShineEffect:Qa,isEnabled:Ja,isLoaderVisible:Ka,isMounted:gr,isVisible:Ya,mount:tu,offClick:ru,onClick:nu,setParams:ou,state:_t,text:Za,textColor:Xa,unmount:su},Symbol.toStringTag,{value:"Module"}));function Er(e,t){document.documentElement.style.setProperty(e,t)}function wr(e){document.documentElement.style.removeProperty(e)}const Ve="themeParams",iu="theme_changed",Jd=pe(Ve),au=({theme_params:e})=>{we.set(e),U(Ve,e)},[Kd,Yd,Zd,uu]=Re(Ve,e=>{const t=G()&&z(Ve);return t?T.resolve(t):w("web_app_request_theme","theme_changed",e).then(n=>n.theme_params)},e=>{A(iu,au),we.set(e)}),Xd=pt(Ve,uu[0]),cu=Xd("bindCssVars",e=>{if(Ft())throw new st;e||(e=r=>`--tg-theme-${hp(r)}`);function t(r){Object.entries(we()).forEach(([o,s])=>{s&&r(o,s)})}function n(){t((r,o)=>{Er(e(r),o)})}return n(),we.sub(n),Ft.set(!0),()=>{t(wr),we.unsub(n),Ft.set(!1)}}),Sr=Jd("mount",Kd),[,$r,lu]=Yd,[,pu]=Zd,[ef,du]=uu;function fu(){Me($r),x(iu,au),ef.set(!1)}function mu(e){return _(()=>{const t=e();return fe(t)?t:t==="bg_color"?Ue():Ne()})}const[Ye,hu]=b("bg_color"),yt=mu(Ye),[Ze,_u]=b("bottom_bar_bg_color"),gt=_(()=>{const e=Ze();return fe(e)?e:e==="bottom_bar_bg_color"?yr()||Ne():e==="secondary_bg_color"?Ne():Ue()}),[Xe,bu]=b("bg_color"),Cr=mu(Xe),[Wt,yu]=b(!1),gu=_(()=>{const e=yt();return e?_r(e):!1}),[Ar,vu]=b(!0),kr=_(()=>({backgroundColor:Ye(),bottomBarColor:Ze(),headerColor:Xe(),isActive:Ar()})),bn="web_app_set_background_color",yn="web_app_set_bottom_bar_color",Qe="web_app_set_header_color",Eu="visibility_changed",$e="miniApp",Mr={any:[bn,yn,Qe]},wu=_(()=>Mr.any.some(e=>ae(e,oe()))),Su=e=>{Ar.set(e.is_visible),Et()},[tf,nf,rf,$u]=Re($e,e=>Sr(e).then(()=>G()&&z($e)||void 0),e=>{Tr.ifAvailable(e?e.backgroundColor:"bg_color"),xr.ifAvailable(e?e.bottomBarColor:"bottom_bar_bg_color"),Br.ifAvailable(e?e.headerColor:"bg_color"),Ar.set(e?e.isActive:!0),A(Eu,Su)}),Cu=pe($e),of=N($e,Mr),vt=le($e,$u[0],Mr),Au=vt("bindCssVars",e=>{if(Wt())throw new st;const[t,n]=qn();function r(o,s){function i(){Er(o,s()||null)}i(),t(s.sub(i),wr.bind(null,o))}return e||(e=o=>`--tg-${$s(o)}`),r(e("bgColor"),yt),r(e("bottomBarColor"),gt),r(e("headerColor"),Cr),t(()=>{Wt.set(!1)}),Wt.set(!0),n}),ku=Cu("close",e=>{h("web_app_close",{return_back:e})}),Mu=of("mount",tf),[,Pr,Pu]=nf,[,Tu]=rf,[sf,xu]=$u,Bu=Cu("ready",()=>{h("web_app_ready")});function Et(){U($e,kr())}const Tr=vt("setBackgroundColor",e=>{e!==Ye()&&(h(bn,{color:e}),Ye.set(e),Et())},bn),xr=vt("setBottomBarColor",e=>{e!==Ze()&&(h(yn,{color:e}),Ze.set(e),Et())},yn),Br=vt("setHeaderColor",e=>{e!==Xe()&&(h(Qe,fe(e)?{color:e}:{color_key:e}),Xe.set(e),Et())},Qe,{rgb:[Qe,"color",fe]});function Ou(){Me(Pr),x(Eu,Su),sf.set(!1)}const af=Object.freeze(Object.defineProperty({__proto__:null,backgroundColor:hu,backgroundColorRGB:yt,bindCssVars:Au,bottomBarColor:_u,bottomBarColorRGB:gt,close:ku,headerColor:bu,headerColorRGB:Cr,isActive:vu,isCssVarsBound:yu,isDark:gu,isMounted:xu,isMounting:Pu,isSupported:wu,mount:Mu,mountError:Tu,mountPromise:Pr,ready:Bu,setBackgroundColor:Tr,setBottomBarColor:xr,setHeaderColor:Br,state:kr,unmount:Ou},Symbol.toStringTag,{value:"Module"}));function uf(e){const t=e.message.trim(),n=(e.title||"").trim(),r=e.buttons||[];if(n.length>64)throw new W(`Invalid title: ${n}`);if(!t||t.length>256)throw new W(`Invalid message: ${t}`);if(r.length>3)throw new W(`Invalid buttons count: ${r.length}`);return{title:n,message:t,buttons:r.length?r.map((o,s)=>{const i=o.id||"";if(i.length>64)throw new W(`Button with index ${s} has invalid id: ${i}`);if(!o.type||o.type==="default"||o.type==="destructive"){const a=o.text.trim();if(!a||a.length>64)throw new W(`Button with index ${s} has invalid text: ${a}`);return{type:o.type,text:a,id:i}}return{type:o.type,id:i}}):[{type:"close",id:""}]}}const Or="web_app_open_popup",qu=N("popup",Or),Iu=Q(Or),[ju,qr,Du]=O(e=>w(Or,"popup_closed",{...e,params:uf(e)}).then(({button_id:t})=>t===void 0?null:t),"A popup is already opened"),Nu=qu("open",ju),Vu=qr[1],Lu=qr[2],Ru=Du[1],Hu=qu("show",ju),[,Fu,Wu]=qr,[,Uu]=Du,cf=Object.freeze(Object.defineProperty({__proto__:null,isOpened:Lu,isShown:Wu,isSupported:Iu,open:Nu,openError:Ru,openPromise:Vu,show:Hu,showError:Uu,showPromise:Fu},Symbol.toStringTag,{value:"Module"})),zu="web_app_close_scan_qr_popup",Ir="web_app_open_scan_qr_popup",lf="scan_qr_popup_closed",pf="qr_text_received",Gu=N("qrScanner",Ir),Qu=Gu("close",()=>{h(zu),Me(jr)}),Ju=Q(Ir);function df(e){e||(e={});const{onCaptured:t,text:n,capture:r}=e,[,o]=qn(A(lf,()=>{s.resolve()}),A(pf,i=>{t?t(i.data):(!r||r(i.data))&&(s.resolve(i.data),h(zu))})),s=new Hp(e);return(e.postEvent||h)(Ir,{text:n}),T.resolve(s).catch(Hn).finally(o)}const[ff,mf,hf]=O(df,"The QR Scanner is already opened"),Ku=Gu("open",ff),[,jr,Yu]=mf,[,Zu]=hf,_f=Object.freeze(Object.defineProperty({__proto__:null,close:Qu,isOpened:Yu,isSupported:Ju,open:Ku,openError:Zu,openPromise:jr},Symbol.toStringTag,{value:"Module"}));function de(e){return _(()=>wt()[e])}const je=ke({hasShineEffect:!1,isEnabled:!0,isLoaderVisible:!1,isVisible:!1,position:"left",text:"Cancel"}),wt=_(()=>{const e=je();return{...e,backgroundColor:e.backgroundColor||gt()||"#000000",textColor:e.textColor||ht()||"#2481cc"}}),[gn,Dr]=b(!1),Xu=de("backgroundColor"),ec=de("hasShineEffect"),tc=de("isEnabled"),nc=de("isLoaderVisible"),rc=de("isVisible"),oc=de("position"),sc=de("text"),ic=de("textColor"),St="web_app_setup_secondary_button",ac="secondary_button_pressed",$t="secondaryButton",Nr=N($t,St),bf=le($t,Dr,St),uc=Q(St),cc=Nr("mount",()=>{if(!gn()){const e=G()&&z($t);e&&je.set(e),gn.set(!0)}}),lc=Nr("onClick",e=>A(ac,e)),pc=Nr("offClick",e=>{x(ac,e)}),dc=bf("setParams",e=>{je.set({...je(),...cr(e)}),U($t,je());const t=wt();t.text&&h(St,{color:t.backgroundColor,has_shine_effect:t.hasShineEffect,is_active:t.isEnabled,is_progress_visible:t.isLoaderVisible,is_visible:t.isVisible,position:t.position,text:t.text,text_color:t.textColor})});function fc(){gn.set(!1)}const yf=Object.freeze(Object.defineProperty({__proto__:null,backgroundColor:Xu,hasShineEffect:ec,isEnabled:tc,isLoaderVisible:nc,isMounted:Dr,isSupported:uc,isVisible:rc,mount:cc,offClick:pc,onClick:lc,position:oc,setParams:dc,state:wt,text:sc,textColor:ic,unmount:fc},Symbol.toStringTag,{value:"Module"})),Ct="web_app_setup_settings_button",mc="settings_button_pressed",At="settingsButton",[Po,hc]=b(!1),[et,_c]=b(!1),bc=Q(Ct),Vr=N(At,Ct),yc=le(At,et,Ct),gc=yc("hide",()=>{Lr(!1)}),vc=Vr("mount",()=>{et()||(Lr(G()&&z(At)||!1),et.set(!0))});function Lr(e){e!==Po()&&(h(Ct,{is_visible:e}),U(At,e),Po.set(e))}const Ec=Vr("onClick",e=>A(mc,e)),wc=Vr("offClick",e=>{x(mc,e)}),Sc=yc("show",()=>{Lr(!0)});function $c(){et.set(!1)}const gf=Object.freeze(Object.defineProperty({__proto__:null,hide:gc,isMounted:_c,isSupported:bc,isVisible:hc,mount:vc,offClick:wc,onClick:Ec,show:Sc,unmount:$c},Symbol.toStringTag,{value:"Module"})),kt="web_app_setup_swipe_behavior",Mt="swipeBehavior",[Le,Cc]=b(!1),Ac=Q(kt),[vn,kc]=b(!0),vf=N(Mt,kt),Mc=le(Mt,Le,kt),Pc=Mc("disableVertical",()=>{Rr(!1)}),Tc=Mc("enableVertical",()=>{Rr(!0)}),xc=vf("mount",()=>{Le()||(Rr(G()&&z(Mt)||!1,!0),Le.set(!0))});function Rr(e,t){(e!==vn()||t)&&(h(kt,{allow_vertical_swipe:e}),U(Mt,e),vn.set(e))}function Bc(){Le.set(!1)}const Ef=Object.freeze(Object.defineProperty({__proto__:null,_isMounted:Le,_isVerticalEnabled:vn,disableVertical:Pc,enableVertical:Tc,isMounted:Cc,isSupported:Ac,isVerticalEnabled:kc,mount:xc,unmount:Bc},Symbol.toStringTag,{value:"Module"})),wf=Object.freeze(Object.defineProperty({__proto__:null,accentTextColor:ja,backgroundColor:Ue,bindCssVars:cu,bottomBarBgColor:yr,buttonColor:ht,buttonTextColor:br,destructiveTextColor:Da,headerBackgroundColor:Na,hintColor:Va,isCssVarsBound:qa,isDark:La,isMounted:du,isMounting:lu,linkColor:Ra,mount:Sr,mountError:pu,mountPromise:$r,secondaryBackgroundColor:Ne,sectionBackgroundColor:Ha,sectionHeaderTextColor:Fa,sectionSeparatorColor:Wa,state:Ia,subtitleTextColor:Ua,textColor:za,unmount:fu},Symbol.toStringTag,{value:"Module"})),be="viewport",Hr="fullscreen_changed",Fr="safe_area_changed",Wr="content_safe_area_changed",Ur="viewport_changed",Oc=pe(be),To={left:0,top:0,bottom:0,right:0};function Ut(e){return Math.max(e,0)}const[zt,zr]=b({contentSafeAreaInsets:To,height:0,isExpanded:!1,isFullscreen:!1,safeAreaInsets:To,stableHeight:0,width:0});function ye(e){return _(()=>zr()[e])}const Pt=ye("height"),Tt=ye("stableHeight"),Gr=ye("width"),qc=ye("isExpanded"),Ic=_(()=>Pt()===Tt());function Pe(e){const{height:t,stableHeight:n,width:r}=e;zt.set({...zt(),...cr({...e,height:t?Ut(t):void 0,width:r?Ut(r):void 0,stableHeight:n?Ut(n):void 0})}),U(be,zt())}function Sf(){return z(be)}function xt(e){return _(()=>Bt()[e])}const Bt=ye("contentSafeAreaInsets"),Qr=xt("bottom"),Jr=xt("left"),Kr=xt("right"),Yr=xt("top");function Ot(e){return _(()=>qt()[e])}const qt=ye("safeAreaInsets"),Zr=Ot("bottom"),Xr=Ot("left"),eo=Ot("right"),to=Ot("top"),jc="web_app_request_safe_area",Dc=N(be,jc),En=Dc("requestContentSafeAreaInsets",e=>w("web_app_request_content_safe_area",Wr,e));function Nc(e){return w("web_app_request_viewport",Ur,e)}const wn=Dc("requestSafeAreaInsets",e=>w(jc,Fr,e)),Vc=e=>{const{height:t}=e;Pe({isExpanded:e.is_expanded,height:t,width:e.width,stableHeight:e.is_state_stable?t:void 0})},Lc=e=>{Pe({isFullscreen:e.is_fullscreen})},Rc=e=>{Pe({safeAreaInsets:e})},Hc=e=>{Pe({contentSafeAreaInsets:e})},[$f,Cf,Af,kf]=Re(be,e=>{const t=G()&&Sf();return t?T.resolve(t):T.fn(async n=>{const r=await T.all([wn.isAvailable()?wn(n):qt(),En.isAvailable()?En(n):Bt()]),o=In(),s={contentSafeAreaInsets:r[1],isFullscreen:!!o.tgWebAppFullscreen,safeAreaInsets:r[0]};if(["macos","tdesktop","unigram","webk","weba","web"].includes(o.tgWebAppPlatform)){const i=window;return{...s,height:i.innerHeight,isExpanded:!0,stableHeight:i.innerHeight,width:i.innerWidth}}return Nc(n).then(i=>({...s,height:i.height,isExpanded:i.is_expanded,stableHeight:i.is_state_stable?i.height:0,width:i.width}))},e)},e=>{A(Ur,Vc),A(Hr,Lc),A(Fr,Rc),A(Wr,Hc),Pe(e)}),Fc=Oc("mount",$f),[,no,Wc]=Cf,[,Uc]=Af,[ro,zc]=kf;function Gc(){Me(no),x(Ur,Vc),x(Hr,Lc),x(Fr,Rc),x(Wr,Hc),ro.set(!1)}const Mf=pt(be,ro),[Gt,Qc]=b(!1),Jc=Mf("bindCssVars",e=>{if(Gt())throw new st;e||(e=n=>`--tg-viewport-${$s(n)}`);const t=[["height",Pt],["stableHeight",Tt],["width",Gr],["safeAreaInsetTop",to],["safeAreaInsetBottom",Zr],["safeAreaInsetLeft",Xr],["safeAreaInsetRight",eo],["contentSafeAreaInsetTop",Yr],["contentSafeAreaInsetBottom",Qr],["contentSafeAreaInsetLeft",Jr],["contentSafeAreaInsetRight",Kr]].reduce((n,[r,o])=>{const s=e(r);if(s){const i=()=>{Er(s,`${o()}px`)};n.push([i,o.sub(i),s])}return n},[]);return t.forEach(n=>{n[0]()}),Gt.set(!0),()=>{t.forEach(n=>{n[1](),wr(n[2])}),Gt.set(!1)}}),Kc=Oc("expand",()=>{h("web_app_expand")}),Yc="web_app_request_fullscreen",Pf=le(be,ro,Yc),oo=ye("isFullscreen"),[Tf,Zc]=b(),[xf,Xc]=b();function el(e,t){return Pf(e,O(n=>w(t?Yc:"web_app_exit_fullscreen",[Hr,"fullscreen_failed"],n).then(r=>{if("error"in r&&r.error!=="ALREADY_FULLSCREEN")throw new Bs(r.error);const o="is_fullscreen"in r?r.is_fullscreen:!0;o!==oo()&&Pe({isFullscreen:o})}),"Fullscreen mode change is already being requested",{promise:Tf,error:xf})[0])}const tl=el("requestFullscreen",!0),nl=el("exitFullscreen"),Bf=Object.freeze(Object.defineProperty({__proto__:null,bindCssVars:Jc,changeFullscreenError:Xc,changeFullscreenPromise:Zc,contentSafeAreaInsetBottom:Qr,contentSafeAreaInsetLeft:Jr,contentSafeAreaInsetRight:Kr,contentSafeAreaInsetTop:Yr,contentSafeAreaInsets:Bt,exitFullscreen:nl,expand:Kc,height:Pt,isCssVarsBound:Qc,isExpanded:qc,isFullscreen:oo,isMounted:zc,isMounting:Wc,isStable:Ic,mount:Fc,mountError:Uc,mountPromise:no,requestFullscreen:tl,safeAreaInsetBottom:Zr,safeAreaInsetLeft:Xr,safeAreaInsetRight:eo,safeAreaInsetTop:to,safeAreaInsets:qt,stableHeight:Tt,state:zr,unmount:Gc,width:Gr},Symbol.toStringTag,{value:"Module"})),rl="web_app_request_emoji_status_access",[Of,qf,If]=O(e=>w(rl,"emoji_status_access_requested",e).then(t=>t.status),"Emoji status access request is already in progress"),jf=C("requestEmojiStatusAccess",Of,{isSupported:rl}),[,Df,Nf]=qf,[,Vf]=If,ol="web_app_set_emoji_status",[Lf,Rf,Hf]=O((e,t)=>w(ol,["emoji_status_set","emoji_status_failed"],{params:{custom_emoji_id:e,duration:(t||{}).duration},...t}).then(n=>{if(n&&"error"in n)throw new xs(n.error)}),"Emoji status set request is currently in progress"),Ff=C("setEmojiStatus",Lf,{isSupported:ol}),[,Wf,Uf]=Rf,[,zf]=Hf,Gf={isSupported:"web_app_add_to_home_screen"},sl="home_screen_failed",Qf=C("onAddToHomeScreenFailed",(e,t)=>A(sl,e,t),{isSupported:"web_app_add_to_home_screen"}),Jf=C("offAddToHomeScreenFailed",e=>{x(sl,e)},Gf),il={isSupported:"web_app_add_to_home_screen"},al="home_screen_added",Kf=C("onAddedToHomeScreen",(e,t)=>A(al,e,t),il),Yf=C("offAddedToHomeScreen",e=>{x(al,e)},il),xo="web_app_add_to_home_screen",Zf=C("addToHomeScreen",()=>{h(xo)},{isSupported:xo}),ul="web_app_check_home_screen",[Xf,em,tm]=O(e=>w(ul,"home_screen_checked",e).then(t=>t.status||"unknown"),"Check home screen status request is currently in progress"),nm=C("checkHomeScreenStatus",Xf,{isSupported:ul}),[,rm,om]=em,[,sm]=tm,im=pe(),am=im("openLink",(e,t)=>{if(typeof e=="string")try{e=new URL(e)}catch(n){throw new W(`"${e.toString()}" is invalid URL`,n)}t||(t={}),h("web_app_open_link",{url:e.toString(),try_browser:t.tryBrowser,try_instant_view:t.tryInstantView})}),Bo="web_app_open_tg_link",um=pe(),cl=um("openTelegramLink",e=>{const t=e.toString();if(!t.match(/^https:\/\/t.me\/.+/))throw new W(`"${t}" is invalid URL`);if(!ae(Bo,oe())){window.location.href=t;return}e=new URL(e),h(Bo,{path_full:e.pathname+e.search})}),cm=pe(),lm=cm("shareURL",(e,t)=>{cl("https://t.me/share/url?"+new URLSearchParams({url:e,text:t||""}).toString().replace(/\+/g,"%20"))});function pm(e,t){return new T({abortSignal:t,timeout:e}).catch(()=>{})}const ll="web_app_request_phone",[dm,fm,mm]=O(e=>w(ll,"phone_requested",e).then(t=>t.status),"Phone access request is currently in progress"),pl=C("requestPhoneAccess",dm,{isSupported:ll}),[,hm,_m]=fm,[,bm]=mm;async function Oo(e){const t=await me("getRequestedContact",{},{...e,timeout:(e||{}).timeout||5e3});return ft(Ge(Mi([H(),Ci(URLSearchParams)]),mr(mn({contact:Ge(H(),Ma(),mn({user_id:Xn(),phone_number:H(),first_name:H(),last_name:Ai(H())})),auth_date:Ge(H(),Yn(n=>new Date(Number(n)*1e3)),Zn()),hash:H()}))),t)}const[ym,gm,vm]=O(e=>new T(async(t,n,r)=>{try{return t(await Oo(r))}catch(i){if(i instanceof fn)throw i}if(await pl(r)!=="sent")throw new Nn("User denied access");let s=50;for(;!r.isAborted();){try{return t(await Oo(r))}catch(i){if(i instanceof fn)throw i}await pm(s),s+=50}},e),"Contact is already being requested"),Em=C("requestContact",ym,{isSupported:"web_app_request_phone"}),[,wm,Sm]=gm,[,$m]=vm,dl="web_app_request_write_access",[Cm,Am,km]=O(e=>w(dl,"write_access_requested",e).then(t=>t.status),"Write access request is currently in progress"),Mm=C("requestWriteAccess",Cm,{isSupported:dl}),[,Pm,Tm]=Am,[,xm]=km;function Bm(e){const t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy")}finally{document.body.removeChild(t)}}async function Om(e){try{const{clipboard:t}=navigator;if(t)return await t.writeText(e)}catch{}Bm(e)}const qo="web_app_request_file_download",qm=C("downloadFile",(e,t,n)=>w(qo,"file_download_requested",{...n,params:{url:e,file_name:t}}).then(r=>{if(r.status!=="downloading")throw new Nn("User denied the action")}),{isSupported:qo}),Im=C("getCurrentTime",e=>me("getCurrentTime",{},e).then(t=>ft(Ge(Xn(),wi(),Yn(n=>new Date(n*1e3)),Zn()),t)),{isSupported:"web_app_invoke_custom_method"}),Io="web_app_read_text_from_clipboard",jm=C("readTextFromClipboard",e=>{const t=jn();return w(Io,"clipboard_text_received",{...e,params:{req_id:t},capture:ws(t)}).then(({data:n=null})=>n)},{isSupported:Io}),jo="web_app_data_send",Dm=C("sendData",e=>{const{size:t}=new Blob([e]);if(!t||t>4096)throw new W(t?"Maximum size of data to send is 4096 bytes":"Attempted to send empty data");h(jo,{data:e})},{isSupported:jo}),Do="web_app_send_prepared_message",Nm=C("shareMessage",(e,t)=>w(Do,["prepared_message_failed","prepared_message_sent"],{...t,params:{id:e}}).then(n=>{if(n&&"error"in n)throw new Os(n.error)}),{isSupported:Do}),No="web_app_share_to_story",Vm=C("shareStory",(e,t)=>{t||(t={}),h(No,{text:t.text,media_url:e,widget_link:t.widgetLink})},{isSupported:No}),Lm="web_app_switch_inline_query",Rm=C("switchInlineQuery",(e,t)=>{h(Lm,{query:e,chat_types:t||[]})},{isSupported(){return In().tgWebAppBotInline?void 0:"The application must be launched in the inline mode"}});function Hm(e){try{return[!0,e()]}catch(t){return[!1,t]}}function Fm(e){Ps(e);const[t,n]=qn(A("reload_iframe",()=>{an(!1,"Received a request to reload the page"),h("iframe_will_reload"),window.location.reload()})),{acceptCustomStyles:r=!0}=e||{};if(r){const o=document.createElement("style");o.id="telegram-custom-styles",document.head.appendChild(o),t(A("set_custom_style",s=>{o.innerHTML=s}),()=>{document.head.removeChild(o)})}return h("iframe_ready",{reload_supported:!0}),an(!1,"The package was initialized"),n}exports.AbortablePromise=nt;exports.AccessDeniedError=Nn;exports.CSSVarsBoundError=st;exports.CancelledError=zo;exports.ConcurrentCallError=Ts;exports.FullscreenFailedError=Bs;exports.FunctionUnavailableError=ve;exports.InvalidArgumentsError=W;exports.InvalidEnvError=Cp;exports.InvalidLaunchParamsError=bs;exports.InvokeCustomMethodError=gs;exports.LaunchParamsRetrieveError=_s;exports.ManualPromise=Sl;exports.MethodParameterUnsupportedError=hs;exports.MethodUnsupportedError=ms;exports.NotAvailableError=Dn;exports.SetEmojiStatusError=xs;exports.ShareMessageError=Os;exports.TimeoutError=Go;exports.UnknownEnvError=ys;exports.addToHomeScreen=Zf;exports.authenticateBiometry=si;exports.backButton=qp;exports.bindMiniAppCssVars=Au;exports.bindThemeParamsCssVars=cu;exports.bindViewportCssVars=Jc;exports.biometry=Xp;exports.biometryAuthError=ai;exports.biometryAuthPromise=Gn;exports.biometryMountError=ri;exports.biometryState=Gs;exports.changeFullscreenError=Xc;exports.changeFullscreenPromise=Zc;exports.checkHomeScreenStatus=nm;exports.checkHomeScreenStatusError=sm;exports.checkHomeScreenStatusPromise=rm;exports.closeMiniApp=ku;exports.closeQrScanner=Qu;exports.closingBehavior=td;exports.cloudStorage=cd;exports.configure=Ps;exports.copyTextToClipboard=Om;exports.createPostEvent=Ss;exports.createRequestId=jn;exports.deleteCloudStorageItem=er;exports.disableClosingConfirmation=_i;exports.disableVerticalSwipes=Pc;exports.downloadFile=qm;exports.emitEvent=rn;exports.enableClosingConfirmation=bi;exports.enableVerticalSwipes=Tc;exports.exitFullscreen=nl;exports.expandViewport=Kc;exports.getCloudStorageItem=xi;exports.getCloudStorageKeys=tr;exports.getCurrentTime=Im;exports.hapticFeedback=ld;exports.hapticFeedbackImpactOccurred=qi;exports.hapticFeedbackNotificationOccurred=Ii;exports.hapticFeedbackSelectionChanged=ji;exports.hideBackButton=Vs;exports.hideSettingsButton=gc;exports.ignoreCanceled=Hn;exports.init=Fm;exports.initData=dd;exports.initDataAuthDate=rr;exports.initDataCanSendAfter=or;exports.initDataCanSendAfterDate=Vi;exports.initDataChat=Li;exports.initDataChatInstance=Hi;exports.initDataChatType=Ri;exports.initDataHash=Fi;exports.initDataQueryId=Wi;exports.initDataRaw=Ui;exports.initDataReceiver=zi;exports.initDataStartParam=Qi;exports.initDataState=Ni;exports.initDataUser=Ji;exports.invoice=yd;exports.invokeCustomMethod=me;exports.isAccessDeniedError=xp;exports.isAuthenticatingBiometry=ii;exports.isBackButtonMounted=js;exports.isBackButtonSupported=Ds;exports.isBackButtonVisible=Is;exports.isBiometryAvailable=Qs;exports.isBiometryMounted=oi;exports.isBiometryMounting=ni;exports.isBiometrySupported=Zs;exports.isCSSVarsBoundError=Sp;exports.isCancelledError=vl;exports.isCheckingHomeScreenStatus=om;exports.isClosingBehaviorMounted=Jn;exports.isClosingConfirmationEnabled=mi;exports.isCloudStorageSupported=Ti;exports.isColorDark=_r;exports.isConcurrentCallError=Pp;exports.isFullscreen=oo;exports.isFullscreenFailedError=Bp;exports.isFunctionNotAvailableError=kp;exports.isHapticFeedbackSupported=Oi;exports.isInvalidArguments=Mp;exports.isInvalidEnvError=Ap;exports.isInvalidLaunchParamsError=ip;exports.isInvoiceOpened=Xi;exports.isInvoiceSupported=Ki;exports.isInvokeCustomMethodError=up;exports.isLaunchParamsRetrieveError=sp;exports.isLocationManagerAccessGranted=ra;exports.isLocationManagerAccessRequested=oa;exports.isLocationManagerAvailable=na;exports.isLocationManagerMounted=pa;exports.isLocationManagerMounting=ca;exports.isLocationManagerSupported=ta;exports.isMainButtonEnabled=Ja;exports.isMainButtonLoaderVisible=Ka;exports.isMainButtonMounted=gr;exports.isMainButtonVisible=Ya;exports.isMethodMethodParameterUnsupportedError=rp;exports.isMethodUnsupportedError=np;exports.isMiniAppActive=vu;exports.isMiniAppCssVarsBound=yu;exports.isMiniAppDark=gu;exports.isMiniAppMounted=xu;exports.isMiniAppMounting=Pu;exports.isMiniAppSupported=wu;exports.isNotAvailableError=$p;exports.isPopupOpened=Lu;exports.isPopupShown=Wu;exports.isPopupSupported=Iu;exports.isQrScannerOpened=Yu;exports.isQrScannerSupported=Ju;exports.isRGB=fe;exports.isRGBShort=xa;exports.isRequestingBiometryAccess=li;exports.isRequestingContact=Sm;exports.isRequestingEmojiStatusAccess=Nf;exports.isRequestingLocation=fa;exports.isRequestingPhoneAccess=_m;exports.isRequestingWriteAccess=Tm;exports.isSSR=un;exports.isSecondaryButtonEnabled=tc;exports.isSecondaryButtonLoaderVisible=nc;exports.isSecondaryButtonMounted=Dr;exports.isSecondaryButtonSupported=uc;exports.isSecondaryButtonVisible=rc;exports.isSetEmojiStatusError=Tp;exports.isSettingEmojiStatus=Uf;exports.isSettingsButtonMounted=_c;exports.isSettingsButtonSupported=bc;exports.isSettingsButtonVisible=hc;exports.isShareMessageError=Op;exports.isSwipeBehaviorMounted=Cc;exports.isSwipeBehaviorSupported=Ac;exports.isTMA=on;exports.isThemeParamsCssVarsBound=qa;exports.isThemeParamsDark=La;exports.isThemeParamsMounted=du;exports.isThemeParamsMounting=lu;exports.isTimeoutError=El;exports.isUnknownEnvError=ap;exports.isVerticalSwipesEnabled=kc;exports.isViewportCssVarsBound=Qc;exports.isViewportExpanded=qc;exports.isViewportMounted=zc;exports.isViewportMounting=Wc;exports.isViewportStable=Ic;exports.locationManager=Md;exports.locationManagerMountError=la;exports.locationManagerMountPromise=ua;exports.mainButton=Qd;exports.mainButtonBackgroundColor=Ga;exports.mainButtonHasShineEffect=Qa;exports.mainButtonState=_t;exports.mainButtonText=Za;exports.mainButtonTextColor=Xa;exports.miniApp=af;exports.miniAppBackgroundColor=hu;exports.miniAppBackgroundColorRGB=yt;exports.miniAppBottomBarColor=_u;exports.miniAppBottomBarColorRGB=gt;exports.miniAppHeaderColor=bu;exports.miniAppHeaderColorRGB=Cr;exports.miniAppMountError=Tu;exports.miniAppMountPromise=Pr;exports.miniAppReady=Bu;exports.miniAppState=kr;exports.mockTelegramEnv=dp;exports.mountBackButton=Ls;exports.mountBiometry=ti;exports.mountBiometryPromise=zn;exports.mountClosingBehavior=yi;exports.mountLocationManager=aa;exports.mountMainButton=tu;exports.mountMiniApp=Mu;exports.mountSecondaryButton=cc;exports.mountSettingsButton=vc;exports.mountSwipeBehavior=xc;exports.mountThemeParams=Sr;exports.mountViewport=Fc;exports.off=x;exports.offAddToHomeScreenFailed=Jf;exports.offAddedToHomeScreen=Yf;exports.offBackButtonClick=Hs;exports.offMainButtonClick=ru;exports.offSecondaryButtonClick=pc;exports.offSettingsButtonClick=wc;exports.on=A;exports.onAddToHomeScreenFailed=Qf;exports.onAddedToHomeScreen=Kf;exports.onBackButtonClick=Rs;exports.onMainButtonClick=nu;exports.onSecondaryButtonClick=lc;exports.onSettingsButtonClick=Ec;exports.openBiometrySettings=ui;exports.openInvoice=Yi;exports.openInvoiceError=ea;exports.openInvoicePromise=Zi;exports.openLink=am;exports.openLocationManagerSettings=ha;exports.openPopup=Nu;exports.openPopupError=Ru;exports.openPopupPromise=Vu;exports.openQrScanner=Ku;exports.openQrScannerError=Zu;exports.openQrScannerPromise=jr;exports.openTelegramLink=cl;exports.parseInitDataQuery=Fd;exports.parseLaunchParamsQuery=Wd;exports.popup=cf;exports.postEvent=h;exports.qrScanner=_f;exports.readTextFromClipboard=jm;exports.request=w;exports.requestBiometry=Js;exports.requestBiometryAccess=ci;exports.requestBiometryAccessError=pi;exports.requestBiometryAccessPromise=Qn;exports.requestContact=Em;exports.requestContactError=$m;exports.requestContactPromise=wm;exports.requestContentSafeAreaInsets=En;exports.requestEmojiStatusAccess=jf;exports.requestEmojiStatusAccessError=Vf;exports.requestEmojiStatusAccessPromise=Df;exports.requestFullscreen=tl;exports.requestLocation=da;exports.requestLocationError=ma;exports.requestLocationPromise=ur;exports.requestPhoneAccess=pl;exports.requestPhoneAccessError=bm;exports.requestPhoneAccessPromise=hm;exports.requestSafeAreaInsets=wn;exports.requestViewport=Nc;exports.requestWriteAccess=Mm;exports.requestWriteAccessError=xm;exports.requestWriteAccessPromise=Pm;exports.restoreInitData=Gi;exports.retrieveLaunchParams=ot;exports.retrieveRawInitData=Es;exports.retrieveRawLaunchParams=On;exports.safeCall=Hm;exports.secondaryButton=yf;exports.secondaryButtonBackgroundColor=Xu;exports.secondaryButtonHasShineEffect=ec;exports.secondaryButtonPosition=oc;exports.secondaryButtonState=wt;exports.secondaryButtonText=sc;exports.secondaryButtonTextColor=ic;exports.sendData=Dm;exports.serializeInitDataQuery=Oa;exports.serializeLaunchParamsQuery=Ud;exports.serializeToQuery=hr;exports.setCloudStorageItem=Bi;exports.setDebug=Ep;exports.setEmojiStatus=Ff;exports.setEmojiStatusError=zf;exports.setEmojiStatusPromise=Wf;exports.setMainButtonParams=ou;exports.setMiniAppBackgroundColor=Tr;exports.setMiniAppBottomBarColor=xr;exports.setMiniAppHeaderColor=Br;exports.setSecondaryButtonParams=dc;exports.settingsButton=gf;exports.shareMessage=Nm;exports.shareStory=Vm;exports.shareURL=lm;exports.showBackButton=Fs;exports.showPopup=Hu;exports.showPopupError=Uu;exports.showPopupPromise=Fu;exports.showSettingsButton=Sc;exports.supports=ae;exports.swipeBehavior=Ef;exports.switchInlineQuery=Rm;exports.targetOrigin=vs;exports.themeParams=wf;exports.themeParamsAccentTextColor=ja;exports.themeParamsBackgroundColor=Ue;exports.themeParamsBottomBarBgColor=yr;exports.themeParamsButtonColor=ht;exports.themeParamsButtonTextColor=br;exports.themeParamsDestructiveTextColor=Da;exports.themeParamsHeaderBackgroundColor=Na;exports.themeParamsHintColor=Va;exports.themeParamsLinkColor=Ra;exports.themeParamsMountError=pu;exports.themeParamsMountPromise=$r;exports.themeParamsSecondaryBackgroundColor=Ne;exports.themeParamsSectionBackgroundColor=Ha;exports.themeParamsSectionHeaderTextColor=Fa;exports.themeParamsSectionSeparatorColor=Wa;exports.themeParamsState=Ia;exports.themeParamsSubtitleTextColor=Ua;exports.themeParamsTextColor=za;exports.toRGB=Ba;exports.transformQueryUsing=mr;exports.unmountBackButton=Ws;exports.unmountBiometry=di;exports.unmountClosingBehavior=gi;exports.unmountLocationManager=_a;exports.unmountMainButton=su;exports.unmountMiniApp=Ou;exports.unmountSecondaryButton=fc;exports.unmountSettingsButton=$c;exports.unmountSwipeBehavior=Bc;exports.unmountThemeParams=fu;exports.unmountViewport=Gc;exports.updateBiometryToken=fi;exports.viewport=Bf;exports.viewportContentSafeAreaInsetBottom=Qr;exports.viewportContentSafeAreaInsetLeft=Jr;exports.viewportContentSafeAreaInsetRight=Kr;exports.viewportContentSafeAreaInsetTop=Yr;exports.viewportContentSafeAreaInsets=Bt;exports.viewportHeight=Pt;exports.viewportMountError=Uc;exports.viewportMountPromise=no;exports.viewportSafeAreaInsetBottom=Zr;exports.viewportSafeAreaInsetLeft=Xr;exports.viewportSafeAreaInsetRight=eo;exports.viewportSafeAreaInsetTop=to;exports.viewportSafeAreaInsets=qt;exports.viewportStableHeight=Tt;exports.viewportState=zr;exports.viewportWidth=Gr;exports.wrapSafe=C;
//# sourceMappingURL=index.cjs.map
